import{z as Tn,m as nt,b as bt,A as Ft,B as D,_ as pt,o as I,h as at,i as rt,c as F,F as pe,r as Ge,t as Qe,L as Br,q as je,C as Je,e as Z,d as j,j as He,s as Bt,n as Zt,D as Ct,E as No,G as tn,f as P,x as ko,H as Zr,I as En,u as _e,J as xe,p as Fr,K as en,M as fe,N as Gr,y as ee,l as To,O as Te,S as Eo,a as Io,P as zo,T as hr,Q as dr,R as Do}from"./index-BBgQu1ue.js";import{T as Po}from"./TheVideo-DNEzDrID.js";import{I as vn}from"./InputButton-BaX1As6T.js";import{T as Oo}from"./TheHeader-Ca5lwDc0.js";var Ro={value:()=>{}};function nn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Re(n)}function Re(t){this._=t}function Bo(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Re.prototype=nn.prototype={constructor:Re,on:function(t,e){var n=this._,r=Bo(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=Zo(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=pr(n[i],t.name,e);else if(e==null)for(i in n)n[i]=pr(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Re(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Zo(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function pr(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ro,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var wn="http://www.w3.org/1999/xhtml";const gr={svg:"http://www.w3.org/2000/svg",xhtml:wn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function rn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),gr.hasOwnProperty(e)?{space:gr[e],local:t}:t}function Fo(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===wn&&e.documentElement.namespaceURI===wn?e.createElement(t):e.createElementNS(n,t)}}function Go(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Hr(t){var e=rn(t);return(e.local?Go:Fo)(e)}function Ho(){}function In(t){return t==null?Ho:function(){return this.querySelector(t)}}function Xo(t){typeof t!="function"&&(t=In(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,u=r[i]=new Array(s),f,a,l=0;l<s;++l)(f=o[l])&&(a=t.call(f,f.__data__,l,o))&&("__data__"in f&&(a.__data__=f.__data__),u[l]=a);return new vt(r,this._parents)}function Uo(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Vo(){return[]}function Xr(t){return t==null?Vo:function(){return this.querySelectorAll(t)}}function qo(t){return function(){return Uo(t.apply(this,arguments))}}function Yo(t){typeof t=="function"?t=qo(t):t=Xr(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],u=s.length,f,a=0;a<u;++a)(f=s[a])&&(r.push(t.call(f,f.__data__,a,s)),i.push(f));return new vt(r,i)}function Ur(t){return function(){return this.matches(t)}}function Vr(t){return function(e){return e.matches(t)}}var Ko=Array.prototype.find;function Wo(t){return function(){return Ko.call(this.children,t)}}function Qo(){return this.firstElementChild}function jo(t){return this.select(t==null?Qo:Wo(typeof t=="function"?t:Vr(t)))}var Jo=Array.prototype.filter;function ta(){return Array.from(this.children)}function ea(t){return function(){return Jo.call(this.children,t)}}function na(t){return this.selectAll(t==null?ta:ea(typeof t=="function"?t:Vr(t)))}function ra(t){typeof t!="function"&&(t=Ur(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,u=r[i]=[],f,a=0;a<s;++a)(f=o[a])&&t.call(f,f.__data__,a,o)&&u.push(f);return new vt(r,this._parents)}function qr(t){return new Array(t.length)}function ia(){return new vt(this._enter||this._groups.map(qr),this._parents)}function Xe(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Xe.prototype={constructor:Xe,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function oa(t){return function(){return t}}function aa(t,e,n,r,i,o){for(var s=0,u,f=e.length,a=o.length;s<a;++s)(u=e[s])?(u.__data__=o[s],r[s]=u):n[s]=new Xe(t,o[s]);for(;s<f;++s)(u=e[s])&&(i[s]=u)}function sa(t,e,n,r,i,o,s){var u,f,a=new Map,l=e.length,h=o.length,d=new Array(l),g;for(u=0;u<l;++u)(f=e[u])&&(d[u]=g=s.call(f,f.__data__,u,e)+"",a.has(g)?i[u]=f:a.set(g,f));for(u=0;u<h;++u)g=s.call(t,o[u],u,o)+"",(f=a.get(g))?(r[u]=f,f.__data__=o[u],a.delete(g)):n[u]=new Xe(t,o[u]);for(u=0;u<l;++u)(f=e[u])&&a.get(d[u])===f&&(i[u]=f)}function ua(t){return t.__data__}function la(t,e){if(!arguments.length)return Array.from(this,ua);var n=e?sa:aa,r=this._parents,i=this._groups;typeof t!="function"&&(t=oa(t));for(var o=i.length,s=new Array(o),u=new Array(o),f=new Array(o),a=0;a<o;++a){var l=r[a],h=i[a],d=h.length,g=ca(t.call(l,l&&l.__data__,a,r)),x=g.length,_=u[a]=new Array(x),v=s[a]=new Array(x),y=f[a]=new Array(d);n(l,h,_,v,y,g,e);for(var b=0,A=0,S,R;b<x;++b)if(S=_[b]){for(b>=A&&(A=b+1);!(R=v[A])&&++A<x;);S._next=R||null}}return s=new vt(s,r),s._enter=u,s._exit=f,s}function ca(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function fa(){return new vt(this._exit||this._groups.map(qr),this._parents)}function ha(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function da(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),u=new Array(i),f=0;f<s;++f)for(var a=n[f],l=r[f],h=a.length,d=u[f]=new Array(h),g,x=0;x<h;++x)(g=a[x]||l[x])&&(d[x]=g);for(;f<i;++f)u[f]=n[f];return new vt(u,this._parents)}function pa(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function ga(t){t||(t=va);function e(h,d){return h&&d?t(h.__data__,d.__data__):!h-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],u=s.length,f=i[o]=new Array(u),a,l=0;l<u;++l)(a=s[l])&&(f[l]=a);f.sort(e)}return new vt(i,this._parents).order()}function va(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ya(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ma(){return Array.from(this)}function _a(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function xa(){let t=0;for(const e of this)++t;return t}function wa(){return!this.node()}function Ca(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,u;o<s;++o)(u=i[o])&&t.call(u,u.__data__,o,i);return this}function ba(t){return function(){this.removeAttribute(t)}}function La(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ma(t,e){return function(){this.setAttribute(t,e)}}function Sa(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function $a(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Aa(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Na(t,e){var n=rn(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?La:ba:typeof e=="function"?n.local?Aa:$a:n.local?Sa:Ma)(n,e))}function Yr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ka(t){return function(){this.style.removeProperty(t)}}function Ta(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ea(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ia(t,e,n){return arguments.length>1?this.each((e==null?ka:typeof e=="function"?Ea:Ta)(t,e,n??"")):ne(this.node(),t)}function ne(t,e){return t.style.getPropertyValue(e)||Yr(t).getComputedStyle(t,null).getPropertyValue(e)}function za(t){return function(){delete this[t]}}function Da(t,e){return function(){this[t]=e}}function Pa(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Oa(t,e){return arguments.length>1?this.each((e==null?za:typeof e=="function"?Pa:Da)(t,e)):this.node()[t]}function Kr(t){return t.trim().split(/^|\s+/)}function zn(t){return t.classList||new Wr(t)}function Wr(t){this._node=t,this._names=Kr(t.getAttribute("class")||"")}Wr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Qr(t,e){for(var n=zn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function jr(t,e){for(var n=zn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Ra(t){return function(){Qr(this,t)}}function Ba(t){return function(){jr(this,t)}}function Za(t,e){return function(){(e.apply(this,arguments)?Qr:jr)(this,t)}}function Fa(t,e){var n=Kr(t+"");if(arguments.length<2){for(var r=zn(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Za:e?Ra:Ba)(n,e))}function Ga(){this.textContent=""}function Ha(t){return function(){this.textContent=t}}function Xa(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ua(t){return arguments.length?this.each(t==null?Ga:(typeof t=="function"?Xa:Ha)(t)):this.node().textContent}function Va(){this.innerHTML=""}function qa(t){return function(){this.innerHTML=t}}function Ya(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ka(t){return arguments.length?this.each(t==null?Va:(typeof t=="function"?Ya:qa)(t)):this.node().innerHTML}function Wa(){this.nextSibling&&this.parentNode.appendChild(this)}function Qa(){return this.each(Wa)}function ja(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ja(){return this.each(ja)}function ts(t){var e=typeof t=="function"?t:Hr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function es(){return null}function ns(t,e){var n=typeof t=="function"?t:Hr(t),r=e==null?es:typeof e=="function"?e:In(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function rs(){var t=this.parentNode;t&&t.removeChild(this)}function is(){return this.each(rs)}function os(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function as(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ss(t){return this.select(t?as:os)}function us(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ls(t){return function(e){t.call(this,e,this.__data__)}}function cs(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function fs(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function hs(t,e,n){return function(){var r=this.__on,i,o=ls(e);if(r){for(var s=0,u=r.length;s<u;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function ds(t,e,n){var r=cs(t+""),i,o=r.length,s;if(arguments.length<2){var u=this.node().__on;if(u){for(var f=0,a=u.length,l;f<a;++f)for(i=0,l=u[f];i<o;++i)if((s=r[i]).type===l.type&&s.name===l.name)return l.value}return}for(u=e?hs:fs,i=0;i<o;++i)this.each(u(r[i],e,n));return this}function Jr(t,e,n){var r=Yr(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ps(t,e){return function(){return Jr(this,t,e)}}function gs(t,e){return function(){return Jr(this,t,e.apply(this,arguments))}}function vs(t,e){return this.each((typeof e=="function"?gs:ps)(t,e))}function*ys(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var ti=[null];function vt(t,e){this._groups=t,this._parents=e}function we(){return new vt([[document.documentElement]],ti)}function ms(){return this}vt.prototype=we.prototype={constructor:vt,select:Xo,selectAll:Yo,selectChild:jo,selectChildren:na,filter:ra,data:la,enter:ia,exit:fa,join:ha,merge:da,selection:ms,order:pa,sort:ga,call:ya,nodes:ma,node:_a,size:xa,empty:wa,each:Ca,attr:Na,style:Ia,property:Oa,classed:Fa,text:Ua,html:Ka,raise:Qa,lower:Ja,append:ts,insert:ns,remove:is,clone:ss,datum:us,on:ds,dispatch:vs,[Symbol.iterator]:ys};function Ot(t){return typeof t=="string"?new vt([[document.querySelector(t)]],[document.documentElement]):new vt([[t]],ti)}function _s(t){let e;for(;e=t.sourceEvent;)t=e;return t}function qt(t,e){if(t=_s(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Cn={capture:!0,passive:!1};function bn(t){t.preventDefault(),t.stopImmediatePropagation()}function xs(t){var e=t.document.documentElement,n=Ot(t).on("dragstart.drag",bn,Cn);"onselectstart"in e?n.on("selectstart.drag",bn,Cn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ws(t,e){var n=t.document.documentElement,r=Ot(t).on("dragstart.drag",null);e&&(r.on("click.drag",bn,Cn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Dn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ei(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ce(){}var ge=.7,Ue=1/ge,te="\\s*([+-]?\\d+)\\s*",ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",St="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Cs=/^#([0-9a-f]{3,8})$/,bs=new RegExp(`^rgb\\(${te},${te},${te}\\)$`),Ls=new RegExp(`^rgb\\(${St},${St},${St}\\)$`),Ms=new RegExp(`^rgba\\(${te},${te},${te},${ve}\\)$`),Ss=new RegExp(`^rgba\\(${St},${St},${St},${ve}\\)$`),$s=new RegExp(`^hsl\\(${ve},${St},${St}\\)$`),As=new RegExp(`^hsla\\(${ve},${St},${St},${ve}\\)$`),vr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Dn(Ce,ye,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:yr,formatHex:yr,formatHex8:Ns,formatHsl:ks,formatRgb:mr,toString:mr});function yr(){return this.rgb().formatHex()}function Ns(){return this.rgb().formatHex8()}function ks(){return ni(this).formatHsl()}function mr(){return this.rgb().formatRgb()}function ye(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Cs.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?_r(e):n===3?new dt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ee(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ee(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bs.exec(t))?new dt(e[1],e[2],e[3],1):(e=Ls.exec(t))?new dt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ms.exec(t))?Ee(e[1],e[2],e[3],e[4]):(e=Ss.exec(t))?Ee(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=$s.exec(t))?Cr(e[1],e[2]/100,e[3]/100,1):(e=As.exec(t))?Cr(e[1],e[2]/100,e[3]/100,e[4]):vr.hasOwnProperty(t)?_r(vr[t]):t==="transparent"?new dt(NaN,NaN,NaN,0):null}function _r(t){return new dt(t>>16&255,t>>8&255,t&255,1)}function Ee(t,e,n,r){return r<=0&&(t=e=n=NaN),new dt(t,e,n,r)}function Ts(t){return t instanceof Ce||(t=ye(t)),t?(t=t.rgb(),new dt(t.r,t.g,t.b,t.opacity)):new dt}function Ln(t,e,n,r){return arguments.length===1?Ts(t):new dt(t,e,n,r??1)}function dt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Dn(dt,Ln,ei(Ce,{brighter(t){return t=t==null?Ue:Math.pow(Ue,t),new dt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ge:Math.pow(ge,t),new dt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new dt(Kt(this.r),Kt(this.g),Kt(this.b),Ve(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xr,formatHex:xr,formatHex8:Es,formatRgb:wr,toString:wr}));function xr(){return`#${Yt(this.r)}${Yt(this.g)}${Yt(this.b)}`}function Es(){return`#${Yt(this.r)}${Yt(this.g)}${Yt(this.b)}${Yt((isNaN(this.opacity)?1:this.opacity)*255)}`}function wr(){const t=Ve(this.opacity);return`${t===1?"rgb(":"rgba("}${Kt(this.r)}, ${Kt(this.g)}, ${Kt(this.b)}${t===1?")":`, ${t})`}`}function Ve(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Kt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Yt(t){return t=Kt(t),(t<16?"0":"")+t.toString(16)}function Cr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new xt(t,e,n,r)}function ni(t){if(t instanceof xt)return new xt(t.h,t.s,t.l,t.opacity);if(t instanceof Ce||(t=ye(t)),!t)return new xt;if(t instanceof xt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,u=o-i,f=(o+i)/2;return u?(e===o?s=(n-r)/u+(n<r)*6:n===o?s=(r-e)/u+2:s=(e-n)/u+4,u/=f<.5?o+i:2-o-i,s*=60):u=f>0&&f<1?0:s,new xt(s,u,f,t.opacity)}function Is(t,e,n,r){return arguments.length===1?ni(t):new xt(t,e,n,r??1)}function xt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Dn(xt,Is,ei(Ce,{brighter(t){return t=t==null?Ue:Math.pow(Ue,t),new xt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ge:Math.pow(ge,t),new xt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new dt(yn(t>=240?t-240:t+120,i,r),yn(t,i,r),yn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new xt(br(this.h),Ie(this.s),Ie(this.l),Ve(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ve(this.opacity);return`${t===1?"hsl(":"hsla("}${br(this.h)}, ${Ie(this.s)*100}%, ${Ie(this.l)*100}%${t===1?")":`, ${t})`}`}}));function br(t){return t=(t||0)%360,t<0?t+360:t}function Ie(t){return Math.max(0,Math.min(1,t||0))}function yn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ri=t=>()=>t;function zs(t,e){return function(n){return t+n*e}}function Ds(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Ps(t){return(t=+t)==1?ii:function(e,n){return n-e?Ds(e,n,t):ri(isNaN(e)?n:e)}}function ii(t,e){var n=e-t;return n?zs(t,n):ri(isNaN(t)?e:t)}const Lr=function t(e){var n=Ps(e);function r(i,o){var s=n((i=Ln(i)).r,(o=Ln(o)).r),u=n(i.g,o.g),f=n(i.b,o.b),a=ii(i.opacity,o.opacity);return function(l){return i.r=s(l),i.g=u(l),i.b=f(l),i.opacity=a(l),i+""}}return r.gamma=t,r}(1);function Pt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Mn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mn=new RegExp(Mn.source,"g");function Os(t){return function(){return t}}function Rs(t){return function(e){return t(e)+""}}function Bs(t,e){var n=Mn.lastIndex=mn.lastIndex=0,r,i,o,s=-1,u=[],f=[];for(t=t+"",e=e+"";(r=Mn.exec(t))&&(i=mn.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),u[s]?u[s]+=o:u[++s]=o),(r=r[0])===(i=i[0])?u[s]?u[s]+=i:u[++s]=i:(u[++s]=null,f.push({i:s,x:Pt(r,i)})),n=mn.lastIndex;return n<e.length&&(o=e.slice(n),u[s]?u[s]+=o:u[++s]=o),u.length<2?f[0]?Rs(f[0].x):Os(e):(e=f.length,function(a){for(var l=0,h;l<e;++l)u[(h=f[l]).i]=h.x(a);return u.join("")})}var Mr=180/Math.PI,Sn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function oi(t,e,n,r,i,o){var s,u,f;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(f=t*n+e*r)&&(n-=t*f,r-=e*f),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,f/=u),t*r<e*n&&(t=-t,e=-e,f=-f,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Mr,skewX:Math.atan(f)*Mr,scaleX:s,scaleY:u}}var ze;function Zs(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Sn:oi(e.a,e.b,e.c,e.d,e.e,e.f)}function Fs(t){return t==null||(ze||(ze=document.createElementNS("http://www.w3.org/2000/svg","g")),ze.setAttribute("transform",t),!(t=ze.transform.baseVal.consolidate()))?Sn:(t=t.matrix,oi(t.a,t.b,t.c,t.d,t.e,t.f))}function ai(t,e,n,r){function i(a){return a.length?a.pop()+" ":""}function o(a,l,h,d,g,x){if(a!==h||l!==d){var _=g.push("translate(",null,e,null,n);x.push({i:_-4,x:Pt(a,h)},{i:_-2,x:Pt(l,d)})}else(h||d)&&g.push("translate("+h+e+d+n)}function s(a,l,h,d){a!==l?(a-l>180?l+=360:l-a>180&&(a+=360),d.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Pt(a,l)})):l&&h.push(i(h)+"rotate("+l+r)}function u(a,l,h,d){a!==l?d.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Pt(a,l)}):l&&h.push(i(h)+"skewX("+l+r)}function f(a,l,h,d,g,x){if(a!==h||l!==d){var _=g.push(i(g)+"scale(",null,",",null,")");x.push({i:_-4,x:Pt(a,h)},{i:_-2,x:Pt(l,d)})}else(h!==1||d!==1)&&g.push(i(g)+"scale("+h+","+d+")")}return function(a,l){var h=[],d=[];return a=t(a),l=t(l),o(a.translateX,a.translateY,l.translateX,l.translateY,h,d),s(a.rotate,l.rotate,h,d),u(a.skewX,l.skewX,h,d),f(a.scaleX,a.scaleY,l.scaleX,l.scaleY,h,d),a=l=null,function(g){for(var x=-1,_=d.length,v;++x<_;)h[(v=d[x]).i]=v.x(g);return h.join("")}}}var Gs=ai(Zs,"px, ","px)","deg)"),Hs=ai(Fs,", ",")",")"),Xs=1e-12;function Sr(t){return((t=Math.exp(t))+1/t)/2}function Us(t){return((t=Math.exp(t))-1/t)/2}function Vs(t){return((t=Math.exp(2*t))-1)/(t+1)}const qs=function t(e,n,r){function i(o,s){var u=o[0],f=o[1],a=o[2],l=s[0],h=s[1],d=s[2],g=l-u,x=h-f,_=g*g+x*x,v,y;if(_<Xs)y=Math.log(d/a)/e,v=function(Y){return[u+Y*g,f+Y*x,a*Math.exp(e*Y*y)]};else{var b=Math.sqrt(_),A=(d*d-a*a+r*_)/(2*a*n*b),S=(d*d-a*a-r*_)/(2*d*n*b),R=Math.log(Math.sqrt(A*A+1)-A),G=Math.log(Math.sqrt(S*S+1)-S);y=(G-R)/e,v=function(Y){var q=Y*y,K=Sr(R),U=a/(n*b)*(K*Vs(e*q+R)-Us(R));return[u+U*g,f+U*x,a*K/Sr(e*q+R)]}}return v.duration=y*1e3*e/Math.SQRT2,v}return i.rho=function(o){var s=Math.max(.001,+o),u=s*s,f=u*u;return t(s,u,f)},i}(Math.SQRT2,2,4);var re=0,he=0,le=0,si=1e3,qe,de,Ye=0,Wt=0,on=0,me=typeof performance=="object"&&performance.now?performance:Date,ui=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Pn(){return Wt||(ui(Ys),Wt=me.now()+on)}function Ys(){Wt=0}function Ke(){this._call=this._time=this._next=null}Ke.prototype=On.prototype={constructor:Ke,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Pn():+n)+(e==null?0:+e),!this._next&&de!==this&&(de?de._next=this:qe=this,de=this),this._call=t,this._time=n,$n()},stop:function(){this._call&&(this._call=null,this._time=1/0,$n())}};function On(t,e,n){var r=new Ke;return r.restart(t,e,n),r}function Ks(){Pn(),++re;for(var t=qe,e;t;)(e=Wt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--re}function $r(){Wt=(Ye=me.now())+on,re=he=0;try{Ks()}finally{re=0,Qs(),Wt=0}}function Ws(){var t=me.now(),e=t-Ye;e>si&&(on-=e,Ye=t)}function Qs(){for(var t,e=qe,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:qe=n);de=t,$n(r)}function $n(t){if(!re){he&&(he=clearTimeout(he));var e=t-Wt;e>24?(t<1/0&&(he=setTimeout($r,t-me.now()-on)),le&&(le=clearInterval(le))):(le||(Ye=me.now(),le=setInterval(Ws,si)),re=1,ui($r))}}function Ar(t,e,n){var r=new Ke;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var js=nn("start","end","cancel","interrupt"),Js=[],li=0,Nr=1,An=2,Be=3,kr=4,Nn=5,Ze=6;function an(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;tu(t,n,{name:e,index:r,group:i,on:js,tween:Js,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:li})}function Rn(t,e){var n=Lt(t,e);if(n.state>li)throw new Error("too late; already scheduled");return n}function $t(t,e){var n=Lt(t,e);if(n.state>Be)throw new Error("too late; already running");return n}function Lt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function tu(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=On(o,0,n.time);function o(a){n.state=Nr,n.timer.restart(s,n.delay,n.time),n.delay<=a&&s(a-n.delay)}function s(a){var l,h,d,g;if(n.state!==Nr)return f();for(l in r)if(g=r[l],g.name===n.name){if(g.state===Be)return Ar(s);g.state===kr?(g.state=Ze,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[l]):+l<e&&(g.state=Ze,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[l])}if(Ar(function(){n.state===Be&&(n.state=kr,n.timer.restart(u,n.delay,n.time),u(a))}),n.state=An,n.on.call("start",t,t.__data__,n.index,n.group),n.state===An){for(n.state=Be,i=new Array(d=n.tween.length),l=0,h=-1;l<d;++l)(g=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=g);i.length=h+1}}function u(a){for(var l=a<n.duration?n.ease.call(null,a/n.duration):(n.timer.restart(f),n.state=Nn,1),h=-1,d=i.length;++h<d;)i[h].call(t,l);n.state===Nn&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=Ze,n.timer.stop(),delete r[e];for(var a in r)return;delete t.__transition}}function Fe(t,e){var n=t.__transition,r,i,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>An&&r.state<Nn,r.state=Ze,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function eu(t){return this.each(function(){Fe(this,t)})}function nu(t,e){var n,r;return function(){var i=$t(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,u=r.length;s<u;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function ru(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=$t(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var u={name:e,value:n},f=0,a=i.length;f<a;++f)if(i[f].name===e){i[f]=u;break}f===a&&i.push(u)}o.tween=i}}function iu(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Lt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?nu:ru)(n,t,e))}function Bn(t,e,n){var r=t._id;return t.each(function(){var i=$t(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Lt(i,r).value[e]}}function ci(t,e){var n;return(typeof e=="number"?Pt:e instanceof ye?Lr:(n=ye(e))?(e=n,Lr):Bs)(t,e)}function ou(t){return function(){this.removeAttribute(t)}}function au(t){return function(){this.removeAttributeNS(t.space,t.local)}}function su(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function uu(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function lu(t,e,n){var r,i,o;return function(){var s,u=n(this),f;return u==null?void this.removeAttribute(t):(s=this.getAttribute(t),f=u+"",s===f?null:s===r&&f===i?o:(i=f,o=e(r=s,u)))}}function cu(t,e,n){var r,i,o;return function(){var s,u=n(this),f;return u==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),f=u+"",s===f?null:s===r&&f===i?o:(i=f,o=e(r=s,u)))}}function fu(t,e){var n=rn(t),r=n==="transform"?Hs:ci;return this.attrTween(t,typeof e=="function"?(n.local?cu:lu)(n,r,Bn(this,"attr."+t,e)):e==null?(n.local?au:ou)(n):(n.local?uu:su)(n,r,e))}function hu(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function du(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function pu(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&du(t,o)),n}return i._value=e,i}function gu(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&hu(t,o)),n}return i._value=e,i}function vu(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=rn(t);return this.tween(n,(r.local?pu:gu)(r,e))}function yu(t,e){return function(){Rn(this,t).delay=+e.apply(this,arguments)}}function mu(t,e){return e=+e,function(){Rn(this,t).delay=e}}function _u(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?yu:mu)(e,t)):Lt(this.node(),e).delay}function xu(t,e){return function(){$t(this,t).duration=+e.apply(this,arguments)}}function wu(t,e){return e=+e,function(){$t(this,t).duration=e}}function Cu(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?xu:wu)(e,t)):Lt(this.node(),e).duration}function bu(t,e){if(typeof e!="function")throw new Error;return function(){$t(this,t).ease=e}}function Lu(t){var e=this._id;return arguments.length?this.each(bu(e,t)):Lt(this.node(),e).ease}function Mu(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;$t(this,t).ease=n}}function Su(t){if(typeof t!="function")throw new Error;return this.each(Mu(this._id,t))}function $u(t){typeof t!="function"&&(t=Ur(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,u=r[i]=[],f,a=0;a<s;++a)(f=o[a])&&t.call(f,f.__data__,a,o)&&u.push(f);return new Et(r,this._parents,this._name,this._id)}function Au(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),u=0;u<o;++u)for(var f=e[u],a=n[u],l=f.length,h=s[u]=new Array(l),d,g=0;g<l;++g)(d=f[g]||a[g])&&(h[g]=d);for(;u<r;++u)s[u]=e[u];return new Et(s,this._parents,this._name,this._id)}function Nu(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ku(t,e,n){var r,i,o=Nu(e)?Rn:$t;return function(){var s=o(this,t),u=s.on;u!==r&&(i=(r=u).copy()).on(e,n),s.on=i}}function Tu(t,e){var n=this._id;return arguments.length<2?Lt(this.node(),n).on.on(t):this.each(ku(n,t,e))}function Eu(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Iu(){return this.on("end.remove",Eu(this._id))}function zu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=In(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var u=r[s],f=u.length,a=o[s]=new Array(f),l,h,d=0;d<f;++d)(l=u[d])&&(h=t.call(l,l.__data__,d,u))&&("__data__"in l&&(h.__data__=l.__data__),a[d]=h,an(a[d],e,n,d,a,Lt(l,n)));return new Et(o,this._parents,e,n)}function Du(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Xr(t));for(var r=this._groups,i=r.length,o=[],s=[],u=0;u<i;++u)for(var f=r[u],a=f.length,l,h=0;h<a;++h)if(l=f[h]){for(var d=t.call(l,l.__data__,h,f),g,x=Lt(l,n),_=0,v=d.length;_<v;++_)(g=d[_])&&an(g,e,n,_,d,x);o.push(d),s.push(l)}return new Et(o,s,e,n)}var Pu=we.prototype.constructor;function Ou(){return new Pu(this._groups,this._parents)}function Ru(t,e){var n,r,i;return function(){var o=ne(this,t),s=(this.style.removeProperty(t),ne(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function fi(t){return function(){this.style.removeProperty(t)}}function Bu(t,e,n){var r,i=n+"",o;return function(){var s=ne(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function Zu(t,e,n){var r,i,o;return function(){var s=ne(this,t),u=n(this),f=u+"";return u==null&&(f=u=(this.style.removeProperty(t),ne(this,t))),s===f?null:s===r&&f===i?o:(i=f,o=e(r=s,u))}}function Fu(t,e){var n,r,i,o="style."+e,s="end."+o,u;return function(){var f=$t(this,t),a=f.on,l=f.value[o]==null?u||(u=fi(e)):void 0;(a!==n||i!==l)&&(r=(n=a).copy()).on(s,i=l),f.on=r}}function Gu(t,e,n){var r=(t+="")=="transform"?Gs:ci;return e==null?this.styleTween(t,Ru(t,r)).on("end.style."+t,fi(t)):typeof e=="function"?this.styleTween(t,Zu(t,r,Bn(this,"style."+t,e))).each(Fu(this._id,t)):this.styleTween(t,Bu(t,r,e),n).on("end.style."+t,null)}function Hu(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Xu(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Hu(t,s,n)),r}return o._value=e,o}function Uu(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Xu(t,e,n??""))}function Vu(t){return function(){this.textContent=t}}function qu(t){return function(){var e=t(this);this.textContent=e??""}}function Yu(t){return this.tween("text",typeof t=="function"?qu(Bn(this,"text",t)):Vu(t==null?"":t+""))}function Ku(t){return function(e){this.textContent=t.call(this,e)}}function Wu(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Ku(i)),e}return r._value=t,r}function Qu(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Wu(t))}function ju(){for(var t=this._name,e=this._id,n=hi(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],u=s.length,f,a=0;a<u;++a)if(f=s[a]){var l=Lt(f,e);an(f,t,n,a,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Et(r,this._parents,t,n)}function Ju(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var u={value:s},f={value:function(){--i===0&&o()}};n.each(function(){var a=$t(this,r),l=a.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(f)),a.on=e}),i===0&&o()})}var tl=0;function Et(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function hi(){return++tl}var kt=we.prototype;Et.prototype={constructor:Et,select:zu,selectAll:Du,selectChild:kt.selectChild,selectChildren:kt.selectChildren,filter:$u,merge:Au,selection:Ou,transition:ju,call:kt.call,nodes:kt.nodes,node:kt.node,size:kt.size,empty:kt.empty,each:kt.each,on:Tu,attr:fu,attrTween:vu,style:Gu,styleTween:Uu,text:Yu,textTween:Qu,remove:Iu,tween:iu,delay:_u,duration:Cu,ease:Lu,easeVarying:Su,end:Ju,[Symbol.iterator]:kt[Symbol.iterator]};function el(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var nl={time:null,delay:0,duration:250,ease:el};function rl(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function il(t){var e,n;t instanceof Et?(e=t._id,t=t._name):(e=hi(),(n=nl).time=Pn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],u=s.length,f,a=0;a<u;++a)(f=s[a])&&an(f,t,e,a,s,n||rl(f,e));return new Et(r,this._parents,t,e)}we.prototype.interrupt=eu;we.prototype.transition=il;const De=t=>()=>t;function ol(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Tt(t,e,n){this.k=t,this.x=e,this.y=n}Tt.prototype={constructor:Tt,scale:function(t){return t===1?this:new Tt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Tt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Zn=new Tt(1,0,0);Tt.prototype;function _n(t){t.stopImmediatePropagation()}function ce(t){t.preventDefault(),t.stopImmediatePropagation()}function al(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function sl(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Tr(){return this.__zoom||Zn}function ul(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ll(){return navigator.maxTouchPoints||"ontouchstart"in this}function cl(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function fl(){var t=al,e=sl,n=cl,r=ul,i=ll,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],u=250,f=qs,a=nn("start","zoom","end"),l,h,d,g=500,x=150,_=0,v=10;function y(m){m.property("__zoom",Tr).on("wheel.zoom",q,{passive:!1}).on("mousedown.zoom",K).on("dblclick.zoom",U).filter(i).on("touchstart.zoom",O).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(m,$,L,N){var z=m.selection?m.selection():m;z.property("__zoom",Tr),m!==z?R(m,$,L,N):z.interrupt().each(function(){G(this,arguments).event(N).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},y.scaleBy=function(m,$,L,N){y.scaleTo(m,function(){var z=this.__zoom.k,C=typeof $=="function"?$.apply(this,arguments):$;return z*C},L,N)},y.scaleTo=function(m,$,L,N){y.transform(m,function(){var z=e.apply(this,arguments),C=this.__zoom,M=L==null?S(z):typeof L=="function"?L.apply(this,arguments):L,E=C.invert(M),B=typeof $=="function"?$.apply(this,arguments):$;return n(A(b(C,B),M,E),z,s)},L,N)},y.translateBy=function(m,$,L,N){y.transform(m,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof L=="function"?L.apply(this,arguments):L),e.apply(this,arguments),s)},null,N)},y.translateTo=function(m,$,L,N,z){y.transform(m,function(){var C=e.apply(this,arguments),M=this.__zoom,E=N==null?S(C):typeof N=="function"?N.apply(this,arguments):N;return n(Zn.translate(E[0],E[1]).scale(M.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof L=="function"?-L.apply(this,arguments):-L),C,s)},N,z)};function b(m,$){return $=Math.max(o[0],Math.min(o[1],$)),$===m.k?m:new Tt($,m.x,m.y)}function A(m,$,L){var N=$[0]-L[0]*m.k,z=$[1]-L[1]*m.k;return N===m.x&&z===m.y?m:new Tt(m.k,N,z)}function S(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function R(m,$,L,N){m.on("start.zoom",function(){G(this,arguments).event(N).start()}).on("interrupt.zoom end.zoom",function(){G(this,arguments).event(N).end()}).tween("zoom",function(){var z=this,C=arguments,M=G(z,C).event(N),E=e.apply(z,C),B=L==null?S(E):typeof L=="function"?L.apply(z,C):L,W=Math.max(E[1][0]-E[0][0],E[1][1]-E[0][1]),Q=z.__zoom,H=typeof $=="function"?$.apply(z,C):$,ht=f(Q.invert(B).concat(W/Q.k),H.invert(B).concat(W/H.k));return function(lt){if(lt===1)lt=H;else{var it=ht(lt),Qt=W/it[2];lt=new Tt(Qt,B[0]-it[0]*Qt,B[1]-it[1]*Qt)}M.zoom(null,lt)}})}function G(m,$,L){return!L&&m.__zooming||new Y(m,$)}function Y(m,$){this.that=m,this.args=$,this.active=0,this.sourceEvent=null,this.extent=e.apply(m,$),this.taps=0}Y.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,$){return this.mouse&&m!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var $=Ot(this.that).datum();a.call(m,this.that,new ol(m,{sourceEvent:this.sourceEvent,target:y,type:m,transform:this.that.__zoom,dispatch:a}),$)}};function q(m,...$){if(!t.apply(this,arguments))return;var L=G(this,$).event(m),N=this.__zoom,z=Math.max(o[0],Math.min(o[1],N.k*Math.pow(2,r.apply(this,arguments)))),C=qt(m);if(L.wheel)(L.mouse[0][0]!==C[0]||L.mouse[0][1]!==C[1])&&(L.mouse[1]=N.invert(L.mouse[0]=C)),clearTimeout(L.wheel);else{if(N.k===z)return;L.mouse=[C,N.invert(C)],Fe(this),L.start()}ce(m),L.wheel=setTimeout(M,x),L.zoom("mouse",n(A(b(N,z),L.mouse[0],L.mouse[1]),L.extent,s));function M(){L.wheel=null,L.end()}}function K(m,...$){if(d||!t.apply(this,arguments))return;var L=m.currentTarget,N=G(this,$,!0).event(m),z=Ot(m.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",W,!0),C=qt(m,L),M=m.clientX,E=m.clientY;xs(m.view),_n(m),N.mouse=[C,this.__zoom.invert(C)],Fe(this),N.start();function B(Q){if(ce(Q),!N.moved){var H=Q.clientX-M,ht=Q.clientY-E;N.moved=H*H+ht*ht>_}N.event(Q).zoom("mouse",n(A(N.that.__zoom,N.mouse[0]=qt(Q,L),N.mouse[1]),N.extent,s))}function W(Q){z.on("mousemove.zoom mouseup.zoom",null),ws(Q.view,N.moved),ce(Q),N.event(Q).end()}}function U(m,...$){if(t.apply(this,arguments)){var L=this.__zoom,N=qt(m.changedTouches?m.changedTouches[0]:m,this),z=L.invert(N),C=L.k*(m.shiftKey?.5:2),M=n(A(b(L,C),N,z),e.apply(this,$),s);ce(m),u>0?Ot(this).transition().duration(u).call(R,M,N,m):Ot(this).call(y.transform,M,N,m)}}function O(m,...$){if(t.apply(this,arguments)){var L=m.touches,N=L.length,z=G(this,$,m.changedTouches.length===N).event(m),C,M,E,B;for(_n(m),M=0;M<N;++M)E=L[M],B=qt(E,this),B=[B,this.__zoom.invert(B),E.identifier],z.touch0?!z.touch1&&z.touch0[2]!==B[2]&&(z.touch1=B,z.taps=0):(z.touch0=B,C=!0,z.taps=1+!!l);l&&(l=clearTimeout(l)),C&&(z.taps<2&&(h=B[0],l=setTimeout(function(){l=null},g)),Fe(this),z.start())}}function T(m,...$){if(this.__zooming){var L=G(this,$).event(m),N=m.changedTouches,z=N.length,C,M,E,B;for(ce(m),C=0;C<z;++C)M=N[C],E=qt(M,this),L.touch0&&L.touch0[2]===M.identifier?L.touch0[0]=E:L.touch1&&L.touch1[2]===M.identifier&&(L.touch1[0]=E);if(M=L.that.__zoom,L.touch1){var W=L.touch0[0],Q=L.touch0[1],H=L.touch1[0],ht=L.touch1[1],lt=(lt=H[0]-W[0])*lt+(lt=H[1]-W[1])*lt,it=(it=ht[0]-Q[0])*it+(it=ht[1]-Q[1])*it;M=b(M,Math.sqrt(lt/it)),E=[(W[0]+H[0])/2,(W[1]+H[1])/2],B=[(Q[0]+ht[0])/2,(Q[1]+ht[1])/2]}else if(L.touch0)E=L.touch0[0],B=L.touch0[1];else return;L.zoom("touch",n(A(M,E,B),L.extent,s))}}function V(m,...$){if(this.__zooming){var L=G(this,$).event(m),N=m.changedTouches,z=N.length,C,M;for(_n(m),d&&clearTimeout(d),d=setTimeout(function(){d=null},g),C=0;C<z;++C)M=N[C],L.touch0&&L.touch0[2]===M.identifier?delete L.touch0:L.touch1&&L.touch1[2]===M.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(M=qt(M,this),Math.hypot(h[0]-M[0],h[1]-M[1])<v)){var E=Ot(this).on("dblclick.zoom");E&&E.apply(this,arguments)}}}return y.wheelDelta=function(m){return arguments.length?(r=typeof m=="function"?m:De(+m),y):r},y.filter=function(m){return arguments.length?(t=typeof m=="function"?m:De(!!m),y):t},y.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:De(!!m),y):i},y.extent=function(m){return arguments.length?(e=typeof m=="function"?m:De([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),y):e},y.scaleExtent=function(m){return arguments.length?(o[0]=+m[0],o[1]=+m[1],y):[o[0],o[1]]},y.translateExtent=function(m){return arguments.length?(s[0][0]=+m[0][0],s[1][0]=+m[1][0],s[0][1]=+m[0][1],s[1][1]=+m[1][1],y):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},y.constrain=function(m){return arguments.length?(n=m,y):n},y.duration=function(m){return arguments.length?(u=+m,y):u},y.interpolate=function(m){return arguments.length?(f=m,y):f},y.on=function(){var m=a.on.apply(a,arguments);return m===a?y:m},y.clickDistance=function(m){return arguments.length?(_=(m=+m)*m,y):Math.sqrt(_)},y.tapDistance=function(m){return arguments.length?(v=+m,y):v},y}const ie=Tn("layout",()=>{const t=nt({}),e=nt({x:0,y:0}),n=nt({x:0,y:0,k:1});return{nodes:t,offset:e,transform:n}});function hl(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function i(){var o,s=n.length,u,f=0,a=0;for(o=0;o<s;++o)u=n[o],f+=u.x,a+=u.y;for(f=(f/s-t)*r,a=(a/s-e)*r,o=0;o<s;++o)u=n[o],u.x-=f,u.y-=a}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(t=+o,i):t},i.y=function(o){return arguments.length?(e=+o,i):e},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function dl(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return di(this.cover(e,n),e,n,t)}function di(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o=t._root,s={data:r},u=t._x0,f=t._y0,a=t._x1,l=t._y1,h,d,g,x,_,v,y,b;if(!o)return t._root=s,t;for(;o.length;)if((_=e>=(h=(u+a)/2))?u=h:a=h,(v=n>=(d=(f+l)/2))?f=d:l=d,i=o,!(o=o[y=v<<1|_]))return i[y]=s,t;if(g=+t._x.call(null,o.data),x=+t._y.call(null,o.data),e===g&&n===x)return s.next=o,i?i[y]=s:t._root=s,t;do i=i?i[y]=new Array(4):t._root=new Array(4),(_=e>=(h=(u+a)/2))?u=h:a=h,(v=n>=(d=(f+l)/2))?f=d:l=d;while((y=v<<1|_)===(b=(x>=d)<<1|g>=h));return i[b]=o,i[y]=s,t}function pl(t){var e,n,r=t.length,i,o,s=new Array(r),u=new Array(r),f=1/0,a=1/0,l=-1/0,h=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(s[n]=i,u[n]=o,i<f&&(f=i),i>l&&(l=i),o<a&&(a=o),o>h&&(h=o));if(f>l||a>h)return this;for(this.cover(f,a).cover(l,h),n=0;n<r;++n)di(this,s[n],u[n],t[n]);return this}function gl(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var s=i-n||1,u=this._root,f,a;n>t||t>=i||r>e||e>=o;)switch(a=(e<r)<<1|t<n,f=new Array(4),f[a]=u,u=f,s*=2,a){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function vl(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function yl(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ct(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function ml(t,e,n){var r,i=this._x0,o=this._y0,s,u,f,a,l=this._x1,h=this._y1,d=[],g=this._root,x,_;for(g&&d.push(new ct(g,i,o,l,h)),n==null?n=1/0:(i=t-n,o=e-n,l=t+n,h=e+n,n*=n);x=d.pop();)if(!(!(g=x.node)||(s=x.x0)>l||(u=x.y0)>h||(f=x.x1)<i||(a=x.y1)<o))if(g.length){var v=(s+f)/2,y=(u+a)/2;d.push(new ct(g[3],v,y,f,a),new ct(g[2],s,y,v,a),new ct(g[1],v,u,f,y),new ct(g[0],s,u,v,y)),(_=(e>=y)<<1|t>=v)&&(x=d[d.length-1],d[d.length-1]=d[d.length-1-_],d[d.length-1-_]=x)}else{var b=t-+this._x.call(null,g.data),A=e-+this._y.call(null,g.data),S=b*b+A*A;if(S<n){var R=Math.sqrt(n=S);i=t-R,o=e-R,l=t+R,h=e+R,r=g.data}}return r}function _l(t){if(isNaN(l=+this._x.call(null,t))||isNaN(h=+this._y.call(null,t)))return this;var e,n=this._root,r,i,o,s=this._x0,u=this._y0,f=this._x1,a=this._y1,l,h,d,g,x,_,v,y;if(!n)return this;if(n.length)for(;;){if((x=l>=(d=(s+f)/2))?s=d:f=d,(_=h>=(g=(u+a)/2))?u=g:a=g,e=n,!(n=n[v=_<<1|x]))return this;if(!n.length)break;(e[v+1&3]||e[v+2&3]||e[v+3&3])&&(r=e,y=v)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[v]=o:delete e[v],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=o,this)}function xl(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function wl(){return this._root}function Cl(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function bl(t){var e=[],n,r=this._root,i,o,s,u,f;for(r&&e.push(new ct(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,o=n.x0,s=n.y0,u=n.x1,f=n.y1)&&r.length){var a=(o+u)/2,l=(s+f)/2;(i=r[3])&&e.push(new ct(i,a,l,u,f)),(i=r[2])&&e.push(new ct(i,o,l,a,f)),(i=r[1])&&e.push(new ct(i,a,s,u,l)),(i=r[0])&&e.push(new ct(i,o,s,a,l))}return this}function Ll(t){var e=[],n=[],r;for(this._root&&e.push(new ct(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var o,s=r.x0,u=r.y0,f=r.x1,a=r.y1,l=(s+f)/2,h=(u+a)/2;(o=i[0])&&e.push(new ct(o,s,u,l,h)),(o=i[1])&&e.push(new ct(o,l,u,f,h)),(o=i[2])&&e.push(new ct(o,s,h,l,a)),(o=i[3])&&e.push(new ct(o,l,h,f,a))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Ml(t){return t[0]}function Sl(t){return arguments.length?(this._x=t,this):this._x}function $l(t){return t[1]}function Al(t){return arguments.length?(this._y=t,this):this._y}function Fn(t,e,n){var r=new Gn(e??Ml,n??$l,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function Gn(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Er(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var ft=Fn.prototype=Gn.prototype;ft.copy=function(){var t=new Gn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=Er(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=Er(r));return t};ft.add=dl;ft.addAll=pl;ft.cover=gl;ft.data=vl;ft.extent=yl;ft.find=ml;ft.remove=_l;ft.removeAll=xl;ft.root=wl;ft.size=Cl;ft.visit=bl;ft.visitAfter=Ll;ft.x=Sl;ft.y=Al;function wt(t){return function(){return t}}function Rt(t){return(t()-.5)*1e-6}function Nl(t){return t.x+t.vx}function kl(t){return t.y+t.vy}function Tl(t){var e,n,r,i=1,o=1;typeof t!="function"&&(t=wt(t==null?1:+t));function s(){for(var a,l=e.length,h,d,g,x,_,v,y=0;y<o;++y)for(h=Fn(e,Nl,kl).visitAfter(u),a=0;a<l;++a)d=e[a],_=n[d.index],v=_*_,g=d.x+d.vx,x=d.y+d.vy,h.visit(b);function b(A,S,R,G,Y){var q=A.data,K=A.r,U=_+K;if(q){if(q.index>d.index){var O=g-q.x-q.vx,T=x-q.y-q.vy,V=O*O+T*T;V<U*U&&(O===0&&(O=Rt(r),V+=O*O),T===0&&(T=Rt(r),V+=T*T),V=(U-(V=Math.sqrt(V)))/V*i,d.vx+=(O*=V)*(U=(K*=K)/(v+K)),d.vy+=(T*=V)*U,q.vx-=O*(U=1-U),q.vy-=T*U)}return}return S>g+U||G<g-U||R>x+U||Y<x-U}}function u(a){if(a.data)return a.r=n[a.data.index];for(var l=a.r=0;l<4;++l)a[l]&&a[l].r>a.r&&(a.r=a[l].r)}function f(){if(e){var a,l=e.length,h;for(n=new Array(l),a=0;a<l;++a)h=e[a],n[h.index]=+t(h,a,e)}}return s.initialize=function(a,l){e=a,r=l,f()},s.iterations=function(a){return arguments.length?(o=+a,s):o},s.strength=function(a){return arguments.length?(i=+a,s):i},s.radius=function(a){return arguments.length?(t=typeof a=="function"?a:wt(+a),f(),s):t},s}function El(t){return t.index}function Ir(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Il(t){var e=El,n=h,r,i=wt(30),o,s,u,f,a,l=1;t==null&&(t=[]);function h(v){return 1/Math.min(u[v.source.index],u[v.target.index])}function d(v){for(var y=0,b=t.length;y<l;++y)for(var A=0,S,R,G,Y,q,K,U;A<b;++A)S=t[A],R=S.source,G=S.target,Y=G.x+G.vx-R.x-R.vx||Rt(a),q=G.y+G.vy-R.y-R.vy||Rt(a),K=Math.sqrt(Y*Y+q*q),K=(K-o[A])/K*v*r[A],Y*=K,q*=K,G.vx-=Y*(U=f[A]),G.vy-=q*U,R.vx+=Y*(U=1-U),R.vy+=q*U}function g(){if(s){var v,y=s.length,b=t.length,A=new Map(s.map((R,G)=>[e(R,G,s),R])),S;for(v=0,u=new Array(y);v<b;++v)S=t[v],S.index=v,typeof S.source!="object"&&(S.source=Ir(A,S.source)),typeof S.target!="object"&&(S.target=Ir(A,S.target)),u[S.source.index]=(u[S.source.index]||0)+1,u[S.target.index]=(u[S.target.index]||0)+1;for(v=0,f=new Array(b);v<b;++v)S=t[v],f[v]=u[S.source.index]/(u[S.source.index]+u[S.target.index]);r=new Array(b),x(),o=new Array(b),_()}}function x(){if(s)for(var v=0,y=t.length;v<y;++v)r[v]=+n(t[v],v,t)}function _(){if(s)for(var v=0,y=t.length;v<y;++v)o[v]=+i(t[v],v,t)}return d.initialize=function(v,y){s=v,a=y,g()},d.links=function(v){return arguments.length?(t=v,g(),d):t},d.id=function(v){return arguments.length?(e=v,d):e},d.iterations=function(v){return arguments.length?(l=+v,d):l},d.strength=function(v){return arguments.length?(n=typeof v=="function"?v:wt(+v),x(),d):n},d.distance=function(v){return arguments.length?(i=typeof v=="function"?v:wt(+v),_(),d):i},d}const zl=1664525,Dl=1013904223,zr=4294967296;function Pl(){let t=1;return()=>(t=(zl*t+Dl)%zr)/zr}function Ol(t){return t.x}function Rl(t){return t.y}var Bl=10,Zl=Math.PI*(3-Math.sqrt(5));function Fl(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,u=new Map,f=On(h),a=nn("tick","end"),l=Pl();t==null&&(t=[]);function h(){d(),a.call("tick",e),n<r&&(f.stop(),a.call("end",e))}function d(_){var v,y=t.length,b;_===void 0&&(_=1);for(var A=0;A<_;++A)for(n+=(o-n)*i,u.forEach(function(S){S(n)}),v=0;v<y;++v)b=t[v],b.fx==null?b.x+=b.vx*=s:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=s:(b.y=b.fy,b.vy=0);return e}function g(){for(var _=0,v=t.length,y;_<v;++_){if(y=t[_],y.index=_,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var b=Bl*Math.sqrt(.5+_),A=_*Zl;y.x=b*Math.cos(A),y.y=b*Math.sin(A)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function x(_){return _.initialize&&_.initialize(t,l),_}return g(),e={tick:d,restart:function(){return f.restart(h),e},stop:function(){return f.stop(),e},nodes:function(_){return arguments.length?(t=_,g(),u.forEach(x),e):t},alpha:function(_){return arguments.length?(n=+_,e):n},alphaMin:function(_){return arguments.length?(r=+_,e):r},alphaDecay:function(_){return arguments.length?(i=+_,e):+i},alphaTarget:function(_){return arguments.length?(o=+_,e):o},velocityDecay:function(_){return arguments.length?(s=1-_,e):1-s},randomSource:function(_){return arguments.length?(l=_,u.forEach(x),e):l},force:function(_,v){return arguments.length>1?(v==null?u.delete(_):u.set(_,x(v)),e):u.get(_)},find:function(_,v,y){var b=0,A=t.length,S,R,G,Y,q;for(y==null?y=1/0:y*=y,b=0;b<A;++b)Y=t[b],S=_-Y.x,R=v-Y.y,G=S*S+R*R,G<y&&(q=Y,y=G);return q},on:function(_,v){return arguments.length>1?(a.on(_,v),e):a.on(_)}}}function Gl(){var t,e,n,r,i=wt(-30),o,s=1,u=1/0,f=.81;function a(g){var x,_=t.length,v=Fn(t,Ol,Rl).visitAfter(h);for(r=g,x=0;x<_;++x)e=t[x],v.visit(d)}function l(){if(t){var g,x=t.length,_;for(o=new Array(x),g=0;g<x;++g)_=t[g],o[_.index]=+i(_,g,t)}}function h(g){var x=0,_,v,y=0,b,A,S;if(g.length){for(b=A=S=0;S<4;++S)(_=g[S])&&(v=Math.abs(_.value))&&(x+=_.value,y+=v,b+=v*_.x,A+=v*_.y);g.x=b/y,g.y=A/y}else{_=g,_.x=_.data.x,_.y=_.data.y;do x+=o[_.data.index];while(_=_.next)}g.value=x}function d(g,x,_,v){if(!g.value)return!0;var y=g.x-e.x,b=g.y-e.y,A=v-x,S=y*y+b*b;if(A*A/f<S)return S<u&&(y===0&&(y=Rt(n),S+=y*y),b===0&&(b=Rt(n),S+=b*b),S<s&&(S=Math.sqrt(s*S)),e.vx+=y*g.value*r/S,e.vy+=b*g.value*r/S),!0;if(g.length||S>=u)return;(g.data!==e||g.next)&&(y===0&&(y=Rt(n),S+=y*y),b===0&&(b=Rt(n),S+=b*b),S<s&&(S=Math.sqrt(s*S)));do g.data!==e&&(A=o[g.data.index]*r/S,e.vx+=y*A,e.vy+=b*A);while(g=g.next)}return a.initialize=function(g,x){t=g,n=x,l()},a.strength=function(g){return arguments.length?(i=typeof g=="function"?g:wt(+g),l(),a):i},a.distanceMin=function(g){return arguments.length?(s=g*g,a):Math.sqrt(s)},a.distanceMax=function(g){return arguments.length?(u=g*g,a):Math.sqrt(u)},a.theta=function(g){return arguments.length?(f=g*g,a):Math.sqrt(f)},a}function Hl(t,e,n){var r,i=wt(.1),o,s;typeof t!="function"&&(t=wt(+t)),e==null&&(e=0),n==null&&(n=0);function u(a){for(var l=0,h=r.length;l<h;++l){var d=r[l],g=d.x-e||1e-6,x=d.y-n||1e-6,_=Math.sqrt(g*g+x*x),v=(s[l]-_)*o[l]*a/_;d.vx+=g*v,d.vy+=x*v}}function f(){if(r){var a,l=r.length;for(o=new Array(l),s=new Array(l),a=0;a<l;++a)s[a]=+t(r[a],a,r),o[a]=isNaN(s[a])?0:+i(r[a],a,r)}}return u.initialize=function(a){r=a,f()},u.strength=function(a){return arguments.length?(i=typeof a=="function"?a:wt(+a),f(),u):i},u.radius=function(a){return arguments.length?(t=typeof a=="function"?a:wt(+a),f(),u):t},u.x=function(a){return arguments.length?(e=+a,u):e},u.y=function(a){return arguments.length?(n=+a,u):n},u}const Jt=bt(),Pe=ie();function Xl(t){Pe.offset=Pe.nodes[t]??{x:0,y:0};const n=pi(t,2).flat(3),r=[...new Set(n.map(a=>a.id))].filter(a=>{var l;return["entity","predicate"].includes((l=Jt.data.nodes[a])==null?void 0:l.type)}),o=[...r.map(a=>{const l=n.filter(h=>h.id===a).map(({depth:h})=>h);return{id:a,depth:2-Math.max(...l)}}).map(({id:a,depth:l})=>({id:a,depth:l,...f(a)})),...Object.entries(Jt.nodeOccurances).map(a=>[{id:a[0],...f(a[0]),depth:2},{id:`${a[0]}-proxy`,...f(`${a[0]}-proxy`),proxy:!0,depth:1}]).flat()],s=[...Jt.data.edges.filter(a=>r.includes(a.nodes[0])&&r.includes(a.nodes[1])).map(a=>({source:a.nodes[0],target:a.nodes[1]})),...Object.entries(Jt.nodeOccurances).map(a=>[{source:t,target:`${a[0]}-proxy`},{source:`${a[0]}-proxy`,target:a[0]}]).flat()],u=Fl(o).force("link",Il(s).id(a=>a.id).distance(100)).force("collide",Tl().radius(a=>{var l;return((l=Jt.data.nodes[a.id])==null?void 0:l.type)==="graph"?160:50})).force("charge",Gl().strength(-5e3)).force("center",hl(0,0)).force("radial",Hl(a=>a.depth*200,0,0).strength(2)).stop();for(let a=0;a<1e3;a++)u.tick();return Object.fromEntries(o.filter(({proxy:a})=>!a).map(({id:a,x:l,y:h})=>[a,{x:l,y:h}]));function f(a){if(a===t)return{x:0,y:0};if(Pe.nodes[a]!=null)return Pe.nodes[a];const l=Math.random()*Math.PI*2;return{x:Math.cos(l)*250,y:Math.sin(l)*250}}}function pi(t,e=1){return[{id:t,depth:e},...Jt.data.edges.filter(n=>n.nodes.includes(t)).map(n=>{const r=n.nodes.find(i=>i!==t);return e===1?{id:r,depth:0}:pi(r,e-1)})]}const Hn=Tn("display",()=>{const t=Ft(),e=bt(),n=D(()=>{var a,l;return((a=e.node)==null?void 0:a.marker)==null?[]:(l=e.node)==null?void 0:l.marker.filter(h=>h.time<=t.time).sort((h,d)=>h.time-d.time)}),r=D(()=>{var a,l;return(l=(a=e.node)==null?void 0:a.marker)==null?void 0:l.find(h=>h.time===t.time)}),i=D(()=>n.value.reduce((a,l)=>({...a,...l.states}),{states:{}})),o=D(()=>{var a;return(a=n.value.findLast(l=>l.bounds!=null))==null?void 0:a.bounds});function s(a){return a.includes("hide")?"hide":a.every(l=>l==="highlight")?"highlight":"default"}function u(a){const l=a.map(h=>e.data.nodes[h].inheritDisplay?f(h):i.value[h]);return s(l)}function f(a){const l=e.data.edges.filter(h=>h.nodes.includes(a)).map(h=>{const d=h.nodes.find(g=>g!==a);return i.value[d]});return s(l)}return{markers:n,exactMarker:r,states:i,bounds:o,inheritStateFromNodes:u,inheritStateFromNeighbor:f}}),Ul=["onClick"],Vl={__name:"ContextMenuList",props:["context"],setup(t){return(e,n)=>(I(),at(Br,{class:"context-menu-list"},{default:rt(()=>[(I(!0),F(pe,null,Ge(t.context,(r,i)=>(I(),F("button",{key:i,onClick:r.action},Qe(r.label),9,Ul))),128))]),_:1}))}},sn=pt(Vl,[["__scopeId","data-v-5b0e52e5"]]),ql=Tn("connect",()=>{const t=bt(),e=nt(!1),n=nt({x:100,y:100}),r=nt(null),i=nt(null),o=nt(null),s=new AbortController;function u(a,l,h){e.value=!0,i.value=l,r.value=a,o.value=h,window.addEventListener("keydown",d=>{d.key==="Escape"&&(s.abort(),e.value=!1)},{signal:s.signal})}function f(a){s.abort(),e.value=!1,t.data.edges.push({nodes:[r.value,a],arrow:i.value,graph:o.value,id:crypto.randomUUID()})}return{connecting:e,offset:n,open:u,start:r,close:f}}),Yl=ie();function gi(t){const e=document.createRange(),n=t.value.childNodes;return e.setStartBefore(n[0]),e.setEndAfter(n[n.length-1]),`${e.getBoundingClientRect().width/Yl.transform.k}px`}const Kl={class:"text"},Wl={key:0},Ql={key:1,class:"class"},jl={__name:"GraphNodeEntity",props:{node:Object,id:String},setup(t,{expose:e}){const n=je(),r=t,i=bt(),o=nt(null),s=nt(null),u=D(()=>{var a;return(a=i.data.nodes[r.node.class])==null?void 0:a.label}),f=D(()=>n.params.id===r.id);return Je(()=>{s.value=!f.value&&gi(o)}),e({el:o}),(a,l)=>(I(),F("div",{class:Zt(["entity",{detail:f.value}]),ref_key:"el",ref:o,style:Ct({width:s.value})},[Z("span",Kl,[j(He,{text:t.node.label},null,8,["text"])]),u.value?(I(),F("br",Wl)):Bt("",!0),u.value?(I(),F("span",Ql,[j(He,{text:u.value},null,8,["text"])])):Bt("",!0)],6))}},Jl=pt(jl,[["__scopeId","data-v-f6b0a1e5"]]),tc={data(){return{count:0}},props:{node:Object},computed:{label(){return this.helperStore.localize(this.node.label??this.node.text)},...No(tn)}},ec={class:"entity",ref:"el"},nc={class:"text measure-width"};function rc(t,e,n,r,i,o){return I(),F("div",ec,[Z("span",nc,Qe(o.label),1)],512)}const ic=pt(tc,[["render",rc],["__scopeId","data-v-b64e33c2"]]),oc={class:"icon",width:"21",height:"21",viewBox:"0 0 21 21",xmlns:"http://www.w3.org/2000/svg"};function ac(t,e){return I(),F("svg",oc,e[0]||(e[0]=[Z("path",{d:"M10.5,0 C16.2989899,0 21,4.70101013 21,10.5 C21,16.2989899 16.2989899,21 10.5,21 C4.70101013,21 0,16.2989899 0,10.5 C0,4.70101013 4.70101013,0 10.5,0 Z M8,6.5 L8,14.5 L14,10.5 L8,6.5 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const sc={name:"base-IconPlay",render:ac},uc={class:"icon",width:"21",height:"21",viewBox:"0 0 21 21",xmlns:"http://www.w3.org/2000/svg"};function lc(t,e){return I(),F("svg",uc,e[0]||(e[0]=[Z("path",{d:"M10.5,21 C16.2989899,21 21,16.2989899 21,10.5 C21,4.70101013 16.2989899,0 10.5,0 C4.70101013,0 0,4.70101013 0,10.5 C0,16.2989899 4.70101013,21 10.5,21 Z M10.5,14 C12.4329966,14 14,12.4329966 14,10.5 C14,8.56700338 12.4329966,7 10.5,7 C8.56700338,7 7,8.56700338 7,10.5 C7,12.4329966 8.56700338,14 10.5,14 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const cc={name:"base-IconPlaying",render:lc},fc={__name:"IconPlaying",setup(t){return(e,n)=>(I(),at(P(cc)))}},hc=pt(fc,[["__scopeId","data-v-aea62c91"]]),dc=["src"],pc={__name:"GraphNodeGraph",props:{node:Object,id:String},setup(t,{expose:e}){const n=t,r=tn(),i=Ft(),o=nt(null),s=nt(null),u=D(()=>r.localize(n.node.label)),f=D(()=>r.getMediaUrl(n.node.image)),a=D(()=>({"--graph-accent":`var(--${n.node.color})`})),l=D(()=>i.graphId===n.id&&i.playing),h=D(()=>i.next===n.id),d=D(()=>{if(!h.value)return;const g=i.duration-i.time;if(!(g>5))return{"--autoplay":`${100-g*20}%`}});return e({el:s}),(g,x)=>(I(),F("div",{class:"entity",ref_key:"el",ref:s,style:Ct({...a.value,...d.value})},[Z("img",{src:f.value,draggable:"false"},null,8,dc),Z("div",{class:"text",ref_key:"textElement",ref:o},[ko(Qe(u.value)+" ",1),l.value?(I(),at(hc,{key:1})):(I(),at(P(sc),{key:0}))],512)],4))}},gc=pt(pc,[["__scopeId","data-v-59b07eab"]]),vc={class:"image"},yc=["srcset"],mc={__name:"GraphNodeImage",props:{node:Object},setup(t,{expose:e}){const n=t,r=tn(),i=nt(null),o=D(()=>r.getMediaUrl(n.node.file));return e({el:i}),(s,u)=>(I(),F("div",vc,[Z("img",{ref_key:"el",ref:i,srcset:`${o.value} 2x`,draggable:"false"},null,8,yc)]))}},_c=pt(mc,[["__scopeId","data-v-180daf36"]]),xc={class:"text measure-width"},wc={__name:"GraphNodeNote",props:{node:Object,occurances:Array},setup(t,{expose:e}){const n=t,r=tn(),i=nt(null),o=nt(null),s=D(()=>r.localize(n.node.text)),u=D(()=>{if(!(n.occurances.length!==1||n.occurances[0].color==null))return{"--graph-accent":`var(--${n.occurances[0].color})`}});return Je(()=>{o.value=gi(i)}),e({el:i}),(f,a)=>(I(),F("div",{class:"note",ref_key:"el",ref:i,style:Ct({...u.value,width:o.value})},[Z("span",xc,Qe(s.value),1)],4))}},Cc=pt(wc,[["__scopeId","data-v-6cb9480d"]]),Dr={default:ic,entity:Jl,graph:gc,image:_c,note:Cc};function bc(t){return Dr[t]??Dr.default}const Lc={__name:"GraphNode",props:{id:String,view:String,position:Object,graph:[String,Boolean]},setup(t){const e=t,n=Zr(),r=bt(),i=ie(),o=Hn(),s=En(),u=Ft(),f=_e(),a=xe(),l=Fr(),h=ql(),d=en(),g=nt(null),x=D(()=>r.data.nodes[e.id]),_=D(()=>({transform:`translate(${v.value.x+i.offset.x}px, ${v.value.y+i.offset.y}px) translate(-50%, -50%)`})),v=D(()=>e.position??r.data.nodes[e.graph].allocations[e.id]),y=D(()=>bc(x.value.type)),b=D(()=>g.value.el??g.value.$el),A=D(()=>r.graphs.filter(T=>Object.prototype.hasOwnProperty.call(T.allocations??{},e.id))),S=D(()=>x.value.inheritDisplay?o.inheritStateFromNeighbor(e.id):o.states[e.id]),R=D(()=>{var T,V,m,$;return($=(m=(V=(T=r.data.nodes)==null?void 0:T[e.graph])==null?void 0:V.allocations)==null?void 0:m[e.id])==null?void 0:$.locked}),G=new ResizeObserver(T=>{for(const V of T)V.contentRect&&(i.nodes[e.id]={width:V.contentRect.width,height:V.contentRect.height,x:v.value.x,y:v.value.y})});function Y(T){!f.edit||T.metaKey?n.push({name:"graph",params:{type:x.value.type,id:e.id}}):h.connecting?h.close(e.id):d.mode==="add-edge"?h.open(e.id,"",e.graph):d.mode==="display-blur"?d.setDisplay(e.id,"hide",e.graph):d.mode==="display-default"?d.setDisplay(e.id,"default",e.graph):d.mode==="display-highlight"?d.setDisplay(e.id,"highlight",e.graph):d.mode==="display-unset"&&d.setDisplay(e.id,null,e.graph)}function q(){f.edit&&l.open(e.id,"node")}function K(T){if(!f.edit||e.view!=="diagram"||T.button!==0||R.value)return;T.stopPropagation();const V={x:T.x,y:T.y},m={x:r.data.nodes[e.graph].allocations[e.id].x,y:r.data.nodes[e.graph].allocations[e.id].y},$=new AbortController;window.addEventListener("mousemove",N=>{const z={x:(N.x-V.x)/i.transform.k,y:(N.y-V.y)/i.transform.k},C=N.shiftKey?.5:20,M=Math.round((m.x+z.x)/C)*C,E=Math.round((m.y+z.y)/C)*C;r.data.nodes[e.graph].allocations[e.id].x=M,r.data.nodes[e.graph].allocations[e.id].y=E},{signal:$.signal}),window.addEventListener("mouseup",()=>{L()},{once:!0,signal:$.signal}),window.addEventListener("keydown",N=>{N.key==="Escape"&&L()},{signal:$.signal});function L(){$.abort()}}function U(T,V){return T?[V]:[]}function O(T){f.edit&&(T.preventDefault(),T.stopPropagation(),a.open(sn,[...U(e.view==="diagram",{label:"delete",action:()=>{r.deleteNode(e.id,e.graph)}}),{label:"edit",action:()=>{l.open(e.id,"node")}},...U(e.view==="diagram",{label:"",action:()=>{e.view==="diagram"&&h.open(e.id,"",e.graph)}}),...U(e.view==="diagram",{label:R.value?"unlock":"lock",action:()=>{r.data.nodes[e.graph].allocations[e.id].locked=!R.value}}),{label:"log",action:()=>{console.log(e.id,r.data.nodes[e.graph].allocations[e.id])}}],{x:T.x,y:T.y}))}return fe(()=>[v.value.y,v.value.x],()=>{i.nodes[e.id]={...i.nodes[e.id],x:v.value.x,y:v.value.y}}),Je(()=>{G.observe(b.value)}),Gr(()=>{b.value!=null&&G.unobserve(b.value),delete i.nodes[e.id]}),(T,V)=>{var m,$;return I(),at(To(y.value),{ref_key:"componentRef",ref:g,id:t.id,class:Zt(["node",[S.value,t.view,`mode-${P(d).mode}`,{"user-active":!P(s).inactivityShort||!P(u).playing,edit:P(f).edit,locked:R.value,exact:($=(m=P(o).exactMarker)==null?void 0:m.states)==null?void 0:$.hasOwnProperty(t.id)}]]),style:Ct(_.value),node:x.value,occurances:A.value,onClick:Y,onDblclick:ee(q,["stop"]),onMousedown:K,onContextmenu:O},null,40,["id","class","style","node","occurances"])}}},Mc=pt(Lc,[["__scopeId","data-v-ecd5a28a"]]);function Pr(t,e,n,r,i,o,s,u,f){const a=i+s,l=o+u,h=i+f,d=o+f,g=i+s-f,x=o+u-f,_=[[i,x,i,d,i,o],[h,o,g,o,a,o],[a,d,a,x,a,l],[g,l,h,l,i,l]],v=[[h,d,Math.PI,Math.PI*1.5],[g,d,Math.PI*1.5,Math.PI*2],[g,x,0,Math.PI*.5],[h,x,Math.PI*.5,Math.PI]];let y=[];return _.forEach((b,A)=>{const[S,R,G,Y]=b,[q,K,U,O]=v[A];Nc(q,K,f,t,e,n,r).filter(V=>{const m=$c(Ac(q,K,V[0],V[1]));return m>U&&m<O}).forEach(V=>y.push({point:V,anchor:A*2+1}));const T=Sc(t,e,n,r,S,R,G,Y);T&&y.push({point:T,anchor:A*2})}),y}function Sc(t,e,n,r,i,o,s,u){const f=(u-o)*(n-t)-(s-i)*(r-e),a=(s-i)*(e-o)-(u-o)*(t-i),l=(n-t)*(e-o)-(r-e)*(t-i);if(f===0)return void 0;const h=a/f,d=l/f;if(h>=0&&h<=1&&d>=0&&d<=1)return[t+h*(n-t),e+h*(r-e)]}function $c(t){return t-Math.PI*2*Math.floor(t/(Math.PI*2))}function Ac(t,e,n,r){return Math.atan2(r-e,n-t)}function Nc(t,e,n,r,i,o,s){var u,f,a,l,h,d,g,x,_=[o-r,s-i],v=[r-t,i-e];return u=_[0]*v[0]+_[1]*v[1],f=2*(_[0]*_[0]+_[1]*_[1]),u*=-2,a=Math.sqrt(u*u-2*f*(v[0]*v[0]+v[1]*v[1]-n*n)),isNaN(a)?[]:(l=(u-a)/f,h=(u+a)/f,g=[],x=[],d=[],l<=1&&l>=0&&(g[0]=r+_[0]*l,g[1]=i+_[1]*l,d[0]=g),h<=1&&h>=0&&(x[0]=r+_[0]*h,x[1]=i+_[1]*h,d[d.length]=x),d)}var We={exports:{}};We.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",i=1,o=2,s=9007199254740991,u="[object Arguments]",f="[object Array]",a="[object AsyncFunction]",l="[object Boolean]",h="[object Date]",d="[object Error]",g="[object Function]",x="[object GeneratorFunction]",_="[object Map]",v="[object Number]",y="[object Null]",b="[object Object]",A="[object Promise]",S="[object Proxy]",R="[object RegExp]",G="[object Set]",Y="[object String]",q="[object Symbol]",K="[object Undefined]",U="[object WeakMap]",O="[object ArrayBuffer]",T="[object DataView]",V="[object Float32Array]",m="[object Float64Array]",$="[object Int8Array]",L="[object Int16Array]",N="[object Int32Array]",z="[object Uint8Array]",C="[object Uint8ClampedArray]",M="[object Uint16Array]",E="[object Uint32Array]",B=/[\\^$.*+?()[\]{}|]/g,W=/^\[object .+?Constructor\]$/,Q=/^(?:0|[1-9]\d*)$/,H={};H[V]=H[m]=H[$]=H[L]=H[N]=H[z]=H[C]=H[M]=H[E]=!0,H[u]=H[f]=H[O]=H[l]=H[T]=H[h]=H[d]=H[g]=H[_]=H[v]=H[b]=H[R]=H[G]=H[Y]=H[U]=!1;var ht=typeof Te=="object"&&Te&&Te.Object===Object&&Te,lt=typeof self=="object"&&self&&self.Object===Object&&self,it=ht||lt||Function("return this")(),Qt=e&&!e.nodeType&&e,Xn=Qt&&!0&&t&&!t.nodeType&&t,Un=Xn&&Xn.exports===Qt,un=Un&&ht.process,Vn=function(){try{return un&&un.binding&&un.binding("util")}catch{}}(),qn=Vn&&Vn.isTypedArray;function mi(c,p){for(var w=-1,k=c==null?0:c.length,J=0,X=[];++w<k;){var et=c[w];p(et,w,c)&&(X[J++]=et)}return X}function _i(c,p){for(var w=-1,k=p.length,J=c.length;++w<k;)c[J+w]=p[w];return c}function xi(c,p){for(var w=-1,k=c==null?0:c.length;++w<k;)if(p(c[w],w,c))return!0;return!1}function wi(c,p){for(var w=-1,k=Array(c);++w<c;)k[w]=p(w);return k}function Ci(c){return function(p){return c(p)}}function bi(c,p){return c.has(p)}function Li(c,p){return c==null?void 0:c[p]}function Mi(c){var p=-1,w=Array(c.size);return c.forEach(function(k,J){w[++p]=[J,k]}),w}function Si(c,p){return function(w){return c(p(w))}}function $i(c){var p=-1,w=Array(c.size);return c.forEach(function(k){w[++p]=k}),w}var Ai=Array.prototype,Ni=Function.prototype,be=Object.prototype,ln=it["__core-js_shared__"],Yn=Ni.toString,Mt=be.hasOwnProperty,Kn=function(){var c=/[^.]+$/.exec(ln&&ln.keys&&ln.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Wn=be.toString,ki=RegExp("^"+Yn.call(Mt).replace(B,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qn=Un?it.Buffer:void 0,Le=it.Symbol,jn=it.Uint8Array,Jn=be.propertyIsEnumerable,Ti=Ai.splice,Gt=Le?Le.toStringTag:void 0,tr=Object.getOwnPropertySymbols,Ei=Qn?Qn.isBuffer:void 0,Ii=Si(Object.keys,Object),cn=jt(it,"DataView"),oe=jt(it,"Map"),fn=jt(it,"Promise"),hn=jt(it,"Set"),dn=jt(it,"WeakMap"),ae=jt(Object,"create"),zi=Ut(cn),Di=Ut(oe),Pi=Ut(fn),Oi=Ut(hn),Ri=Ut(dn),er=Le?Le.prototype:void 0,pn=er?er.valueOf:void 0;function Ht(c){var p=-1,w=c==null?0:c.length;for(this.clear();++p<w;){var k=c[p];this.set(k[0],k[1])}}function Bi(){this.__data__=ae?ae(null):{},this.size=0}function Zi(c){var p=this.has(c)&&delete this.__data__[c];return this.size-=p?1:0,p}function Fi(c){var p=this.__data__;if(ae){var w=p[c];return w===r?void 0:w}return Mt.call(p,c)?p[c]:void 0}function Gi(c){var p=this.__data__;return ae?p[c]!==void 0:Mt.call(p,c)}function Hi(c,p){var w=this.__data__;return this.size+=this.has(c)?0:1,w[c]=ae&&p===void 0?r:p,this}Ht.prototype.clear=Bi,Ht.prototype.delete=Zi,Ht.prototype.get=Fi,Ht.prototype.has=Gi,Ht.prototype.set=Hi;function At(c){var p=-1,w=c==null?0:c.length;for(this.clear();++p<w;){var k=c[p];this.set(k[0],k[1])}}function Xi(){this.__data__=[],this.size=0}function Ui(c){var p=this.__data__,w=Se(p,c);if(w<0)return!1;var k=p.length-1;return w==k?p.pop():Ti.call(p,w,1),--this.size,!0}function Vi(c){var p=this.__data__,w=Se(p,c);return w<0?void 0:p[w][1]}function qi(c){return Se(this.__data__,c)>-1}function Yi(c,p){var w=this.__data__,k=Se(w,c);return k<0?(++this.size,w.push([c,p])):w[k][1]=p,this}At.prototype.clear=Xi,At.prototype.delete=Ui,At.prototype.get=Vi,At.prototype.has=qi,At.prototype.set=Yi;function Xt(c){var p=-1,w=c==null?0:c.length;for(this.clear();++p<w;){var k=c[p];this.set(k[0],k[1])}}function Ki(){this.size=0,this.__data__={hash:new Ht,map:new(oe||At),string:new Ht}}function Wi(c){var p=$e(this,c).delete(c);return this.size-=p?1:0,p}function Qi(c){return $e(this,c).get(c)}function ji(c){return $e(this,c).has(c)}function Ji(c,p){var w=$e(this,c),k=w.size;return w.set(c,p),this.size+=w.size==k?0:1,this}Xt.prototype.clear=Ki,Xt.prototype.delete=Wi,Xt.prototype.get=Qi,Xt.prototype.has=ji,Xt.prototype.set=Ji;function Me(c){var p=-1,w=c==null?0:c.length;for(this.__data__=new Xt;++p<w;)this.add(c[p])}function to(c){return this.__data__.set(c,r),this}function eo(c){return this.__data__.has(c)}Me.prototype.add=Me.prototype.push=to,Me.prototype.has=eo;function It(c){var p=this.__data__=new At(c);this.size=p.size}function no(){this.__data__=new At,this.size=0}function ro(c){var p=this.__data__,w=p.delete(c);return this.size=p.size,w}function io(c){return this.__data__.get(c)}function oo(c){return this.__data__.has(c)}function ao(c,p){var w=this.__data__;if(w instanceof At){var k=w.__data__;if(!oe||k.length<n-1)return k.push([c,p]),this.size=++w.size,this;w=this.__data__=new Xt(k)}return w.set(c,p),this.size=w.size,this}It.prototype.clear=no,It.prototype.delete=ro,It.prototype.get=io,It.prototype.has=oo,It.prototype.set=ao;function so(c,p){var w=Ae(c),k=!w&&bo(c),J=!w&&!k&&gn(c),X=!w&&!k&&!J&&cr(c),et=w||k||J||X,ot=et?wi(c.length,String):[],st=ot.length;for(var tt in c)Mt.call(c,tt)&&!(et&&(tt=="length"||J&&(tt=="offset"||tt=="parent")||X&&(tt=="buffer"||tt=="byteLength"||tt=="byteOffset")||mo(tt,st)))&&ot.push(tt);return ot}function Se(c,p){for(var w=c.length;w--;)if(ar(c[w][0],p))return w;return-1}function uo(c,p,w){var k=p(c);return Ae(c)?k:_i(k,w(c))}function se(c){return c==null?c===void 0?K:y:Gt&&Gt in Object(c)?vo(c):Co(c)}function nr(c){return ue(c)&&se(c)==u}function rr(c,p,w,k,J){return c===p?!0:c==null||p==null||!ue(c)&&!ue(p)?c!==c&&p!==p:lo(c,p,w,k,rr,J)}function lo(c,p,w,k,J,X){var et=Ae(c),ot=Ae(p),st=et?f:zt(c),tt=ot?f:zt(p);st=st==u?b:st,tt=tt==u?b:tt;var gt=st==b,_t=tt==b,ut=st==tt;if(ut&&gn(c)){if(!gn(p))return!1;et=!0,gt=!1}if(ut&&!gt)return X||(X=new It),et||cr(c)?ir(c,p,w,k,J,X):po(c,p,st,w,k,J,X);if(!(w&i)){var yt=gt&&Mt.call(c,"__wrapped__"),mt=_t&&Mt.call(p,"__wrapped__");if(yt||mt){var Dt=yt?c.value():c,Nt=mt?p.value():p;return X||(X=new It),J(Dt,Nt,w,k,X)}}return ut?(X||(X=new It),go(c,p,w,k,J,X)):!1}function co(c){if(!lr(c)||xo(c))return!1;var p=sr(c)?ki:W;return p.test(Ut(c))}function fo(c){return ue(c)&&ur(c.length)&&!!H[se(c)]}function ho(c){if(!wo(c))return Ii(c);var p=[];for(var w in Object(c))Mt.call(c,w)&&w!="constructor"&&p.push(w);return p}function ir(c,p,w,k,J,X){var et=w&i,ot=c.length,st=p.length;if(ot!=st&&!(et&&st>ot))return!1;var tt=X.get(c);if(tt&&X.get(p))return tt==p;var gt=-1,_t=!0,ut=w&o?new Me:void 0;for(X.set(c,p),X.set(p,c);++gt<ot;){var yt=c[gt],mt=p[gt];if(k)var Dt=et?k(mt,yt,gt,p,c,X):k(yt,mt,gt,c,p,X);if(Dt!==void 0){if(Dt)continue;_t=!1;break}if(ut){if(!xi(p,function(Nt,Vt){if(!bi(ut,Vt)&&(yt===Nt||J(yt,Nt,w,k,X)))return ut.push(Vt)})){_t=!1;break}}else if(!(yt===mt||J(yt,mt,w,k,X))){_t=!1;break}}return X.delete(c),X.delete(p),_t}function po(c,p,w,k,J,X,et){switch(w){case T:if(c.byteLength!=p.byteLength||c.byteOffset!=p.byteOffset)return!1;c=c.buffer,p=p.buffer;case O:return!(c.byteLength!=p.byteLength||!X(new jn(c),new jn(p)));case l:case h:case v:return ar(+c,+p);case d:return c.name==p.name&&c.message==p.message;case R:case Y:return c==p+"";case _:var ot=Mi;case G:var st=k&i;if(ot||(ot=$i),c.size!=p.size&&!st)return!1;var tt=et.get(c);if(tt)return tt==p;k|=o,et.set(c,p);var gt=ir(ot(c),ot(p),k,J,X,et);return et.delete(c),gt;case q:if(pn)return pn.call(c)==pn.call(p)}return!1}function go(c,p,w,k,J,X){var et=w&i,ot=or(c),st=ot.length,tt=or(p),gt=tt.length;if(st!=gt&&!et)return!1;for(var _t=st;_t--;){var ut=ot[_t];if(!(et?ut in p:Mt.call(p,ut)))return!1}var yt=X.get(c);if(yt&&X.get(p))return yt==p;var mt=!0;X.set(c,p),X.set(p,c);for(var Dt=et;++_t<st;){ut=ot[_t];var Nt=c[ut],Vt=p[ut];if(k)var fr=et?k(Vt,Nt,ut,p,c,X):k(Nt,Vt,ut,c,p,X);if(!(fr===void 0?Nt===Vt||J(Nt,Vt,w,k,X):fr)){mt=!1;break}Dt||(Dt=ut=="constructor")}if(mt&&!Dt){var Ne=c.constructor,ke=p.constructor;Ne!=ke&&"constructor"in c&&"constructor"in p&&!(typeof Ne=="function"&&Ne instanceof Ne&&typeof ke=="function"&&ke instanceof ke)&&(mt=!1)}return X.delete(c),X.delete(p),mt}function or(c){return uo(c,So,yo)}function $e(c,p){var w=c.__data__;return _o(p)?w[typeof p=="string"?"string":"hash"]:w.map}function jt(c,p){var w=Li(c,p);return co(w)?w:void 0}function vo(c){var p=Mt.call(c,Gt),w=c[Gt];try{c[Gt]=void 0;var k=!0}catch{}var J=Wn.call(c);return k&&(p?c[Gt]=w:delete c[Gt]),J}var yo=tr?function(c){return c==null?[]:(c=Object(c),mi(tr(c),function(p){return Jn.call(c,p)}))}:$o,zt=se;(cn&&zt(new cn(new ArrayBuffer(1)))!=T||oe&&zt(new oe)!=_||fn&&zt(fn.resolve())!=A||hn&&zt(new hn)!=G||dn&&zt(new dn)!=U)&&(zt=function(c){var p=se(c),w=p==b?c.constructor:void 0,k=w?Ut(w):"";if(k)switch(k){case zi:return T;case Di:return _;case Pi:return A;case Oi:return G;case Ri:return U}return p});function mo(c,p){return p=p??s,!!p&&(typeof c=="number"||Q.test(c))&&c>-1&&c%1==0&&c<p}function _o(c){var p=typeof c;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?c!=="__proto__":c===null}function xo(c){return!!Kn&&Kn in c}function wo(c){var p=c&&c.constructor,w=typeof p=="function"&&p.prototype||be;return c===w}function Co(c){return Wn.call(c)}function Ut(c){if(c!=null){try{return Yn.call(c)}catch{}try{return c+""}catch{}}return""}function ar(c,p){return c===p||c!==c&&p!==p}var bo=nr(function(){return arguments}())?nr:function(c){return ue(c)&&Mt.call(c,"callee")&&!Jn.call(c,"callee")},Ae=Array.isArray;function Lo(c){return c!=null&&ur(c.length)&&!sr(c)}var gn=Ei||Ao;function Mo(c,p){return rr(c,p)}function sr(c){if(!lr(c))return!1;var p=se(c);return p==g||p==x||p==a||p==S}function ur(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=s}function lr(c){var p=typeof c;return c!=null&&(p=="object"||p=="function")}function ue(c){return c!=null&&typeof c=="object"}var cr=qn?Ci(qn):fo;function So(c){return Lo(c)?so(c):ho(c)}function $o(){return[]}function Ao(){return!1}t.exports=Mo})(We,We.exports);We.exports;const xn=+getComputedStyle(document.documentElement).getPropertyValue("--transition").replace(/(.+)ms/,(t,e)=>e).replace(/(.+)s/,(t,e)=>e*1e3),kn=+getComputedStyle(document.documentElement).getPropertyValue("--spacing").replace(/px$/,""),kc=["id"],Tc=["id"],Ec=["d"],Ic=["d","marker-end","marker-start"],zc=["x","y"],Dc=["x","y"],Pc={__name:"GraphEdge",props:{edge:Object,view:String},setup(t){const e=ie(),n=Hn(),r=En(),i=Ft(),o=bt(),s=_e(),u=Fr(),f=xe(),a=je(),l=t,h=D(()=>a.params.type!=="graph"),d=D(()=>e.nodes[l.edge.nodes[0]]),g=D(()=>e.nodes[l.edge.nodes[1]]),x=D(()=>{var T;const O=(T=o.data.nodes[l.edge.graph])==null?void 0:T.color;return{"--graph-accent":O?`var(--${O})`:null}}),_=D(()=>n.inheritStateFromNodes(l.edge.nodes)),v=D(()=>{if(d.value==null||g.value==null)return;const O=kn,T=kn,V=d.value.width+O,m=d.value.height+O,$=g.value.width+O,L=g.value.height+O,N=Pr(d.value.x,d.value.y,g.value.x,g.value.y,d.value.x-V/2,d.value.y-m/2,V,m,Math.min(T,m/2-.1))[0],z=Pr(d.value.x,d.value.y,g.value.x,g.value.y,g.value.x-$/2,g.value.y-L/2,$,L,Math.min(T,L/2-.1))[0];if(N==null||z==null)return;const C={x:N.point[0]+e.offset.x,y:N.point[1]+e.offset.y},M={x:z.point[0]+e.offset.x,y:z.point[1]+e.offset.y};if(h.value)return[C,M];const E=["","","","","","","",""];console.log(E[N.anchor],E[(z.anchor+4)%8]);const B=[{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}];return[C,{x:C.x+B[N.anchor].x*100,y:C.y+B[N.anchor].y*100},{x:M.x+B[z.anchor].x*100,y:M.y+B[z.anchor].y*100},M]}),y=D(()=>{if(v.value!=null)return h.value?`M${v.value.map(O=>`${O.x},${O.y}`).join(" L")}`:`M${v.value.map((O,T)=>`${T===1?"C":""}${O.x},${O.y}`).join(" ")}`}),b=D(()=>v.value==null?[]:{x:(v.value[0].x+v.value[v.value.length-1].x)/2,y:(v.value[0].y+v.value[v.value.length-1].y)/2}),A=D(()=>l.edge.nodes.join("-")),S=D(()=>`url('#marker-${A.value}')`),R=D(()=>`url('#marker-${A.value}-alt')`),G=D(()=>(l.edge.arrow===""||l.edge.arrow==="")&&S.value),Y=D(()=>(l.edge.arrow===""||l.edge.arrow==="")&&R.value);function q(O){if(!O.metaKey)return;O.stopPropagation(),O.preventDefault();const T=[null,"","",""],V=Math.max(T.indexOf(l.edge.arrow),0);o.data.edges.find(m=>m.id===l.edge.id).arrow=T[(V+1)%T.length]}function K(O){!s.edit||O.metaKey||u.open(l.edge.id,"edge")}function U(O){s.edit&&(O.preventDefault(),O.stopPropagation(),f.open(sn,[{label:"delete",action:()=>{o.data.edges=o.data.edges.filter(T=>T.id!==l.edge.id)}},{label:"edit",action:()=>{u.open(l.edge.id,"edge")}}],{x:O.x,y:O.y}))}return(O,T)=>(I(),F("g",{class:Zt(["edge",[_.value,t.view,{"user-active":!P(r).inactivityShort||!P(i).playing}]]),style:Ct(x.value)},[Z("defs",null,[Z("marker",{id:`marker-${A.value}`,markerWidth:"10",markerHeight:"20",refX:"10",refY:"10",orient:"auto"},T[0]||(T[0]=[Z("path",{d:"M2,6.5 L10,10 L2,13.5"},null,-1)]),8,kc),Z("marker",{id:`marker-${A.value}-alt`,markerWidth:"10",markerHeight:"20",refX:"00",refY:"10",orient:"auto"},T[1]||(T[1]=[Z("path",{d:"M8,6.5 L0,10 L8,13.5"},null,-1)]),8,Tc)]),P(s).edit?(I(),F("path",{key:0,class:"edit",d:y.value,onDblclick:ee(K,["stop"]),onContextmenu:U,onClick:q},null,40,Ec)):Bt("",!0),Z("path",{d:y.value,"marker-end":G.value,"marker-start":Y.value},null,8,Ic),Z("text",{class:Zt(["shadow",{edit:P(s).edit}]),x:b.value.x,y:b.value.y,onDblclick:ee(K,["stop"]),onContextmenu:U,onClick:q},[j(He,{text:t.edge.label},null,8,["text"])],42,zc),Z("text",{x:b.value.x,y:b.value.y},[j(He,{text:t.edge.label},null,8,["text"])],8,Dc)],6))}},Oc=pt(Pc,[["__scopeId","data-v-1b0c7a00"]]),Oe={__name:"ContextMenuSearch",props:{context:{type:Object,default:()=>({nodeType:"entity"})}},setup(t){const e=bt(),n=xe(),r=ie();function i(o){e.data.nodes[e.nodeId].allocations==null&&(e.data.nodes[e.nodeId].allocations={}),e.data.nodes[e.nodeId].allocations[o]={x:(n.offset.x-r.transform.x)/r.transform.k,y:(n.offset.y-r.transform.y)/r.transform.k}}return(o,s)=>(I(),at(Eo,{onSelectItem:i,context:t.context},null,8,["context"]))}},Rc=["d"],Bc={__name:"TheGraph",setup(t){const e=je(),n=Zr(),r=bt();Io();const i=Hn(),o=En(),s=Ft(),u=ie(),f=_e(),a=xe(),l=en(),h=nt([]),d=nt(null),g=nt(null),x=nt(null),_=nt(null),v=D(()=>e.params.id),y=D(()=>r.data.nodes[v.value]??{}),b=D(()=>e.params.type==="graph"?"diagram":"network"),A=D(()=>`translate(${u.transform.x}px, ${u.transform.y}px) scale(${u.transform.k})`),S=D(()=>{if(h.value==null)return;if(i.bounds!=null)return{x1:i.bounds.x1+u.offset.x,y1:i.bounds.y1+u.offset.y,x2:i.bounds.x2+u.offset.x,y2:i.bounds.y2+u.offset.y};const C=Object.values(h.value),M=C.map(({x:Q})=>Q),E=C.map(({y:Q})=>Q),B=200,W=100;return{x1:Math.min(...M)-B+u.offset.x,y1:Math.min(...E)-W+u.offset.y,x2:Math.max(...M)+B+u.offset.x,y2:Math.max(...E)+W+u.offset.y}}),R=D(()=>{const C=Object.keys(h.value??{});return r.data.edges.filter(M=>C.includes(M.nodes[0])&&C.includes(M.nodes[1])&&(M.graph===v.value||y.value.type!=="graph"))}),G=D(()=>Object.keys(h.value??{}).sort()),Y=D(()=>{if(y.value.color!=null)return{"--graph-accent":`var(--${y.value.color})`}}),q=D(()=>{var W;if((((W=i.exactMarker)==null?void 0:W.bounds)==null&&_.value)==null)return;const{x1:C,y1:M,x2:E,y2:B}=_.value||i.exactMarker.bounds;return`M${C},${M} L${E},${M} L${E},${B} L${C},${B} Z`});fe(y,()=>K(xn)),fe(S,()=>{o.inactivityShort&&O(S.value,xn)}),fe(()=>o.inactivityShort,()=>{s.playing&&O(S.value,xn)}),fe(()=>o.inactivityLong,()=>{s.playing&&e.name==="graph"&&e.params.type!=="graph"&&s.graphId!=null&&n.push({name:"graph",params:{type:"graph",id:s.graphId}})}),Je(()=>{g.value=Ot(d.value),x.value=fl().scaleExtent([.1,1]).on("zoom",C=>{u.transform=C.transform}).filter(C=>{if(l.mode!=="display-frame")return zo(()=>o.registerActivity()),C.button===0&&!a.show}),g.value.call(x.value),K(0),T.observe(d.value)}),Gr(()=>{d.value!=null&&T.unobserve(d.value)});function K(C){h.value=e.params.type==="graph"?U(y.value.allocations):Xl(v.value),O(S.value,C)}function U(C){return Object.fromEntries(Object.entries(C??{}).map(M=>[M[0],{...M[1]}]))}function O(C,M=0){if(C==null)return;const E={x:C.x2-C.x1,y:C.y2-C.y1},B=d.value.getBoundingClientRect(),W=B.width/E.x,Q=(B.height-kn*2.7)/E.y,H=Math.min(W,Q),ht=C.x1+E.x/2,lt=C.y1+E.y/2;g.value.transition().duration(M).call(x.value.transform,Zn.translate(B.width/2,B.height/2).scale(H).translate(-ht,-lt))}const T=new ResizeObserver(C=>{for(const M of C)M.contentRect&&O(S.value,0)});function V(C){!f.edit||b.value!=="diagram"||(C.preventDefault(),a.open(sn,[{label:"add",action:M=>{M.stopPropagation(),a.open(Oe)}},{label:"log",action:()=>{console.log(u.transform,a.offset)}}],{x:C.x,y:C.y}))}function m(C){if(!(!f.edit||b.value!=="diagram"))switch(["add-entity","add-story","add-image"].includes(l.mode)&&C.stopPropagation(),l.mode){case"add-entity":a.open(Oe,{nodeType:"entity"},{x:C.x,y:C.y}),l.resetMode();break;case"add-story":a.open(Oe,{nodeType:"graph"},{x:C.x,y:C.y}),l.resetMode();break;case"add-image":a.open(Oe,{nodeType:"image"},{x:C.x,y:C.y}),l.resetMode();break}}function $(C){if(l.mode==="display-frame"){C.preventDefault(),C.stopPropagation();const M=z(C);_.value={x1:M.x,y1:M.y,x2:M.x,y2:M.y};const E=new AbortController,B=function(){console.log("reset"),E.abort(),_.value=null};window.addEventListener("keydown",W=>{W.key==="Escape"&&B()},{signal:E.signal}),window.addEventListener("mousemove",W=>{const{x:Q,y:H}=z(W);_.value.x2=Q,_.value.y2=H},{signal:E.signal}),window.addEventListener("mouseup",()=>{l.setBounds(_.value,v.value),B(),l.resetMode()},{signal:E.signal})}}function L(C){if(C.preventDefault(),!f.edit||b.value!=="diagram")return;const M=dr(C.dataTransfer.getData("text/uri-list")),E=r.nodes.find(W=>W.file===dr(M));if(E!=null)return N(E.id,C.x,C.y);if(/(.png|.jpe?g|.gif|.webp)$/i.test(M)){const W=crypto.randomUUID(),Q={type:"image",file:M,label:{universal:M.replace(/[^:]*:\/?\/?/,"").replace(/\.[^.]+$/,"")}};r.data.nodes[W]=Q,N(W,C.x,C.y)}}function N(C,M,E){r.data.nodes[r.nodeId].allocations[C]=z({x:M,y:E})}function z(C){return{x:(C.x-u.transform.x)/u.transform.k,y:(C.y-u.transform.y)/u.transform.k}}return(C,M)=>(I(),F(pe,null,[Z("main",{class:Zt(["graph",[`mode-${P(l).mode}`,{initializing:P(e).meta.initializeView}]]),ref_key:"zoomElement",ref:d,style:Ct(Y.value),onContextmenu:V,onClick:m,onMousedown:$,onDrop:L,onDragover:M[0]||(M[0]=ee(()=>{},["prevent"])),onDragenter:M[1]||(M[1]=ee(()=>{},["prevent"]))},[Z("div",{class:"nodes",style:Ct({transform:A.value})},[j(hr,{name:"nodes"},{default:rt(()=>[(I(!0),F(pe,null,Ge(G.value,E=>(I(),at(Mc,{key:E,id:E,position:P(e).params.type==="graph"&&P(f).mode==="edit"?null:h.value[E],view:b.value,graph:b.value==="diagram"&&v.value},null,8,["id","position","view","graph"]))),128))]),_:1})],4),(I(),F("svg",null,[Z("g",{style:Ct({transform:A.value})},[j(hr,{name:"edges"},{default:rt(()=>[(I(!0),F(pe,null,Ge(R.value,E=>(I(),at(Oc,{key:E.id,edge:E,view:b.value},null,8,["edge","view"]))),128))]),_:1}),P(f).edit&&q.value?(I(),F("path",{key:0,d:q.value,class:"display-bounds"},null,8,Rc)):Bt("",!0)],4)]))],38),M[2]||(M[2]=Z("div",{class:"tint"},null,-1))],64))}},Zc=pt(Bc,[["__scopeId","data-v-a88816d1"]]),Fc={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Gc(t,e){return I(),F("svg",Fc,e[0]||(e[0]=[Z("path",{d:"M17,15.7895644 L17,29.2104356 C17,29.7627203 17.4477153,30.2104356 18,30.2104356 C18.1850598,30.2104356 18.3664897,30.1590832 18.5240974,30.0620939 L29.4285552,23.3516583 C29.8989131,23.0622073 30.0455671,22.4462605 29.7561161,21.9759026 C29.6740728,21.8425821 29.5618757,21.730385 29.4285552,21.6483417 L18.5240974,14.9379061 C18.0537395,14.6484551 17.4377927,14.7951091 17.1483417,15.265467 C17.0513523,15.4230747 17,15.6045046 17,15.7895644 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const Hc={name:"base-ControlsPlay",render:Gc},Xc={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Uc(t,e){return I(),F("svg",Xc,e[0]||(e[0]=[Z("path",{d:"M18,15 L20,15 C20.5522847,15 21,15.4477153 21,16 L21,29 C21,29.5522847 20.5522847,30 20,30 L18,30 C17.4477153,30 17,29.5522847 17,29 L17,16 C17,15.4477153 17.4477153,15 18,15 Z M25,15 L27,15 C27.5522847,15 28,15.4477153 28,16 L28,29 C28,29.5522847 27.5522847,30 27,30 L25,30 C24.4477153,30 24,29.5522847 24,29 L24,16 C24,15.4477153 24.4477153,15 25,15 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const Vc={name:"base-ControlsPause",render:Uc},qc={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Yc(t,e){return I(),F("svg",qc,e[0]||(e[0]=[Z("polyline",{stroke:"#000000","stroke-width":"2",transform:"matrix(-1 0 0 1 43.5 0)",points:"18.5 16 25 22.5 18.5 29",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const Kc={name:"base-ControlsMarkerPrevious",render:Yc},Wc={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Qc(t,e){return I(),F("svg",Wc,e[0]||(e[0]=[Z("polyline",{stroke:"#000000","stroke-width":"2",points:"20 16 26.5 22.5 20 29",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const jc={name:"base-ControlsMarkerNext",render:Qc},Jc={class:"icon",width:"3",height:"45",viewBox:"0 0 3 45",xmlns:"http://www.w3.org/2000/svg"};function tf(t,e){return I(),F("svg",Jc,e[0]||(e[0]=[Z("path",{d:"M2,36.5 C2,36.7761424 1.77614237,37 1.5,37 C1.22385763,37 1,36.7761424 1,36.5 L1,8.5 C1,8.22385763 1.22385763,8 1.5,8 C1.77614237,8 2,8.22385763 2,8.5 L2,36.5 Z",fill:"currentColor",opacity:".25"},null,-1)]))}const ef={name:"base-SeperatorVertical",render:tf},nf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function rf(t,e){return I(),F("svg",nf,e[0]||(e[0]=[Z("g",{fill:"none","fill-rule":"evenodd"},[Z("path",{d:"M18,14 C18.5522847,14 19,14.4477153 19,15 C19,15.5522847 18.5522847,16 18,16 L17,16 C16.4477153,16 16,16.4477153 16,17 L16,18 C16,18.5522847 15.5522847,19 15,19 C14.4477153,19 14,18.5522847 14,18 L14,17 C14,15.3431458 15.3431458,14 17,14 L18,14 Z M31,18 C31,18.5522847 30.5522847,19 30,19 C29.4477153,19 29,18.5522847 29,18 L29,17 C29,16.4477153 28.5522847,16 28,16 L27,16 C26.4477153,16 26,15.5522847 26,15 C26,14.4477153 26.4477153,14 27,14 L28,14 C29.6568542,14 31,15.3431458 31,17 L31,18 Z M27,31 C26.4477153,31 26,30.5522847 26,30 C26,29.4477153 26.4477153,29 27,29 L28,29 C28.5522847,29 29,28.5522847 29,28 L29,27 C29,26.4477153 29.4477153,26 30,26 C30.5522847,26 31,26.4477153 31,27 L31,28 C31,29.6568542 29.6568542,31 28,31 L27,31 Z M14,27 C14,26.4477153 14.4477153,26 15,26 C15.5522847,26 16,26.4477153 16,27 L16,28 C16,28.5522847 16.4477153,29 17,29 L18,29 C18.5522847,29 19,29.4477153 19,30 C19,30.5522847 18.5522847,31 18,31 L17,31 C15.3431458,31 14,29.6568542 14,28 L14,27 Z",fill:"currentColor","fill-rule":"nonzero"}),Z("path",{d:"M23.2071068,15.2071068 L29.7928932,21.7928932 C30.1834175,22.1834175 30.1834175,22.8165825 29.7928932,23.2071068 L23.2071068,29.7928932 C22.8165825,30.1834175 22.1834175,30.1834175 21.7928932,29.7928932 L15.2071068,23.2071068 C14.8165825,22.8165825 14.8165825,22.1834175 15.2071068,21.7928932 L21.7928932,15.2071068 C22.1834175,14.8165825 22.8165825,14.8165825 23.2071068,15.2071068 Z",fill:"currentColor"})],-1)]))}const of={name:"base-DisplayDefaultFrame",render:rf},af={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function sf(t,e){return I(),F("svg",af,e[0]||(e[0]=[Z("path",{d:"M23.2071068,15.2071068 L29.7928932,21.7928932 C30.1834175,22.1834175 30.1834175,22.8165825 29.7928932,23.2071068 L23.2071068,29.7928932 C22.8165825,30.1834175 22.1834175,30.1834175 21.7928932,29.7928932 L15.2071068,23.2071068 C14.8165825,22.8165825 14.8165825,22.1834175 15.2071068,21.7928932 L21.7928932,15.2071068 C22.1834175,14.8165825 22.8165825,14.8165825 23.2071068,15.2071068 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const vi={name:"base-DisplayDefault",render:sf},uf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function lf(t,e){return I(),F("svg",uf,e[0]||(e[0]=[Z("path",{d:"M19,14 C19.5522847,14 20,14.4477153 20,15 C20,15.5522847 19.5522847,16 19,16 L17,16 C16.4477153,16 16,16.4477153 16,17 L16,19 C16,19.5522847 15.5522847,20 15,20 C14.4477153,20 14,19.5522847 14,19 L14,17 C14,15.3431458 15.3431458,14 17,14 L19,14 Z M31,19 C31,19.5522847 30.5522847,20 30,20 C29.4477153,20 29,19.5522847 29,19 L29,17 C29,16.4477153 28.5522847,16 28,16 L26,16 C25.4477153,16 25,15.5522847 25,15 C25,14.4477153 25.4477153,14 26,14 L28,14 C29.6568542,14 31,15.3431458 31,17 L31,19 Z M26,31 C25.4477153,31 25,30.5522847 25,30 C25,29.4477153 25.4477153,29 26,29 L28,29 C28.5522847,29 29,28.5522847 29,28 L29,26 C29,25.4477153 29.4477153,25 30,25 C30.5522847,25 31,25.4477153 31,26 L31,28 C31,29.6568542 29.6568542,31 28,31 L26,31 Z M14,26 C14,25.4477153 14.4477153,25 15,25 C15.5522847,25 16,25.4477153 16,26 L16,28 C16,28.5522847 16.4477153,29 17,29 L19,29 C19.5522847,29 20,29.4477153 20,30 C20,30.5522847 19.5522847,31 19,31 L17,31 C15.3431458,31 14,29.6568542 14,28 L14,26 Z",fill:"currentColor"},null,-1)]))}const yi={name:"base-DisplayFrame",render:lf},cf={key:0,class:"markers"},ff=["onClick","onMousemove","onContextmenu"],hf={__name:"ControlsProgress",props:{showMarkers:Boolean},setup(t){const e=nt(0),n=bt(),r=Ft(),i=xe(),o=en(),s=D(()=>n.data.nodes[r.graphId]),u=D(()=>{const x=`${r.time/r.duration*100}%`;return`linear-gradient(to right, var(--left) ${x}, var(--right) ${x})`});function f(x,_){(_||!r.playing)&&(r.playFrom=r.time=x.offsetX/x.target.getBoundingClientRect().width*r.duration),_&&h()}function a(x){return`${x/r.duration*100}%`}function l(x,_,v){x.stopPropagation(),(v||!r.playing)&&(r.playFrom=r.time=_.time),v&&h()}function h(){e.value=r.time}function d(){r.playFrom=r.time=e.value}function g(x,_,v){x.preventDefault(),x.stopPropagation(),i.open(sn,[{label:"delete",action:()=>{n.data.nodes[r.graphId].marker=n.data.nodes[r.graphId].marker.filter((y,b)=>b!==v)}},{label:"+",remainOpen:!0,action:y=>{y.stopPropagation(),n.data.nodes[r.graphId].marker[v].time+=1}},{label:"-",remainOpen:!0,action:y=>{y.stopPropagation(),n.data.nodes[r.graphId].marker[v].time-=1}},..._.bounds!=null?[{label:"clear bounds",action:()=>{o.setBounds(null,r.graphId,_.time)}}]:[]],{x:x.x,y:x.y})}return(x,_)=>{var v;return I(),F("div",{class:"progress",style:Ct({background:u.value}),onClick:_[0]||(_[0]=y=>f(y,!0)),onMousemove:f,onMouseenter:h,onMouseleave:d},[t.showMarkers&&((v=s.value)!=null&&v.marker)?(I(),F("div",cf,[(I(!0),F(pe,null,Ge(s.value.marker,(y,b)=>(I(),F("div",{key:b,class:Zt(["marker",{active:y.time===P(r).time||y.time===e.value}]),style:Ct({left:a(y.time)}),onClick:A=>l(A,y,!0),onMousemove:A=>l(A,y),onContextmenu:A=>g(A,y,b)},[y.bounds&&y.states?(I(),at(P(of),{key:0})):y.states?(I(),at(P(vi),{key:1})):(I(),at(P(yi),{key:2}))],46,ff))),128))])):Bt("",!0)],36)}}},Or=pt(hf,[["__scopeId","data-v-158acf2c"]]),df={__name:"TheControls",setup(t){const e=bt(),n=Ft(),r=_e(),i=D(()=>e.data.nodes[n.graphId]),o=D(()=>{var l;if(((l=i.value)==null?void 0:l.color)!=null)return{"--graph-accent":`var(--${i.value.color})`}}),s=D(()=>n.playing),u=D(()=>i.value.marker.toSorted((l,h)=>l.time-h.time));function f(){var l;n.playFrom=n.time=((l=u.value.findLast(h=>h.time<n.time))==null?void 0:l.time)??0}function a(){var l;n.playFrom=n.time=((l=u.value.find(h=>h.time>n.time))==null?void 0:l.time)??n.duration}return(l,h)=>(I(),F("section",{class:Zt(["timeline",{edit:P(r).edit}]),style:Ct(o.value)},[P(r).edit?(I(),at(Br,{key:0,class:"button-group",horizontal:""},{default:rt(()=>[j(vn,{"disable-padding":""},{default:rt(()=>[s.value?(I(),at(P(Vc),{key:1,onClick:h[1]||(h[1]=d=>P(n).setPlaying=!1)})):(I(),at(P(Hc),{key:0,onClick:h[0]||(h[0]=d=>P(n).setPlaying=!0)}))]),_:1}),j(vn,{"disable-padding":""},{default:rt(()=>[j(P(Kc),{onClick:f})]),_:1}),j(vn,{"disable-padding":""},{default:rt(()=>[j(P(jc),{onClick:a})]),_:1}),j(P(ef)),j(Or,{"show-markers":""})]),_:1})):(I(),at(Or,{key:1}))],6))}},pf=pt(df,[["__scopeId","data-v-264fb344"]]),gf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function vf(t,e){return I(),F("svg",gf,e[0]||(e[0]=[Z("path",{d:"M18.3994816,13.8517704 L28.7074921,22.4660712 C29.1312774,22.8202243 29.1877255,23.450868 28.8335723,23.8746534 C28.6860759,24.0511499 28.4822444,24.1714042 28.2564291,24.2151501 L25.5073341,24.7477155 C24.9651298,24.8527535 24.6107365,25.377447 24.7157744,25.9196512 C24.7313245,25.9999207 24.7566603,26.0779801 24.7912143,26.1520815 L26.5743353,29.9759967 C26.8077409,30.4765367 26.5911857,31.0715171 26.0906457,31.3049227 L25.184338,31.727541 C24.683798,31.9609466 24.0888175,31.7443914 23.8554119,31.2438515 L22.072291,27.4199363 C21.8388853,26.9193963 21.2439049,26.7028411 20.7433649,26.9362467 C20.6692636,26.9708008 20.5996796,27.0143123 20.5361713,27.0658068 L18.3611183,28.8294093 C17.9321324,29.1772448 17.3023942,29.1114594 16.9545587,28.6824734 C16.8096934,28.5038109 16.7308474,28.2806704 16.7313064,28.0506573 L16.7582326,14.6170974 C16.7593395,14.0648137 17.2079512,13.6179967 17.7602349,13.6191016 C17.9939596,13.6195721 18.220137,13.7018939 18.3994816,13.8517704 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const yf={name:"base-CursorDefault",render:vf},mf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function _f(t,e){return I(),F("svg",mf,e[0]||(e[0]=[Z("path",{d:"M32,15 C33.1045695,15 34,15.8954305 34,17 L34,28 C34,29.1045695 33.1045695,30 32,30 L13,30 C11.8954305,30 11,29.1045695 11,28 L11,17 C11,15.8954305 11.8954305,15 13,15 L32,15 Z M32,16 L13,16 C12.4477153,16 12,16.4477153 12,17 L12,28 C12,28.5522847 12.4477153,29 13,29 L32,29 C32.5522847,29 33,28.5522847 33,28 L33,17 C33,16.4477153 32.5522847,16 32,16 Z M23,25 C23.5522847,25 24,25.4477153 24,26 L24,27 C24,27.5522847 23.5522847,28 23,28 L14,28 C13.4477153,28 13,27.5522847 13,27 L13,26 C13,25.4477153 13.4477153,25 14,25 L23,25 Z M31,17 C31.5522847,17 32,17.4477153 32,18 L32,23 C32,23.5522847 31.5522847,24 31,24 L14,24 C13.4477153,24 13,23.5522847 13,23 L13,18 C13,17.4477153 13.4477153,17 14,17 L31,17 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const xf={name:"base-AddEntity",render:_f},wf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Cf(t,e){return I(),F("svg",wf,e[0]||(e[0]=[Z("path",{d:"M32,15 C33.1045695,15 34,15.8954305 34,17 L34,28 C34,29.1045695 33.1045695,30 32,30 L13,30 C11.8954305,30 11,29.1045695 11,28 L11,17 C11,15.8954305 11.8954305,15 13,15 L32,15 Z M32,16 L13,16 C12.4477153,16 12,16.4477153 12,17 L12,28 C12,28.5522847 12.4477153,29 13,29 L32,29 C32.5522847,29 33,28.5522847 33,28 L33,17 C33,16.4477153 32.5522847,16 32,16 Z M20.1483417,19.765467 C20.4377927,19.2951091 21.0537395,19.1484551 21.5240974,19.4379061 L25.1160552,21.6483417 C25.2493757,21.730385 25.3615728,21.8425821 25.4436161,21.9759026 C25.7330671,22.4462605 25.5864131,23.0622073 25.1160552,23.3516583 L21.5240974,25.5620939 C21.3664897,25.6590832 21.1850598,25.7104356 21,25.7104356 C20.4477153,25.7104356 20,25.2627203 20,24.7104356 L20,20.2895644 C20,20.1045046 20.0513523,19.9230747 20.1483417,19.765467 Z",fill:"currentColor"},null,-1)]))}const bf={name:"base-AddStory",render:Cf},Lf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Mf(t,e){return I(),F("svg",Lf,e[0]||(e[0]=[Z("path",{d:"M32,15 C33.1045695,15 34,15.8954305 34,17 L34,28 C34,29.1045695 33.1045695,30 32,30 L13,30 C11.8954305,30 11,29.1045695 11,28 L11,17 C11,15.8954305 11.8954305,15 13,15 L32,15 Z M32,16 L13,16 C12.4477153,16 12,16.4477153 12,17 L12,28 C12,28.5522847 12.4477153,29 13,29 L32,29 C32.5522847,29 33,28.5522847 33,28 L33,17 C33,16.4477153 32.5522847,16 32,16 Z M26,22 C27.8346354,21.3884549 29.6692708,21.6183815 31.5040033,22.6896136 C31.8106661,22.8685631 31.9994458,23.1967019 32,23.5517578 L32,27 C32,27.5522847 31.5522847,28 31,28 L14,28 C13.4477153,28 13,27.5522847 13,27 L13,25.9687057 L13.0105961,25.8251331 C13.0818756,25.3451379 13.503213,24.9842004 14,25 L14.4403514,25.0105801 C20.8078896,25.11322 23.2067448,22.9310851 26,22 Z M16.75,18.5 C17.7164983,18.5 18.5,19.2835017 18.5,20.25 C18.5,21.2164983 17.7164983,22 16.75,22 C15.7835017,22 15,21.2164983 15,20.25 C15,19.2835017 15.7835017,18.5 16.75,18.5 Z",fill:"currentColor"},null,-1)]))}const Sf={name:"base-AddImage",render:Mf},$f={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Af(t,e){return I(),F("svg",$f,e[0]||(e[0]=[Z("path",{d:"M31.0395445,14.6621019 C31.0865261,14.8343676 31.0865261,15.0160709 31.0395445,15.1883367 L29.2261258,21.8375386 C29.0808101,22.3703629 28.531069,22.6845007 27.9982446,22.539185 C27.8303497,22.4933955 27.6773109,22.4045836 27.5542552,22.281528 L25.844,20.5709684 L15.7071068,30.7071068 C15.3165825,31.0976311 14.6834175,31.0976311 14.2928932,30.7071068 C13.9023689,30.3165825 13.9023689,29.6834175 14.2928932,29.2928932 L24.429,19.1559684 L22.718472,17.4457448 C22.3279477,17.0552205 22.3279477,16.4220555 22.718472,16.0315312 C22.8415277,15.9084756 22.9945665,15.8196637 23.1624614,15.7738742 L29.8116633,13.9604555 C30.3444877,13.8151397 30.8942288,14.1292775 31.0395445,14.6621019 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const Nf={name:"base-AddLink",render:Af},kf={class:"icon",width:"45",height:"3",viewBox:"0 0 45 3",xmlns:"http://www.w3.org/2000/svg"};function Tf(t,e){return I(),F("svg",kf,e[0]||(e[0]=[Z("path",{d:"M36.5,1 C36.7761424,1 37,1.22385763 37,1.5 C37,1.77614237 36.7761424,2 36.5,2 L8.5,2 C8.22385763,2 8,1.77614237 8,1.5 C8,1.22385763 8.22385763,1 8.5,1 L36.5,1 Z",fill:"currentColor",opacity:".25"},null,-1)]))}const Rr={name:"base-SeperatorHorizontal",render:Tf},Ef={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"},If=["id"],zf=["filter"];function Df(t,e){return I(),F("svg",Ef,[Z("defs",null,[Z("filter",{x:"-34.9%",y:"-34.9%",width:"169.8%",height:"169.8%",filterUnits:"objectBoundingBox",id:t.idMap.a},e[0]||(e[0]=[Z("feGaussianBlur",{stdDeviation:"2",in:"SourceGraphic"},null,-1)]),8,If)]),Z("path",{d:"M22.7071068,15.7071068 L29.2928932,22.2928932 C29.6834175,22.6834175 29.6834175,23.3165825 29.2928932,23.7071068 L22.7071068,30.2928932 C22.3165825,30.6834175 21.6834175,30.6834175 21.2928932,30.2928932 L14.7071068,23.7071068 C14.3165825,23.3165825 14.3165825,22.6834175 14.7071068,22.2928932 L21.2928932,15.7071068 C21.6834175,15.3165825 22.3165825,15.3165825 22.7071068,15.7071068 Z",fill:"currentColor",filter:"url(#"+t.idMap.a+")","fill-rule":"evenodd",opacity:".832"},null,8,zf)])}const Pf={name:"base-DisplayBlur",render:Df,data(){return{idMap:{a:"uicons-"+Math.random().toString(36).substr(2,10)}}}},Of={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Rf(t,e){return I(),F("svg",Of,e[0]||(e[0]=[Z("path",{d:"M17.1464466,27.1464466 L17.8535534,27.8535534 L15.3535534,30.3535534 L14.6464466,29.6464466 L17.1464466,27.1464466 Z M27.8535534,27.1464466 L30.3535534,29.6464466 L29.6464466,30.3535534 L27.1464466,27.8535534 L27.8535534,27.1464466 Z M23.2071068,15.2071068 L29.7928932,21.7928932 C30.1834175,22.1834175 30.1834175,22.8165825 29.7928932,23.2071068 L23.2071068,29.7928932 C22.8165825,30.1834175 22.1834175,30.1834175 21.7928932,29.7928932 L15.2071068,23.2071068 C14.8165825,22.8165825 14.8165825,22.1834175 15.2071068,21.7928932 L21.7928932,15.2071068 C22.1834175,14.8165825 22.8165825,14.8165825 23.2071068,15.2071068 Z M29.6464466,14.6464466 L30.3535534,15.3535534 L27.8535534,17.8535534 L27.1464466,17.1464466 L29.6464466,14.6464466 Z M15.3535534,14.6464466 L17.8535534,17.1464466 L17.1464466,17.8535534 L14.6464466,15.3535534 L15.3535534,14.6464466 Z M20.7868105,14.1744381 L19.8208847,14.4332571 L18.9058212,11.0181936 L19.871747,10.7593745 L20.7868105,14.1744381 Z M26.0941788,33.9818064 L25.128253,34.2406255 L24.2131895,30.8255619 L25.1791153,30.5667429 L26.0941788,33.9818064 Z M25.1791153,14.4332571 L24.2131895,14.1744381 L25.128253,10.7593745 L26.0941788,11.0181936 L25.1791153,14.4332571 Z M19.871747,34.2406255 L18.9058212,33.9818064 L19.8208847,30.5667429 L20.7868105,30.8255619 L19.871747,34.2406255 Z M30.8255619,20.7868105 L30.5667429,19.8208847 L33.9818064,18.9058212 L34.2406255,19.871747 L30.8255619,20.7868105 Z M11.0181936,26.0941788 L10.7593745,25.128253 L14.1744381,24.2131895 L14.4332571,25.1791153 L11.0181936,26.0941788 Z M30.5667429,25.1791153 L30.8255619,24.2131895 L34.2406255,25.128253 L33.9818064,26.0941788 L30.5667429,25.1791153 Z M10.7593745,19.871747 L11.0181936,18.9058212 L14.4332571,19.8208847 L14.1744381,20.7868105 L10.7593745,19.871747 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const Bf={name:"base-DisplayHighlight",render:Rf},Zf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Ff(t,e){return I(),F("svg",Zf,e[0]||(e[0]=[Z("path",{d:"M30.2071068,14.7928932 C30.5976311,15.1834175 30.5976311,15.8165825 30.2071068,16.2071068 L16.2071068,30.2071068 C15.8165825,30.5976311 15.1834175,30.5976311 14.7928932,30.2071068 C14.4023689,29.8165825 14.4023689,29.1834175 14.7928932,28.7928932 L28.7928932,14.7928932 C29.1834175,14.4023689 29.8165825,14.4023689 30.2071068,14.7928932 Z M27.9142136,19.9142136 L29.7928932,21.7928932 C30.1834175,22.1834175 30.1834175,22.8165825 29.7928932,23.2071068 L23.2071068,29.7928932 C22.8165825,30.1834175 22.1834175,30.1834175 21.7928932,29.7928932 L19.9142136,27.9142136 L27.9142136,19.9142136 Z M23.2071068,15.2071068 L25.0862136,17.0862136 L17.0862136,25.0862136 L15.2071068,23.2071068 C14.8165825,22.8165825 14.8165825,22.1834175 15.2071068,21.7928932 L21.7928932,15.2071068 C22.1834175,14.8165825 22.8165825,14.8165825 23.2071068,15.2071068 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const Gf={name:"base-DisplayUnset",render:Ff},Hf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Xf(t,e){return I(),F("svg",Hf,e[0]||(e[0]=[Z("path",{d:"M15,30 L30,30 L30,29 L15,29 L15,30 Z M23,15 L23,25.292 L26.6464466,21.6464466 L27.3535534,22.3535534 L22.5,27.2071068 L17.6464466,22.3535534 L18.3535534,21.6464466 L22,25.292 L22,15 L23,15 Z",fill:"currentColor"},null,-1)]))}const Uf={name:"base-Export",render:Xf},Vf={class:"toolbar"},qf={__name:"TheToolbar",setup(t){const e=en(),n=bt();return(r,i)=>(I(),F("section",Vf,[j(Do,{modelValue:P(e).mode,"onUpdate:modelValue":i[0]||(i[0]=o=>P(e).mode=o),options:[{value:"default",slot:"default",tooltip:"Select"},{value:"add-entity",slot:"add-entity",tooltip:"add entity"},{value:"add-story",slot:"add-story",tooltip:"add story"},{value:"add-image",slot:"add-image",tooltip:"add image"},{value:"add-edge",slot:"add-edge",tooltip:"add edge"},{disabled:!0,slot:"seperator"},{value:"display-blur",slot:"display-blur",tooltip:"blur"},{value:"display-default",slot:"display-default",tooltip:"default"},{value:"display-highlight",slot:"display-highlight",tooltip:"highlight"},{value:"display-unset",slot:"display-unset",tooltip:"unset"},{value:"display-frame",slot:"display-frame",tooltip:"frame"},{disabled:!0,slot:"seperator2"},{value:"download",slot:"download",tooltip:"download data",action:P(n).exportProject}]},{default:rt(()=>[j(P(yf))]),"add-entity":rt(()=>[j(P(xf))]),"add-story":rt(()=>[j(P(bf))]),"add-image":rt(()=>[j(P(Sf))]),"add-edge":rt(()=>[j(P(Nf))]),seperator:rt(()=>[j(P(Rr))]),"display-blur":rt(()=>[j(P(Pf))]),"display-default":rt(()=>[j(P(vi))]),"display-highlight":rt(()=>[j(P(Bf))]),"display-unset":rt(()=>[j(P(Gf))]),"display-frame":rt(()=>[j(P(yi))]),seperator2:rt(()=>[j(P(Rr))]),download:rt(()=>[j(P(Uf))]),_:1},8,["modelValue","options"])]))}},Yf=pt(qf,[["__scopeId","data-v-f9fd2ea6"]]),Kf={__name:"GraphView",setup(t){const e=Ft(),n=_e(),r=je();return(i,o)=>(I(),F("div",{class:Zt(["graph-view",{"split-screen":P(e).showVideo&&!P(n).pictureInPicture}]),onWheel:o[0]||(o[0]=ee(()=>{},["prevent"]))},[P(r).meta.hideMenuBar?Bt("",!0):(I(),at(Oo,{key:0})),j(Zc),P(e).showVideo?(I(),at(Po,{key:1})):Bt("",!0),j(pf),P(n).edit?(I(),at(Yf,{key:2})):Bt("",!0)],34))}},t1=pt(Kf,[["__scopeId","data-v-bea8aeaf"]]);export{t1 as default};
