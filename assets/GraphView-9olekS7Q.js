import{z as vr,m as ut,b as Yt,A as ce,B as Q,_ as $t,o as H,h as wt,i as dt,c as J,F as Ie,r as Ee,t as rn,L as yi,C as on,D as De,E as mr,e as tt,k as vi,f as W,G as un,u as me,H as se,I as Ft,q as Oe,J as Xo,d as lt,j as Pn,n as Ut,x as ee,s as Wo,y as ve,T as Ko,K as jo,M as mi,N as je,O as Qo,P as Jo,Q as _r,R as xr,S as cn,p as _i,U as Yn,l as ta,V as ea,a as xi,W as qr,X as Hr,Y as wi}from"./index-CucH01eV.js";import{T as na}from"./TheVideo-DlQI2b12.js";import{I as rr}from"./InputButton-CLj9apKs.js";import{T as ra}from"./TheHeader-BLgiZdyn.js";var ia={value:()=>{}};function Xn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Nn(n)}function Nn(t){this._=t}function oa(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Nn.prototype=Xn.prototype={constructor:Nn,on:function(t,e){var n=this._,r=oa(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=aa(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=Gr(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Gr(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Nn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function aa(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Gr(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ia,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var sr="http://www.w3.org/1999/xhtml";const Ur={svg:"http://www.w3.org/2000/svg",xhtml:sr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Wn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ur.hasOwnProperty(e)?{space:Ur[e],local:t}:t}function sa(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===sr&&e.documentElement.namespaceURI===sr?e.createElement(t):e.createElementNS(n,t)}}function la(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function bi(t){var e=Wn(t);return(e.local?la:sa)(e)}function ua(){}function wr(t){return t==null?ua:function(){return this.querySelector(t)}}function ca(t){typeof t!="function"&&(t=wr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=new Array(a),f,l,u=0;u<a;++u)(f=o[u])&&(l=t.call(f,f.__data__,u,o))&&("__data__"in f&&(l.__data__=f.__data__),s[u]=l);return new Zt(r,this._parents)}function fa(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ha(){return[]}function Ci(t){return t==null?ha:function(){return this.querySelectorAll(t)}}function da(t){return function(){return fa(t.apply(this,arguments))}}function pa(t){typeof t=="function"?t=da(t):t=Ci(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],s=a.length,f,l=0;l<s;++l)(f=a[l])&&(r.push(t.call(f,f.__data__,l,a)),i.push(f));return new Zt(r,i)}function Li(t){return function(){return this.matches(t)}}function Mi(t){return function(e){return e.matches(t)}}var ga=Array.prototype.find;function ya(t){return function(){return ga.call(this.children,t)}}function va(){return this.firstElementChild}function ma(t){return this.select(t==null?va:ya(typeof t=="function"?t:Mi(t)))}var _a=Array.prototype.filter;function xa(){return Array.from(this.children)}function wa(t){return function(){return _a.call(this.children,t)}}function ba(t){return this.selectAll(t==null?xa:wa(typeof t=="function"?t:Mi(t)))}function Ca(t){typeof t!="function"&&(t=Li(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],f,l=0;l<a;++l)(f=o[l])&&t.call(f,f.__data__,l,o)&&s.push(f);return new Zt(r,this._parents)}function Si(t){return new Array(t.length)}function La(){return new Zt(this._enter||this._groups.map(Si),this._parents)}function Dn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Dn.prototype={constructor:Dn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ma(t){return function(){return t}}function Sa(t,e,n,r,i,o){for(var a=0,s,f=e.length,l=o.length;a<l;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new Dn(t,o[a]);for(;a<f;++a)(s=e[a])&&(i[a]=s)}function Aa(t,e,n,r,i,o,a){var s,f,l=new Map,u=e.length,h=o.length,d=new Array(u),p;for(s=0;s<u;++s)(f=e[s])&&(d[s]=p=a.call(f,f.__data__,s,e)+"",l.has(p)?i[s]=f:l.set(p,f));for(s=0;s<h;++s)p=a.call(t,o[s],s,o)+"",(f=l.get(p))?(r[s]=f,f.__data__=o[s],l.delete(p)):n[s]=new Dn(t,o[s]);for(s=0;s<u;++s)(f=e[s])&&l.get(d[s])===f&&(i[s]=f)}function $a(t){return t.__data__}function ka(t,e){if(!arguments.length)return Array.from(this,$a);var n=e?Aa:Sa,r=this._parents,i=this._groups;typeof t!="function"&&(t=Ma(t));for(var o=i.length,a=new Array(o),s=new Array(o),f=new Array(o),l=0;l<o;++l){var u=r[l],h=i[l],d=h.length,p=Na(t.call(u,u&&u.__data__,l,r)),b=p.length,v=s[l]=new Array(b),_=a[l]=new Array(b),m=f[l]=new Array(d);n(u,h,v,_,m,p,e);for(var N=0,x=0,L,E;N<b;++N)if(L=v[N]){for(N>=x&&(x=N+1);!(E=_[x])&&++x<b;);L._next=E||null}}return a=new Zt(a,r),a._enter=s,a._exit=f,a}function Na(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ta(){return new Zt(this._exit||this._groups.map(Si),this._parents)}function Ia(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Ea(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),f=0;f<a;++f)for(var l=n[f],u=r[f],h=l.length,d=s[f]=new Array(h),p,b=0;b<h;++b)(p=l[b]||u[b])&&(d[b]=p);for(;f<i;++f)s[f]=n[f];return new Zt(s,this._parents)}function za(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Pa(t){t||(t=Da);function e(h,d){return h&&d?t(h.__data__,d.__data__):!h-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,f=i[o]=new Array(s),l,u=0;u<s;++u)(l=a[u])&&(f[u]=l);f.sort(e)}return new Zt(i,this._parents).order()}function Da(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Oa(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ba(){return Array.from(this)}function Ra(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function Fa(){let t=0;for(const e of this)++t;return t}function Za(){return!this.node()}function Va(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function qa(t){return function(){this.removeAttribute(t)}}function Ha(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ga(t,e){return function(){this.setAttribute(t,e)}}function Ua(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ya(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Xa(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Wa(t,e){var n=Wn(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Ha:qa:typeof e=="function"?n.local?Xa:Ya:n.local?Ua:Ga)(n,e))}function Ai(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ka(t){return function(){this.style.removeProperty(t)}}function ja(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Qa(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ja(t,e,n){return arguments.length>1?this.each((e==null?Ka:typeof e=="function"?Qa:ja)(t,e,n??"")):ze(this.node(),t)}function ze(t,e){return t.style.getPropertyValue(e)||Ai(t).getComputedStyle(t,null).getPropertyValue(e)}function ts(t){return function(){delete this[t]}}function es(t,e){return function(){this[t]=e}}function ns(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function rs(t,e){return arguments.length>1?this.each((e==null?ts:typeof e=="function"?ns:es)(t,e)):this.node()[t]}function $i(t){return t.trim().split(/^|\s+/)}function br(t){return t.classList||new ki(t)}function ki(t){this._node=t,this._names=$i(t.getAttribute("class")||"")}ki.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ni(t,e){for(var n=br(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Ti(t,e){for(var n=br(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function is(t){return function(){Ni(this,t)}}function os(t){return function(){Ti(this,t)}}function as(t,e){return function(){(e.apply(this,arguments)?Ni:Ti)(this,t)}}function ss(t,e){var n=$i(t+"");if(arguments.length<2){for(var r=br(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?as:e?is:os)(n,e))}function ls(){this.textContent=""}function us(t){return function(){this.textContent=t}}function cs(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function fs(t){return arguments.length?this.each(t==null?ls:(typeof t=="function"?cs:us)(t)):this.node().textContent}function hs(){this.innerHTML=""}function ds(t){return function(){this.innerHTML=t}}function ps(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function gs(t){return arguments.length?this.each(t==null?hs:(typeof t=="function"?ps:ds)(t)):this.node().innerHTML}function ys(){this.nextSibling&&this.parentNode.appendChild(this)}function vs(){return this.each(ys)}function ms(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _s(){return this.each(ms)}function xs(t){var e=typeof t=="function"?t:bi(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ws(){return null}function bs(t,e){var n=typeof t=="function"?t:bi(t),r=e==null?ws:typeof e=="function"?e:wr(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Cs(){var t=this.parentNode;t&&t.removeChild(this)}function Ls(){return this.each(Cs)}function Ms(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ss(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function As(t){return this.select(t?Ss:Ms)}function $s(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ks(t){return function(e){t.call(this,e,this.__data__)}}function Ns(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Ts(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function Is(t,e,n){return function(){var r=this.__on,i,o=ks(e);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Es(t,e,n){var r=Ns(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var f=0,l=s.length,u;f<l;++f)for(i=0,u=s[f];i<o;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(s=e?Is:Ts,i=0;i<o;++i)this.each(s(r[i],e,n));return this}function Ii(t,e,n){var r=Ai(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function zs(t,e){return function(){return Ii(this,t,e)}}function Ps(t,e){return function(){return Ii(this,t,e.apply(this,arguments))}}function Ds(t,e){return this.each((typeof e=="function"?Ps:zs)(t,e))}function*Os(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Ei=[null];function Zt(t,e){this._groups=t,this._parents=e}function fn(){return new Zt([[document.documentElement]],Ei)}function Bs(){return this}Zt.prototype=fn.prototype={constructor:Zt,select:ca,selectAll:pa,selectChild:ma,selectChildren:ba,filter:Ca,data:ka,enter:La,exit:Ta,join:Ia,merge:Ea,selection:Bs,order:za,sort:Pa,call:Oa,nodes:Ba,node:Ra,size:Fa,empty:Za,each:Va,attr:Wa,style:Ja,property:rs,classed:ss,text:fs,html:gs,raise:vs,lower:_s,append:xs,insert:bs,remove:Ls,clone:As,datum:$s,on:Es,dispatch:Ds,[Symbol.iterator]:Os};function ge(t){return typeof t=="string"?new Zt([[document.querySelector(t)]],[document.documentElement]):new Zt([[t]],Ei)}function Rs(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Le(t,e){if(t=Rs(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const lr={capture:!0,passive:!1};function ur(t){t.preventDefault(),t.stopImmediatePropagation()}function Fs(t){var e=t.document.documentElement,n=ge(t).on("dragstart.drag",ur,lr);"onselectstart"in e?n.on("selectstart.drag",ur,lr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Zs(t,e){var n=t.document.documentElement,r=ge(t).on("dragstart.drag",null);e&&(r.on("click.drag",ur,lr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Cr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function zi(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function hn(){}var an=.7,On=1/an,Te="\\s*([+-]?\\d+)\\s*",sn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ne="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vs=/^#([0-9a-f]{3,8})$/,qs=new RegExp(`^rgb\\(${Te},${Te},${Te}\\)$`),Hs=new RegExp(`^rgb\\(${ne},${ne},${ne}\\)$`),Gs=new RegExp(`^rgba\\(${Te},${Te},${Te},${sn}\\)$`),Us=new RegExp(`^rgba\\(${ne},${ne},${ne},${sn}\\)$`),Ys=new RegExp(`^hsl\\(${sn},${ne},${ne}\\)$`),Xs=new RegExp(`^hsla\\(${sn},${ne},${ne},${sn}\\)$`),Yr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cr(hn,Ae,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Xr,formatHex:Xr,formatHex8:Ws,formatHsl:Ks,formatRgb:Wr,toString:Wr});function Xr(){return this.rgb().formatHex()}function Ws(){return this.rgb().formatHex8()}function Ks(){return Pi(this).formatHsl()}function Wr(){return this.rgb().formatRgb()}function Ae(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Vs.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Kr(e):n===3?new Ot(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ln(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ln(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qs.exec(t))?new Ot(e[1],e[2],e[3],1):(e=Hs.exec(t))?new Ot(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Gs.exec(t))?Ln(e[1],e[2],e[3],e[4]):(e=Us.exec(t))?Ln(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ys.exec(t))?Jr(e[1],e[2]/100,e[3]/100,1):(e=Xs.exec(t))?Jr(e[1],e[2]/100,e[3]/100,e[4]):Yr.hasOwnProperty(t)?Kr(Yr[t]):t==="transparent"?new Ot(NaN,NaN,NaN,0):null}function Kr(t){return new Ot(t>>16&255,t>>8&255,t&255,1)}function Ln(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ot(t,e,n,r)}function js(t){return t instanceof hn||(t=Ae(t)),t?(t=t.rgb(),new Ot(t.r,t.g,t.b,t.opacity)):new Ot}function cr(t,e,n,r){return arguments.length===1?js(t):new Ot(t,e,n,r??1)}function Ot(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Cr(Ot,cr,zi(hn,{brighter(t){return t=t==null?On:Math.pow(On,t),new Ot(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?an:Math.pow(an,t),new Ot(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ot(Se(this.r),Se(this.g),Se(this.b),Bn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jr,formatHex:jr,formatHex8:Qs,formatRgb:Qr,toString:Qr}));function jr(){return`#${Me(this.r)}${Me(this.g)}${Me(this.b)}`}function Qs(){return`#${Me(this.r)}${Me(this.g)}${Me(this.b)}${Me((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qr(){const t=Bn(this.opacity);return`${t===1?"rgb(":"rgba("}${Se(this.r)}, ${Se(this.g)}, ${Se(this.b)}${t===1?")":`, ${t})`}`}function Bn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Se(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Me(t){return t=Se(t),(t<16?"0":"")+t.toString(16)}function Jr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Wt(t,e,n,r)}function Pi(t){if(t instanceof Wt)return new Wt(t.h,t.s,t.l,t.opacity);if(t instanceof hn||(t=Ae(t)),!t)return new Wt;if(t instanceof Wt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,f=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=f<.5?o+i:2-o-i,a*=60):s=f>0&&f<1?0:a,new Wt(a,s,f,t.opacity)}function Js(t,e,n,r){return arguments.length===1?Pi(t):new Wt(t,e,n,r??1)}function Wt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Cr(Wt,Js,zi(hn,{brighter(t){return t=t==null?On:Math.pow(On,t),new Wt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?an:Math.pow(an,t),new Wt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ot(ir(t>=240?t-240:t+120,i,r),ir(t,i,r),ir(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Wt(ti(this.h),Mn(this.s),Mn(this.l),Bn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Bn(this.opacity);return`${t===1?"hsl(":"hsla("}${ti(this.h)}, ${Mn(this.s)*100}%, ${Mn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ti(t){return t=(t||0)%360,t<0?t+360:t}function Mn(t){return Math.max(0,Math.min(1,t||0))}function ir(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Lr=t=>()=>t;function tl(t,e){return function(n){return t+n*e}}function el(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function nl(t){return(t=+t)==1?Di:function(e,n){return n-e?el(e,n,t):Lr(isNaN(e)?n:e)}}function Di(t,e){var n=e-t;return n?tl(t,n):Lr(isNaN(t)?e:t)}const Rn=function t(e){var n=nl(e);function r(i,o){var a=n((i=cr(i)).r,(o=cr(o)).r),s=n(i.g,o.g),f=n(i.b,o.b),l=Di(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=f(u),i.opacity=l(u),i+""}}return r.gamma=t,r}(1);function rl(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function il(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ol(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Fn(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function al(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function te(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function sl(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Fn(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var fr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,or=new RegExp(fr.source,"g");function ll(t){return function(){return t}}function ul(t){return function(e){return t(e)+""}}function Oi(t,e){var n=fr.lastIndex=or.lastIndex=0,r,i,o,a=-1,s=[],f=[];for(t=t+"",e=e+"";(r=fr.exec(t))&&(i=or.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,f.push({i:a,x:te(r,i)})),n=or.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?f[0]?ul(f[0].x):ll(e):(e=f.length,function(l){for(var u=0,h;u<e;++u)s[(h=f[u]).i]=h.x(l);return s.join("")})}function Fn(t,e){var n=typeof e,r;return e==null||n==="boolean"?Lr(e):(n==="number"?te:n==="string"?(r=Ae(e))?(e=r,Rn):Oi:e instanceof Ae?Rn:e instanceof Date?al:il(e)?rl:Array.isArray(e)?ol:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?sl:te)(t,e)}var ei=180/Math.PI,hr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Bi(t,e,n,r,i,o){var a,s,f;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(f=t*n+e*r)&&(n-=t*f,r-=e*f),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,f/=s),t*r<e*n&&(t=-t,e=-e,f=-f,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*ei,skewX:Math.atan(f)*ei,scaleX:a,scaleY:s}}var Sn;function cl(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?hr:Bi(e.a,e.b,e.c,e.d,e.e,e.f)}function fl(t){return t==null||(Sn||(Sn=document.createElementNS("http://www.w3.org/2000/svg","g")),Sn.setAttribute("transform",t),!(t=Sn.transform.baseVal.consolidate()))?hr:(t=t.matrix,Bi(t.a,t.b,t.c,t.d,t.e,t.f))}function Ri(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,h,d,p,b){if(l!==h||u!==d){var v=p.push("translate(",null,e,null,n);b.push({i:v-4,x:te(l,h)},{i:v-2,x:te(u,d)})}else(h||d)&&p.push("translate("+h+e+d+n)}function a(l,u,h,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:h.push(i(h)+"rotate(",null,r)-2,x:te(l,u)})):u&&h.push(i(h)+"rotate("+u+r)}function s(l,u,h,d){l!==u?d.push({i:h.push(i(h)+"skewX(",null,r)-2,x:te(l,u)}):u&&h.push(i(h)+"skewX("+u+r)}function f(l,u,h,d,p,b){if(l!==h||u!==d){var v=p.push(i(p)+"scale(",null,",",null,")");b.push({i:v-4,x:te(l,h)},{i:v-2,x:te(u,d)})}else(h!==1||d!==1)&&p.push(i(p)+"scale("+h+","+d+")")}return function(l,u){var h=[],d=[];return l=t(l),u=t(u),o(l.translateX,l.translateY,u.translateX,u.translateY,h,d),a(l.rotate,u.rotate,h,d),s(l.skewX,u.skewX,h,d),f(l.scaleX,l.scaleY,u.scaleX,u.scaleY,h,d),l=u=null,function(p){for(var b=-1,v=d.length,_;++b<v;)h[(_=d[b]).i]=_.x(p);return h.join("")}}}var hl=Ri(cl,"px, ","px)","deg)"),dl=Ri(fl,", ",")",")"),pl=1e-12;function ni(t){return((t=Math.exp(t))+1/t)/2}function gl(t){return((t=Math.exp(t))-1/t)/2}function yl(t){return((t=Math.exp(2*t))-1)/(t+1)}const vl=function t(e,n,r){function i(o,a){var s=o[0],f=o[1],l=o[2],u=a[0],h=a[1],d=a[2],p=u-s,b=h-f,v=p*p+b*b,_,m;if(v<pl)m=Math.log(d/l)/e,_=function(j){return[s+j*p,f+j*b,l*Math.exp(e*j*m)]};else{var N=Math.sqrt(v),x=(d*d-l*l+r*v)/(2*l*n*N),L=(d*d-l*l-r*v)/(2*d*n*N),E=Math.log(Math.sqrt(x*x+1)-x),R=Math.log(Math.sqrt(L*L+1)-L);m=(R-E)/e,_=function(j){var X=j*m,G=ni(E),O=l/(n*N)*(G*yl(e*X+E)-gl(E));return[s+O*p,f+O*b,l*G/ni(e*X+E)]}}return _.duration=m*1e3*e/Math.SQRT2,_}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,f=s*s;return t(a,s,f)},i}(Math.SQRT2,2,4);var Pe=0,Qe=0,We=0,Fi=1e3,Zn,Je,Vn=0,$e=0,Kn=0,ln=typeof performance=="object"&&performance.now?performance:Date,Zi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Mr(){return $e||(Zi(ml),$e=ln.now()+Kn)}function ml(){$e=0}function qn(){this._call=this._time=this._next=null}qn.prototype=Sr.prototype={constructor:qn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Mr():+n)+(e==null?0:+e),!this._next&&Je!==this&&(Je?Je._next=this:Zn=this,Je=this),this._call=t,this._time=n,dr()},stop:function(){this._call&&(this._call=null,this._time=1/0,dr())}};function Sr(t,e,n){var r=new qn;return r.restart(t,e,n),r}function _l(){Mr(),++Pe;for(var t=Zn,e;t;)(e=$e-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Pe}function ri(){$e=(Vn=ln.now())+Kn,Pe=Qe=0;try{_l()}finally{Pe=0,wl(),$e=0}}function xl(){var t=ln.now(),e=t-Vn;e>Fi&&(Kn-=e,Vn=t)}function wl(){for(var t,e=Zn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Zn=n);Je=t,dr(r)}function dr(t){if(!Pe){Qe&&(Qe=clearTimeout(Qe));var e=t-$e;e>24?(t<1/0&&(Qe=setTimeout(ri,t-ln.now()-Kn)),We&&(We=clearInterval(We))):(We||(Vn=ln.now(),We=setInterval(xl,Fi)),Pe=1,Zi(ri))}}function ii(t,e,n){var r=new qn;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var bl=Xn("start","end","cancel","interrupt"),Cl=[],Vi=0,oi=1,pr=2,Tn=3,ai=4,gr=5,In=6;function jn(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Ll(t,n,{name:e,index:r,group:i,on:bl,tween:Cl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Vi})}function Ar(t,e){var n=jt(t,e);if(n.state>Vi)throw new Error("too late; already scheduled");return n}function re(t,e){var n=jt(t,e);if(n.state>Tn)throw new Error("too late; already running");return n}function jt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ll(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Sr(o,0,n.time);function o(l){n.state=oi,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var u,h,d,p;if(n.state!==oi)return f();for(u in r)if(p=r[u],p.name===n.name){if(p.state===Tn)return ii(a);p.state===ai?(p.state=In,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[u]):+u<e&&(p.state=In,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[u])}if(ii(function(){n.state===Tn&&(n.state=ai,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=pr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===pr){for(n.state=Tn,i=new Array(d=n.tween.length),u=0,h=-1;u<d;++u)(p=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=p);i.length=h+1}}function s(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(f),n.state=gr,1),h=-1,d=i.length;++h<d;)i[h].call(t,u);n.state===gr&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=In,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function En(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>pr&&r.state<gr,r.state=In,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function Ml(t){return this.each(function(){En(this,t)})}function Sl(t,e){var n,r;return function(){var i=re(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Al(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=re(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},f=0,l=i.length;f<l;++f)if(i[f].name===e){i[f]=s;break}f===l&&i.push(s)}o.tween=i}}function $l(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=jt(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?Sl:Al)(n,t,e))}function $r(t,e,n){var r=t._id;return t.each(function(){var i=re(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return jt(i,r).value[e]}}function qi(t,e){var n;return(typeof e=="number"?te:e instanceof Ae?Rn:(n=Ae(e))?(e=n,Rn):Oi)(t,e)}function kl(t){return function(){this.removeAttribute(t)}}function Nl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Tl(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function Il(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function El(t,e,n){var r,i,o;return function(){var a,s=n(this),f;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),f=s+"",a===f?null:a===r&&f===i?o:(i=f,o=e(r=a,s)))}}function zl(t,e,n){var r,i,o;return function(){var a,s=n(this),f;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),f=s+"",a===f?null:a===r&&f===i?o:(i=f,o=e(r=a,s)))}}function Pl(t,e){var n=Wn(t),r=n==="transform"?dl:qi;return this.attrTween(t,typeof e=="function"?(n.local?zl:El)(n,r,$r(this,"attr."+t,e)):e==null?(n.local?Nl:kl)(n):(n.local?Il:Tl)(n,r,e))}function Dl(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Ol(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Bl(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Ol(t,o)),n}return i._value=e,i}function Rl(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Dl(t,o)),n}return i._value=e,i}function Fl(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Wn(t);return this.tween(n,(r.local?Bl:Rl)(r,e))}function Zl(t,e){return function(){Ar(this,t).delay=+e.apply(this,arguments)}}function Vl(t,e){return e=+e,function(){Ar(this,t).delay=e}}function ql(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Zl:Vl)(e,t)):jt(this.node(),e).delay}function Hl(t,e){return function(){re(this,t).duration=+e.apply(this,arguments)}}function Gl(t,e){return e=+e,function(){re(this,t).duration=e}}function Ul(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Hl:Gl)(e,t)):jt(this.node(),e).duration}function Yl(t,e){if(typeof e!="function")throw new Error;return function(){re(this,t).ease=e}}function Xl(t){var e=this._id;return arguments.length?this.each(Yl(e,t)):jt(this.node(),e).ease}function Wl(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;re(this,t).ease=n}}function Kl(t){if(typeof t!="function")throw new Error;return this.each(Wl(this._id,t))}function jl(t){typeof t!="function"&&(t=Li(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],f,l=0;l<a;++l)(f=o[l])&&t.call(f,f.__data__,l,o)&&s.push(f);return new ue(r,this._parents,this._name,this._id)}function Ql(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var f=e[s],l=n[s],u=f.length,h=a[s]=new Array(u),d,p=0;p<u;++p)(d=f[p]||l[p])&&(h[p]=d);for(;s<r;++s)a[s]=e[s];return new ue(a,this._parents,this._name,this._id)}function Jl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function tu(t,e,n){var r,i,o=Jl(e)?Ar:re;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function eu(t,e){var n=this._id;return arguments.length<2?jt(this.node(),n).on.on(t):this.each(tu(n,t,e))}function nu(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function ru(){return this.on("end.remove",nu(this._id))}function iu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=wr(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],f=s.length,l=o[a]=new Array(f),u,h,d=0;d<f;++d)(u=s[d])&&(h=t.call(u,u.__data__,d,s))&&("__data__"in u&&(h.__data__=u.__data__),l[d]=h,jn(l[d],e,n,d,l,jt(u,n)));return new ue(o,this._parents,e,n)}function ou(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ci(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var f=r[s],l=f.length,u,h=0;h<l;++h)if(u=f[h]){for(var d=t.call(u,u.__data__,h,f),p,b=jt(u,n),v=0,_=d.length;v<_;++v)(p=d[v])&&jn(p,e,n,v,d,b);o.push(d),a.push(u)}return new ue(o,a,e,n)}var au=fn.prototype.constructor;function su(){return new au(this._groups,this._parents)}function lu(t,e){var n,r,i;return function(){var o=ze(this,t),a=(this.style.removeProperty(t),ze(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function Hi(t){return function(){this.style.removeProperty(t)}}function uu(t,e,n){var r,i=n+"",o;return function(){var a=ze(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function cu(t,e,n){var r,i,o;return function(){var a=ze(this,t),s=n(this),f=s+"";return s==null&&(f=s=(this.style.removeProperty(t),ze(this,t))),a===f?null:a===r&&f===i?o:(i=f,o=e(r=a,s))}}function fu(t,e){var n,r,i,o="style."+e,a="end."+o,s;return function(){var f=re(this,t),l=f.on,u=f.value[o]==null?s||(s=Hi(e)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(a,i=u),f.on=r}}function hu(t,e,n){var r=(t+="")=="transform"?hl:qi;return e==null?this.styleTween(t,lu(t,r)).on("end.style."+t,Hi(t)):typeof e=="function"?this.styleTween(t,cu(t,r,$r(this,"style."+t,e))).each(fu(this._id,t)):this.styleTween(t,uu(t,r,e),n).on("end.style."+t,null)}function du(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function pu(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&du(t,a,n)),r}return o._value=e,o}function gu(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,pu(t,e,n??""))}function yu(t){return function(){this.textContent=t}}function vu(t){return function(){var e=t(this);this.textContent=e??""}}function mu(t){return this.tween("text",typeof t=="function"?vu($r(this,"text",t)):yu(t==null?"":t+""))}function _u(t){return function(e){this.textContent=t.call(this,e)}}function xu(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&_u(i)),e}return r._value=t,r}function wu(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,xu(t))}function bu(){for(var t=this._name,e=this._id,n=Gi(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,f,l=0;l<s;++l)if(f=a[l]){var u=jt(f,e);jn(f,t,n,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ue(r,this._parents,t,n)}function Cu(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},f={value:function(){--i===0&&o()}};n.each(function(){var l=re(this,r),u=l.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(f)),l.on=e}),i===0&&o()})}var Lu=0;function ue(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Gi(){return++Lu}var ae=fn.prototype;ue.prototype={constructor:ue,select:iu,selectAll:ou,selectChild:ae.selectChild,selectChildren:ae.selectChildren,filter:jl,merge:Ql,selection:su,transition:bu,call:ae.call,nodes:ae.nodes,node:ae.node,size:ae.size,empty:ae.empty,each:ae.each,on:eu,attr:Pl,attrTween:Fl,style:hu,styleTween:gu,text:mu,textTween:wu,remove:ru,tween:$l,delay:ql,duration:Ul,ease:Xl,easeVarying:Kl,end:Cu,[Symbol.iterator]:ae[Symbol.iterator]};function Mu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Su={time:null,delay:0,duration:250,ease:Mu};function Au(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function $u(t){var e,n;t instanceof ue?(e=t._id,t=t._name):(e=Gi(),(n=Su).time=Mr(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,f,l=0;l<s;++l)(f=a[l])&&jn(f,t,e,l,a,n||Au(f,e));return new ue(r,this._parents,t,e)}fn.prototype.interrupt=Ml;fn.prototype.transition=$u;const An=t=>()=>t;function ku(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function le(t,e,n){this.k=t,this.x=e,this.y=n}le.prototype={constructor:le,scale:function(t){return t===1?this:new le(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new le(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Hn=new le(1,0,0);le.prototype;function ar(t){t.stopImmediatePropagation()}function Ke(t){t.preventDefault(),t.stopImmediatePropagation()}function Nu(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Tu(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function si(){return this.__zoom||Hn}function Iu(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Eu(){return navigator.maxTouchPoints||"ontouchstart"in this}function zu(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Pu(){var t=Nu,e=Tu,n=zu,r=Iu,i=Eu,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,f=vl,l=Xn("start","zoom","end"),u,h,d,p=500,b=150,v=0,_=10;function m(g){g.property("__zoom",si).on("wheel.zoom",X,{passive:!1}).on("mousedown.zoom",G).on("dblclick.zoom",O).filter(i).on("touchstart.zoom",k).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(g,z,C,M){var T=g.selection?g.selection():g;T.property("__zoom",si),g!==T?E(g,z,C,M):T.interrupt().each(function(){R(this,arguments).event(M).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},m.scaleBy=function(g,z,C,M){m.scaleTo(g,function(){var T=this.__zoom.k,P=typeof z=="function"?z.apply(this,arguments):z;return T*P},C,M)},m.scaleTo=function(g,z,C,M){m.transform(g,function(){var T=e.apply(this,arguments),P=this.__zoom,w=C==null?L(T):typeof C=="function"?C.apply(this,arguments):C,S=P.invert(w),A=typeof z=="function"?z.apply(this,arguments):z;return n(x(N(P,A),w,S),T,a)},C,M)},m.translateBy=function(g,z,C,M){m.transform(g,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof C=="function"?C.apply(this,arguments):C),e.apply(this,arguments),a)},null,M)},m.translateTo=function(g,z,C,M,T){m.transform(g,function(){var P=e.apply(this,arguments),w=this.__zoom,S=M==null?L(P):typeof M=="function"?M.apply(this,arguments):M;return n(Hn.translate(S[0],S[1]).scale(w.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof C=="function"?-C.apply(this,arguments):-C),P,a)},M,T)};function N(g,z){return z=Math.max(o[0],Math.min(o[1],z)),z===g.k?g:new le(z,g.x,g.y)}function x(g,z,C){var M=z[0]-C[0]*g.k,T=z[1]-C[1]*g.k;return M===g.x&&T===g.y?g:new le(g.k,M,T)}function L(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function E(g,z,C,M){g.on("start.zoom",function(){R(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(M).end()}).tween("zoom",function(){var T=this,P=arguments,w=R(T,P).event(M),S=e.apply(T,P),A=C==null?L(S):typeof C=="function"?C.apply(T,P):C,V=Math.max(S[1][0]-S[0][0],S[1][1]-S[0][1]),F=T.__zoom,B=typeof z=="function"?z.apply(T,P):z,Z=f(F.invert(A).concat(V/F.k),B.invert(A).concat(V/B.k));return function(q){if(q===1)q=B;else{var Y=Z(q),et=V/Y[2];q=new le(et,A[0]-Y[0]*et,A[1]-Y[1]*et)}w.zoom(null,q)}})}function R(g,z,C){return!C&&g.__zooming||new j(g,z)}function j(g,z){this.that=g,this.args=z,this.active=0,this.sourceEvent=null,this.extent=e.apply(g,z),this.taps=0}j.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,z){return this.mouse&&g!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var z=ge(this.that).datum();l.call(g,this.that,new ku(g,{sourceEvent:this.sourceEvent,target:m,type:g,transform:this.that.__zoom,dispatch:l}),z)}};function X(g,...z){if(!t.apply(this,arguments))return;var C=R(this,z).event(g),M=this.__zoom,T=Math.max(o[0],Math.min(o[1],M.k*Math.pow(2,r.apply(this,arguments)))),P=Le(g);if(C.wheel)(C.mouse[0][0]!==P[0]||C.mouse[0][1]!==P[1])&&(C.mouse[1]=M.invert(C.mouse[0]=P)),clearTimeout(C.wheel);else{if(M.k===T)return;C.mouse=[P,M.invert(P)],En(this),C.start()}Ke(g),C.wheel=setTimeout(w,b),C.zoom("mouse",n(x(N(M,T),C.mouse[0],C.mouse[1]),C.extent,a));function w(){C.wheel=null,C.end()}}function G(g,...z){if(d||!t.apply(this,arguments))return;var C=g.currentTarget,M=R(this,z,!0).event(g),T=ge(g.view).on("mousemove.zoom",A,!0).on("mouseup.zoom",V,!0),P=Le(g,C),w=g.clientX,S=g.clientY;Fs(g.view),ar(g),M.mouse=[P,this.__zoom.invert(P)],En(this),M.start();function A(F){if(Ke(F),!M.moved){var B=F.clientX-w,Z=F.clientY-S;M.moved=B*B+Z*Z>v}M.event(F).zoom("mouse",n(x(M.that.__zoom,M.mouse[0]=Le(F,C),M.mouse[1]),M.extent,a))}function V(F){T.on("mousemove.zoom mouseup.zoom",null),Zs(F.view,M.moved),Ke(F),M.event(F).end()}}function O(g,...z){if(t.apply(this,arguments)){var C=this.__zoom,M=Le(g.changedTouches?g.changedTouches[0]:g,this),T=C.invert(M),P=C.k*(g.shiftKey?.5:2),w=n(x(N(C,P),M,T),e.apply(this,z),a);Ke(g),s>0?ge(this).transition().duration(s).call(E,w,M,g):ge(this).call(m.transform,w,M,g)}}function k(g,...z){if(t.apply(this,arguments)){var C=g.touches,M=C.length,T=R(this,z,g.changedTouches.length===M).event(g),P,w,S,A;for(ar(g),w=0;w<M;++w)S=C[w],A=Le(S,this),A=[A,this.__zoom.invert(A),S.identifier],T.touch0?!T.touch1&&T.touch0[2]!==A[2]&&(T.touch1=A,T.taps=0):(T.touch0=A,P=!0,T.taps=1+!!u);u&&(u=clearTimeout(u)),P&&(T.taps<2&&(h=A[0],u=setTimeout(function(){u=null},p)),En(this),T.start())}}function D(g,...z){if(this.__zooming){var C=R(this,z).event(g),M=g.changedTouches,T=M.length,P,w,S,A;for(Ke(g),P=0;P<T;++P)w=M[P],S=Le(w,this),C.touch0&&C.touch0[2]===w.identifier?C.touch0[0]=S:C.touch1&&C.touch1[2]===w.identifier&&(C.touch1[0]=S);if(w=C.that.__zoom,C.touch1){var V=C.touch0[0],F=C.touch0[1],B=C.touch1[0],Z=C.touch1[1],q=(q=B[0]-V[0])*q+(q=B[1]-V[1])*q,Y=(Y=Z[0]-F[0])*Y+(Y=Z[1]-F[1])*Y;w=N(w,Math.sqrt(q/Y)),S=[(V[0]+B[0])/2,(V[1]+B[1])/2],A=[(F[0]+Z[0])/2,(F[1]+Z[1])/2]}else if(C.touch0)S=C.touch0[0],A=C.touch0[1];else return;C.zoom("touch",n(x(w,S,A),C.extent,a))}}function I(g,...z){if(this.__zooming){var C=R(this,z).event(g),M=g.changedTouches,T=M.length,P,w;for(ar(g),d&&clearTimeout(d),d=setTimeout(function(){d=null},p),P=0;P<T;++P)w=M[P],C.touch0&&C.touch0[2]===w.identifier?delete C.touch0:C.touch1&&C.touch1[2]===w.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(w=Le(w,this),Math.hypot(h[0]-w[0],h[1]-w[1])<_)){var S=ge(this).on("dblclick.zoom");S&&S.apply(this,arguments)}}}return m.wheelDelta=function(g){return arguments.length?(r=typeof g=="function"?g:An(+g),m):r},m.filter=function(g){return arguments.length?(t=typeof g=="function"?g:An(!!g),m):t},m.touchable=function(g){return arguments.length?(i=typeof g=="function"?g:An(!!g),m):i},m.extent=function(g){return arguments.length?(e=typeof g=="function"?g:An([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),m):e},m.scaleExtent=function(g){return arguments.length?(o[0]=+g[0],o[1]=+g[1],m):[o[0],o[1]]},m.translateExtent=function(g){return arguments.length?(a[0][0]=+g[0][0],a[1][0]=+g[1][0],a[0][1]=+g[0][1],a[1][1]=+g[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},m.constrain=function(g){return arguments.length?(n=g,m):n},m.duration=function(g){return arguments.length?(s=+g,m):s},m.interpolate=function(g){return arguments.length?(f=g,m):f},m.on=function(){var g=l.on.apply(l,arguments);return g===l?m:g},m.clickDistance=function(g){return arguments.length?(v=(g=+g)*g,m):Math.sqrt(v)},m.tapDistance=function(g){return arguments.length?(_=+g,m):_},m}const Be=vr("layout",()=>{const t=ut({}),e=ut({x:0,y:0}),n=ut({x:0,y:0,k:1});return{nodes:t,offset:e,transform:n}});function Du(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function i(){var o,a=n.length,s,f=0,l=0;for(o=0;o<a;++o)s=n[o],f+=s.x,l+=s.y;for(f=(f/a-t)*r,l=(l/a-e)*r,o=0;o<a;++o)s=n[o],s.x-=f,s.y-=l}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(t=+o,i):t},i.y=function(o){return arguments.length?(e=+o,i):e},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function Ou(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Ui(this.cover(e,n),e,n,t)}function Ui(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o=t._root,a={data:r},s=t._x0,f=t._y0,l=t._x1,u=t._y1,h,d,p,b,v,_,m,N;if(!o)return t._root=a,t;for(;o.length;)if((v=e>=(h=(s+l)/2))?s=h:l=h,(_=n>=(d=(f+u)/2))?f=d:u=d,i=o,!(o=o[m=_<<1|v]))return i[m]=a,t;if(p=+t._x.call(null,o.data),b=+t._y.call(null,o.data),e===p&&n===b)return a.next=o,i?i[m]=a:t._root=a,t;do i=i?i[m]=new Array(4):t._root=new Array(4),(v=e>=(h=(s+l)/2))?s=h:l=h,(_=n>=(d=(f+u)/2))?f=d:u=d;while((m=_<<1|v)===(N=(b>=d)<<1|p>=h));return i[N]=o,i[m]=a,t}function Bu(t){var e,n,r=t.length,i,o,a=new Array(r),s=new Array(r),f=1/0,l=1/0,u=-1/0,h=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(a[n]=i,s[n]=o,i<f&&(f=i),i>u&&(u=i),o<l&&(l=o),o>h&&(h=o));if(f>u||l>h)return this;for(this.cover(f,l).cover(u,h),n=0;n<r;++n)Ui(this,a[n],s[n],t[n]);return this}function Ru(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a=i-n||1,s=this._root,f,l;n>t||t>=i||r>e||e>=o;)switch(l=(e<r)<<1|t<n,f=new Array(4),f[l]=s,s=f,a*=2,l){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Fu(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Zu(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Tt(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Vu(t,e,n){var r,i=this._x0,o=this._y0,a,s,f,l,u=this._x1,h=this._y1,d=[],p=this._root,b,v;for(p&&d.push(new Tt(p,i,o,u,h)),n==null?n=1/0:(i=t-n,o=e-n,u=t+n,h=e+n,n*=n);b=d.pop();)if(!(!(p=b.node)||(a=b.x0)>u||(s=b.y0)>h||(f=b.x1)<i||(l=b.y1)<o))if(p.length){var _=(a+f)/2,m=(s+l)/2;d.push(new Tt(p[3],_,m,f,l),new Tt(p[2],a,m,_,l),new Tt(p[1],_,s,f,m),new Tt(p[0],a,s,_,m)),(v=(e>=m)<<1|t>=_)&&(b=d[d.length-1],d[d.length-1]=d[d.length-1-v],d[d.length-1-v]=b)}else{var N=t-+this._x.call(null,p.data),x=e-+this._y.call(null,p.data),L=N*N+x*x;if(L<n){var E=Math.sqrt(n=L);i=t-E,o=e-E,u=t+E,h=e+E,r=p.data}}return r}function qu(t){if(isNaN(u=+this._x.call(null,t))||isNaN(h=+this._y.call(null,t)))return this;var e,n=this._root,r,i,o,a=this._x0,s=this._y0,f=this._x1,l=this._y1,u,h,d,p,b,v,_,m;if(!n)return this;if(n.length)for(;;){if((b=u>=(d=(a+f)/2))?a=d:f=d,(v=h>=(p=(s+l)/2))?s=p:l=p,e=n,!(n=n[_=v<<1|b]))return this;if(!n.length)break;(e[_+1&3]||e[_+2&3]||e[_+3&3])&&(r=e,m=_)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[_]=o:delete e[_],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[m]=n:this._root=n),this):(this._root=o,this)}function Hu(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Gu(){return this._root}function Uu(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Yu(t){var e=[],n,r=this._root,i,o,a,s,f;for(r&&e.push(new Tt(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,o=n.x0,a=n.y0,s=n.x1,f=n.y1)&&r.length){var l=(o+s)/2,u=(a+f)/2;(i=r[3])&&e.push(new Tt(i,l,u,s,f)),(i=r[2])&&e.push(new Tt(i,o,u,l,f)),(i=r[1])&&e.push(new Tt(i,l,a,s,u)),(i=r[0])&&e.push(new Tt(i,o,a,l,u))}return this}function Xu(t){var e=[],n=[],r;for(this._root&&e.push(new Tt(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,f=r.x1,l=r.y1,u=(a+f)/2,h=(s+l)/2;(o=i[0])&&e.push(new Tt(o,a,s,u,h)),(o=i[1])&&e.push(new Tt(o,u,s,f,h)),(o=i[2])&&e.push(new Tt(o,a,h,u,l)),(o=i[3])&&e.push(new Tt(o,u,h,f,l))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Wu(t){return t[0]}function Ku(t){return arguments.length?(this._x=t,this):this._x}function ju(t){return t[1]}function Qu(t){return arguments.length?(this._y=t,this):this._y}function kr(t,e,n){var r=new Nr(e??Wu,n??ju,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function Nr(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function li(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var It=kr.prototype=Nr.prototype;It.copy=function(){var t=new Nr(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=li(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=li(r));return t};It.add=Ou;It.addAll=Bu;It.cover=Ru;It.data=Fu;It.extent=Zu;It.find=Vu;It.remove=qu;It.removeAll=Hu;It.root=Gu;It.size=Uu;It.visit=Yu;It.visitAfter=Xu;It.x=Ku;It.y=Qu;function Kt(t){return function(){return t}}function ye(t){return(t()-.5)*1e-6}function Ju(t){return t.x+t.vx}function tc(t){return t.y+t.vy}function ec(t){var e,n,r,i=1,o=1;typeof t!="function"&&(t=Kt(t==null?1:+t));function a(){for(var l,u=e.length,h,d,p,b,v,_,m=0;m<o;++m)for(h=kr(e,Ju,tc).visitAfter(s),l=0;l<u;++l)d=e[l],v=n[d.index],_=v*v,p=d.x+d.vx,b=d.y+d.vy,h.visit(N);function N(x,L,E,R,j){var X=x.data,G=x.r,O=v+G;if(X){if(X.index>d.index){var k=p-X.x-X.vx,D=b-X.y-X.vy,I=k*k+D*D;I<O*O&&(k===0&&(k=ye(r),I+=k*k),D===0&&(D=ye(r),I+=D*D),I=(O-(I=Math.sqrt(I)))/I*i,d.vx+=(k*=I)*(O=(G*=G)/(_+G)),d.vy+=(D*=I)*O,X.vx-=k*(O=1-O),X.vy-=D*O)}return}return L>p+O||R<p-O||E>b+O||j<b-O}}function s(l){if(l.data)return l.r=n[l.data.index];for(var u=l.r=0;u<4;++u)l[u]&&l[u].r>l.r&&(l.r=l[u].r)}function f(){if(e){var l,u=e.length,h;for(n=new Array(u),l=0;l<u;++l)h=e[l],n[h.index]=+t(h,l,e)}}return a.initialize=function(l,u){e=l,r=u,f()},a.iterations=function(l){return arguments.length?(o=+l,a):o},a.strength=function(l){return arguments.length?(i=+l,a):i},a.radius=function(l){return arguments.length?(t=typeof l=="function"?l:Kt(+l),f(),a):t},a}function nc(t){return t.index}function ui(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function rc(t){var e=nc,n=h,r,i=Kt(30),o,a,s,f,l,u=1;t==null&&(t=[]);function h(_){return 1/Math.min(s[_.source.index],s[_.target.index])}function d(_){for(var m=0,N=t.length;m<u;++m)for(var x=0,L,E,R,j,X,G,O;x<N;++x)L=t[x],E=L.source,R=L.target,j=R.x+R.vx-E.x-E.vx||ye(l),X=R.y+R.vy-E.y-E.vy||ye(l),G=Math.sqrt(j*j+X*X),G=(G-o[x])/G*_*r[x],j*=G,X*=G,R.vx-=j*(O=f[x]),R.vy-=X*O,E.vx+=j*(O=1-O),E.vy+=X*O}function p(){if(a){var _,m=a.length,N=t.length,x=new Map(a.map((E,R)=>[e(E,R,a),E])),L;for(_=0,s=new Array(m);_<N;++_)L=t[_],L.index=_,typeof L.source!="object"&&(L.source=ui(x,L.source)),typeof L.target!="object"&&(L.target=ui(x,L.target)),s[L.source.index]=(s[L.source.index]||0)+1,s[L.target.index]=(s[L.target.index]||0)+1;for(_=0,f=new Array(N);_<N;++_)L=t[_],f[_]=s[L.source.index]/(s[L.source.index]+s[L.target.index]);r=new Array(N),b(),o=new Array(N),v()}}function b(){if(a)for(var _=0,m=t.length;_<m;++_)r[_]=+n(t[_],_,t)}function v(){if(a)for(var _=0,m=t.length;_<m;++_)o[_]=+i(t[_],_,t)}return d.initialize=function(_,m){a=_,l=m,p()},d.links=function(_){return arguments.length?(t=_,p(),d):t},d.id=function(_){return arguments.length?(e=_,d):e},d.iterations=function(_){return arguments.length?(u=+_,d):u},d.strength=function(_){return arguments.length?(n=typeof _=="function"?_:Kt(+_),b(),d):n},d.distance=function(_){return arguments.length?(i=typeof _=="function"?_:Kt(+_),v(),d):i},d}const ic=1664525,oc=1013904223,ci=4294967296;function ac(){let t=1;return()=>(t=(ic*t+oc)%ci)/ci}function sc(t){return t.x}function lc(t){return t.y}var uc=10,cc=Math.PI*(3-Math.sqrt(5));function fc(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,f=Sr(h),l=Xn("tick","end"),u=ac();t==null&&(t=[]);function h(){d(),l.call("tick",e),n<r&&(f.stop(),l.call("end",e))}function d(v){var _,m=t.length,N;v===void 0&&(v=1);for(var x=0;x<v;++x)for(n+=(o-n)*i,s.forEach(function(L){L(n)}),_=0;_<m;++_)N=t[_],N.fx==null?N.x+=N.vx*=a:(N.x=N.fx,N.vx=0),N.fy==null?N.y+=N.vy*=a:(N.y=N.fy,N.vy=0);return e}function p(){for(var v=0,_=t.length,m;v<_;++v){if(m=t[v],m.index=v,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var N=uc*Math.sqrt(.5+v),x=v*cc;m.x=N*Math.cos(x),m.y=N*Math.sin(x)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function b(v){return v.initialize&&v.initialize(t,u),v}return p(),e={tick:d,restart:function(){return f.restart(h),e},stop:function(){return f.stop(),e},nodes:function(v){return arguments.length?(t=v,p(),s.forEach(b),e):t},alpha:function(v){return arguments.length?(n=+v,e):n},alphaMin:function(v){return arguments.length?(r=+v,e):r},alphaDecay:function(v){return arguments.length?(i=+v,e):+i},alphaTarget:function(v){return arguments.length?(o=+v,e):o},velocityDecay:function(v){return arguments.length?(a=1-v,e):1-a},randomSource:function(v){return arguments.length?(u=v,s.forEach(b),e):u},force:function(v,_){return arguments.length>1?(_==null?s.delete(v):s.set(v,b(_)),e):s.get(v)},find:function(v,_,m){var N=0,x=t.length,L,E,R,j,X;for(m==null?m=1/0:m*=m,N=0;N<x;++N)j=t[N],L=v-j.x,E=_-j.y,R=L*L+E*E,R<m&&(X=j,m=R);return X},on:function(v,_){return arguments.length>1?(l.on(v,_),e):l.on(v)}}}function hc(){var t,e,n,r,i=Kt(-30),o,a=1,s=1/0,f=.81;function l(p){var b,v=t.length,_=kr(t,sc,lc).visitAfter(h);for(r=p,b=0;b<v;++b)e=t[b],_.visit(d)}function u(){if(t){var p,b=t.length,v;for(o=new Array(b),p=0;p<b;++p)v=t[p],o[v.index]=+i(v,p,t)}}function h(p){var b=0,v,_,m=0,N,x,L;if(p.length){for(N=x=L=0;L<4;++L)(v=p[L])&&(_=Math.abs(v.value))&&(b+=v.value,m+=_,N+=_*v.x,x+=_*v.y);p.x=N/m,p.y=x/m}else{v=p,v.x=v.data.x,v.y=v.data.y;do b+=o[v.data.index];while(v=v.next)}p.value=b}function d(p,b,v,_){if(!p.value)return!0;var m=p.x-e.x,N=p.y-e.y,x=_-b,L=m*m+N*N;if(x*x/f<L)return L<s&&(m===0&&(m=ye(n),L+=m*m),N===0&&(N=ye(n),L+=N*N),L<a&&(L=Math.sqrt(a*L)),e.vx+=m*p.value*r/L,e.vy+=N*p.value*r/L),!0;if(p.length||L>=s)return;(p.data!==e||p.next)&&(m===0&&(m=ye(n),L+=m*m),N===0&&(N=ye(n),L+=N*N),L<a&&(L=Math.sqrt(a*L)));do p.data!==e&&(x=o[p.data.index]*r/L,e.vx+=m*x,e.vy+=N*x);while(p=p.next)}return l.initialize=function(p,b){t=p,n=b,u()},l.strength=function(p){return arguments.length?(i=typeof p=="function"?p:Kt(+p),u(),l):i},l.distanceMin=function(p){return arguments.length?(a=p*p,l):Math.sqrt(a)},l.distanceMax=function(p){return arguments.length?(s=p*p,l):Math.sqrt(s)},l.theta=function(p){return arguments.length?(f=p*p,l):Math.sqrt(f)},l}function dc(t,e,n){var r,i=Kt(.1),o,a;typeof t!="function"&&(t=Kt(+t)),e==null&&(e=0),n==null&&(n=0);function s(l){for(var u=0,h=r.length;u<h;++u){var d=r[u],p=d.x-e||1e-6,b=d.y-n||1e-6,v=Math.sqrt(p*p+b*b),_=(a[u]-v)*o[u]*l/v;d.vx+=p*_,d.vy+=b*_}}function f(){if(r){var l,u=r.length;for(o=new Array(u),a=new Array(u),l=0;l<u;++l)a[l]=+t(r[l],l,r),o[l]=isNaN(a[l])?0:+i(r[l],l,r)}}return s.initialize=function(l){r=l,f()},s.strength=function(l){return arguments.length?(i=typeof l=="function"?l:Kt(+l),f(),s):i},s.radius=function(l){return arguments.length?(t=typeof l=="function"?l:Kt(+l),f(),s):t},s.x=function(l){return arguments.length?(e=+l,s):e},s.y=function(l){return arguments.length?(n=+l,s):n},s}const zn=Yt(),Ne=Be();function pc(t){var l,u;Ne.offset.x+=((l=Ne.nodes[t])==null?void 0:l.x)??0,Ne.offset.y+=((u=Ne.nodes[t])==null?void 0:u.y)??0;const n=Yi(t,1).flat(2),r=[...new Set(n.map(h=>h.id))].filter(h=>{var d;return["entity","predicate"].includes((d=zn.data.nodes[h])==null?void 0:d.type)}),o=[...r.map(h=>{const d=n.filter(p=>p.id===h).map(({depth:p})=>p);return{id:h,depth:1-Math.max(...d)}}).map(({id:h,depth:d})=>({id:h,depth:d,...f(h)}))],a=[...zn.data.edges.filter(h=>r.includes(h.nodes[0])&&r.includes(h.nodes[1])).map(h=>({source:h.nodes[0],target:h.nodes[1]}))],s=fc(o).force("link",rc(a).id(h=>h.id).distance(100)).force("collide",ec().radius(h=>{var d;return((d=zn.data.nodes[h.id])==null?void 0:d.type)==="graph"?160:50})).force("charge",hc().strength(-5e3)).force("center",Du(0,0)).force("radial",dc(h=>h.depth*550,0,0).strength(2));for(let h=0;h<1e3;h++)s.tick();return Object.fromEntries(o.filter(({proxy:h})=>!h).map(({id:h,x:d,y:p})=>[h,{x:d,y:p}]));function f(h){if(h===t)return{x:0,y:0};if(Ne.nodes[h]!=null)return Ne.nodes[h];const d=Math.random()*Math.PI*2;return{x:Math.cos(d)*250,y:Math.sin(d)*250}}}function Yi(t,e=1){return[{id:t,depth:e},...zn.data.edges.filter(n=>n.nodes.includes(t)).map(n=>{const r=n.nodes.find(i=>i!==t);return e===1?{id:r,depth:0}:Yi(r,e-1)})]}const Tr=vr("display",()=>{const t=ce(),e=Yt(),n=Q(()=>{var l,u;return((l=e.node)==null?void 0:l.marker)==null?[]:(u=e.node)==null?void 0:u.marker.filter(h=>h.time<=t.time).sort((h,d)=>h.time-d.time)}),r=Q(()=>{var l,u;return(u=(l=e.node)==null?void 0:l.marker)==null?void 0:u.find(h=>h.time===t.time)}),i=Q(()=>n.value.reduce((l,u)=>({...l,...u.states}),{states:{}})),o=Q(()=>{var l;return(l=n.value.findLast(u=>u.bounds!=null))==null?void 0:l.bounds});function a(l){return l.includes("hide")?"hide":l.every(u=>u==="highlight")?"highlight":"default"}function s(l){const u=l.map(h=>e.data.nodes[h].inheritDisplay?f(h):i.value[h]);return a(u)}function f(l){const u=e.data.edges.filter(h=>h.nodes.includes(l)).map(h=>{const d=h.nodes.find(p=>p!==l);return i.value[d]});return a(u)}return{markers:n,exactMarker:r,states:i,bounds:o,inheritStateFromNodes:s,inheritStateFromNeighbor:f}}),gc=["onClick"],yc={__name:"ContextMenuList",props:["context"],setup(t){return(e,n)=>(H(),wt(yi,{class:"context-menu-list"},{default:dt(()=>[(H(!0),J(Ie,null,Ee(t.context,(r,i)=>(H(),J("button",{key:i,onClick:r.action},rn(r.label),9,gc))),128))]),_:1}))}},Qn=$t(yc,[["__scopeId","data-v-5b0e52e5"]]),vc=vr("connect",()=>{const t=Yt(),e=ut(!1),n=ut({x:100,y:100}),r=ut(null),i=ut(null),o=ut(null),a=new AbortController;function s(l,u,h){e.value=!0,i.value=u,r.value=l,o.value=h,window.addEventListener("keydown",d=>{d.key==="Escape"&&(a.abort(),e.value=!1)},{signal:a.signal})}function f(l){a.abort(),e.value=!1,t.data.edges.push({nodes:[r.value,l],arrow:i.value,graph:o.value,id:crypto.randomUUID()})}return{connecting:e,offset:n,open:s,start:r,close:f}}),en=Be();function mc(t){var r;const e=document.createRange(),n=(r=t.value)==null?void 0:r.childNodes;return n==null?0:(e.setStartBefore(n[0]),e.setEndAfter(n[n.length-1]),`${e.getBoundingClientRect().width/en.transform.k}px`)}function Xi(t,e,n,r=0,i=0){var d;const o=document.createRange();if(((d=t.value)==null?void 0:d.childNodes)==null)return{};let s=t.value.firstElementChild;for(let p=r;p>0;p--)s=s.nextElementSibling;let f=t.value.lastElementChild;for(let p=i;p>0;p--)f=f.previousElementSibling;o.setStartBefore(s),o.setEndAfter(f);const l=o.getBoundingClientRect(),u=t.value.getBoundingClientRect().width,h={...n,width:Math.min(l.width,u)/en.transform.k,height:l.height/en.transform.k};return en.nodes[e]=h,h}function fi(t){if(t!=null)return t.getBoundingClientRect().width/en.transform.k}const _c={class:"horizontal-slider"},xc=["disabled"],wc=["disabled"],bc={__name:"HorizontalSlider",props:{itemWidth:{type:Number,default:250},noArrows:Boolean},setup(t){const e=t,n=ut(null),r=ut(0),i=ut(0),o=ut(0),a=ut(null),s=ut(null),f=new ResizeObserver(p=>{for(const b of p)b.contentRect&&(a.value=`${(window.innerWidth-800)/2-30}px`,s.value=`${Math.max((window.innerWidth-800)/2-10,30)}px`,on(()=>{r.value=n.value.scrollWidth,i.value=n.value.offsetWidth}))}),l=Q(()=>o.value>35&&!e.noArrows),u=Q(()=>o.value<r.value-i.value-35&&!e.noArrows);function h(){o.value=n.value.scrollLeft??0}const d=p=>{const _=Math.max(Math.floor(250/e.itemWidth),1);n.value.scrollBy({left:_*(e.itemWidth+10)*p,behavior:"smooth"})};return De(()=>{f.observe(n.value)}),mr(()=>{f.unobserve(n.value)}),(p,b)=>(H(),J("div",_c,[tt("button",{disabled:!l.value,tabindex:"-1",class:"arrow left",onClick:b[0]||(b[0]=v=>d(-1))}," ← ",8,xc),tt("button",{disabled:!u.value,tabindex:"-1",class:"arrow right",onClick:b[1]||(b[1]=v=>d(1))}," → ",8,wc),tt("div",{ref_key:"wrapper",ref:n,class:"wrapper",onScroll:h,style:{scrollPaddingInlineStart:"0px"}},[vi(p.$slots,"default",{},void 0,!0)],544)]))}},Cc=$t(bc,[["__scopeId","data-v-0b4d1e9f"]]),Lc={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Mc(t,e){return H(),J("svg",Lc,e[0]||(e[0]=[tt("path",{d:"M17,15.7895644 L17,29.2104356 C17,29.7627203 17.4477153,30.2104356 18,30.2104356 C18.1850598,30.2104356 18.3664897,30.1590832 18.5240974,30.0620939 L29.4285552,23.3516583 C29.8989131,23.0622073 30.0455671,22.4462605 29.7561161,21.9759026 C29.6740728,21.8425821 29.5618757,21.730385 29.4285552,21.6483417 L18.5240974,14.9379061 C18.0537395,14.6484551 17.4377927,14.7951091 17.1483417,15.265467 C17.0513523,15.4230747 17,15.6045046 17,15.7895644 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const Wi={name:"base-ControlsPlay",render:Mc},Sc={class:"icon",width:"21",height:"21",viewBox:"0 0 21 21",xmlns:"http://www.w3.org/2000/svg"};function Ac(t,e){return H(),J("svg",Sc,e[0]||(e[0]=[tt("path",{d:"M10.5,21 C16.2989899,21 21,16.2989899 21,10.5 C21,4.70101013 16.2989899,0 10.5,0 C4.70101013,0 0,4.70101013 0,10.5 C0,16.2989899 4.70101013,21 10.5,21 Z M10.5,14 C12.4329966,14 14,12.4329966 14,10.5 C14,8.56700338 12.4329966,7 10.5,7 C8.56700338,7 7,8.56700338 7,10.5 C7,12.4329966 8.56700338,14 10.5,14 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const $c={name:"base-IconPlaying",render:Ac},kc={__name:"IconPlaying",setup(t){return(e,n)=>(H(),wt(W($c)))}},Nc=$t(kc,[["__scopeId","data-v-aea62c91"]]),Tc=["src"],Ic={key:1,class:"image-placeholder"},Ec={class:"icon"},zc={__name:"GraphNodeGraph",props:{node:Object,id:String,position:Object},setup(t,{expose:e}){const n=t,r=un(),i=ce(),o=me(),a=ut(null),s=ut(null),f=Q(()=>r.localize(n.node.label)),l=Q(()=>r.getMediaUrl(n.node.image)),u=Q(()=>({"--graph-accent":`var(--${n.node.color})`})),h=Q(()=>i.graphId===n.id&&i.playing),d=Q(()=>i.next===n.id),p=Q(()=>{if(!d.value)return;const v=i.duration-i.time;if(!(v>5))return{"--autoplay":`${100-v*20}%`}});De(()=>{b()}),se(()=>o.lang,()=>on(()=>b()));function b(v){Xi(s,n.id,n.position,null,v),console.log()}return e({el:s}),(v,_)=>(H(),J("div",{class:"node-graph",ref_key:"el",ref:s,style:Ft({...u.value,...p.value})},[l.value?(H(),J("img",{key:0,src:l.value,draggable:"false"},null,8,Tc)):(H(),J("div",Ic)),tt("div",Ec,[h.value?(H(),wt(Nc,{key:1})):(H(),wt(W(Wi),{key:0}))]),tt("div",{class:"text",ref_key:"textElement",ref:a},[tt("span",null,[tt("span",null,rn(f.value),1)])],512)],4))}},Ki=$t(zc,[["__scopeId","data-v-b40ba556"]]),Pc={key:0},Dc={key:2,class:"description"},Oc={key:3,class:"urls"},Bc=["href"],Rc={__name:"GraphNodeEntity",props:{node:Object,id:String,occurances:Object,position:Object},setup(t,{expose:e}){const n=Oe(),r=t,i=Yt(),o=me(),a=un(),s=ut(null),f=ut(null),l=ut(null),u=ut(!1),h=ut(null),d=ut(null),p=Q(()=>{var x;return(x=i.data.nodes[r.node.class])==null?void 0:x.label}),b=Q(()=>n.params.id===r.id),v=Q(()=>{if(b.value)return a.localize(r.node.description,!0)}),_=Q(()=>{if(!(!b.value||r.node.url==null))return r.node.url.map(x=>({full:x,domain:new URL(x).hostname.replace(/^www\./,"")}))});De(()=>{m()}),se(b,x=>{x&&(u.value=!0);const L=(fi(s.value.querySelector(".label"))-250)/2;h.value={margin:`0 ${-L}px 0 ${L}px`};const E=(fi(s.value.querySelector(".class"))-250)/2;d.value={margin:`0 ${-E}px 0 ${E}px`},on(()=>{m(x?0:1),x||(u.value=!0,h.value=null,d.value=null)})}),se(()=>o.lang,()=>on(()=>m())),e({el:s});function m(x){const L=Xi(s,r.id,r.position,null,x);l.value=`${L.height}px`}function N(x){x.propertyName==="margin-left"&&(u.value=!1,h.value=null,d.value=null)}return(x,L)=>{const E=Xo("RouterLink");return H(),J("div",{class:Ut(["entity",{detail:b.value}]),ref_key:"el",ref:s,style:Ft({width:f.value,height:l.value})},[tt("span",{class:Ut(["label",{"animate-text-align":u.value}]),style:Ft(h.value),onTransitionend:N},[lt(Pn,{text:t.node.label},null,8,["text"])],38),p.value?(H(),J("br",Pc)):ee("",!0),p.value?(H(),J("span",{key:1,class:Ut(["class",{"animate-text-align":u.value}]),style:Ft(d.value)},[lt(Pn,{text:p.value},null,8,["text"])],6)):ee("",!0),v.value?(H(),J("div",Dc,rn(v.value),1)):ee("",!0),_.value&&!W(o).exhibition?(H(),J("div",Oc,[(H(!0),J(Ie,null,Ee(_.value,(R,j)=>(H(),J("span",{key:j},[tt("a",{href:R.full},rn(R.domain),9,Bc),L[2]||(L[2]=Wo("  "))]))),128))])):ee("",!0),lt(Ko,{name:"stories"},{default:dt(()=>[b.value?(H(),wt(Cc,{key:0,class:"occurances",onWheel:L[1]||(L[1]=ve(()=>{},["stop"])),"no-arrows":u.value},{default:dt(()=>[(H(!0),J(Ie,null,Ee(t.occurances,R=>(H(),wt(E,{class:"occurance",onClick:L[0]||(L[0]=ve(()=>{},["stop"])),key:R.id,to:{name:"graph",params:{type:"graph",id:R.id}}},{default:dt(()=>[lt(Ki,{id:R.id,node:R,class:"compact"},null,8,["id","node"])]),_:2},1032,["to"]))),128))]),_:1},8,["no-arrows"])):ee("",!0)]),_:1})],6)}}},Fc=$t(Rc,[["__scopeId","data-v-17528933"]]),Zc={data(){return{count:0}},props:{node:Object},computed:{label(){return this.helperStore.localize(this.node.label??this.node.text)},...jo(un)}},Vc={class:"entity",ref:"el"},qc={class:"text measure-width"};function Hc(t,e,n,r,i,o){return H(),J("div",Vc,[tt("span",qc,rn(o.label),1)],512)}const Gc=$t(Zc,[["render",Hc],["__scopeId","data-v-b64e33c2"]]),Uc={class:"image"},Yc=["srcset"],Xc={__name:"GraphNodeImage",props:{node:Object},setup(t,{expose:e}){const n=t,r=un(),i=ut(null),o=Q(()=>r.getMediaUrl(n.node.file));return e({el:i}),(a,s)=>(H(),J("div",Uc,[tt("img",{ref_key:"el",ref:i,srcset:`${o.value} 2x`,draggable:"false"},null,8,Yc)]))}},Wc=$t(Xc,[["__scopeId","data-v-7cbb6b98"]]),Kc={__name:"GraphNodeNote",props:{node:Object,occurances:Array},setup(t,{expose:e}){const n=t,r=un(),i=ut(null),o=ut(null);Q(()=>r.localize(n.node.text));const a=Q(()=>{if(!(n.occurances.length!==1||n.occurances[0].color==null))return{"--graph-accent":`var(--${n.occurances[0].color})`}});return De(()=>{o.value=mc(i)}),e({el:i}),(s,f)=>(H(),J("div",{class:"note",ref_key:"el",ref:i,style:Ft({...a.value,width:o.value})},null,4))}},jc=$t(Kc,[["__scopeId","data-v-4fff4b26"]]),hi={default:Gc,entity:Fc,graph:Ki,image:Wc,note:jc};function Qc(t){return hi[t]??hi.default}var Jc=4,tf=.001,ef=1e-7,nf=10,tn=11,$n=1/(tn-1),rf=typeof Float32Array=="function";function ji(t,e){return 1-3*e+3*t}function Qi(t,e){return 3*e-6*t}function Ji(t){return 3*t}function Gn(t,e,n){return((ji(e,n)*t+Qi(e,n))*t+Ji(e))*t}function to(t,e,n){return 3*ji(e,n)*t*t+2*Qi(e,n)*t+Ji(e)}function of(t,e,n,r,i){var o,a,s=0;do a=e+(n-e)/2,o=Gn(a,r,i)-t,o>0?n=a:e=a;while(Math.abs(o)>ef&&++s<nf);return a}function af(t,e,n,r){for(var i=0;i<Jc;++i){var o=to(e,n,r);if(o===0)return e;var a=Gn(e,n,r)-t;e-=a/o}return e}function sf(t){return t}var lf=function(e,n,r,i){if(!(0<=e&&e<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===n&&r===i)return sf;for(var o=rf?new Float32Array(tn):new Array(tn),a=0;a<tn;++a)o[a]=Gn(a*$n,e,r);function s(f){for(var l=0,u=1,h=tn-1;u!==h&&o[u]<=f;++u)l+=$n;--u;var d=(f-o[u])/(o[u+1]-o[u]),p=l+d*$n,b=to(p,e,r);return b>=tf?af(f,p,e,r):b===0?p:of(f,l,l+$n,e,r)}return function(l){return l===0?0:l===1?1:Gn(s(l),n,i)}};const uf=mi(lf);var Un={exports:{}};Un.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",i=1,o=2,a=9007199254740991,s="[object Arguments]",f="[object Array]",l="[object AsyncFunction]",u="[object Boolean]",h="[object Date]",d="[object Error]",p="[object Function]",b="[object GeneratorFunction]",v="[object Map]",_="[object Number]",m="[object Null]",N="[object Object]",x="[object Promise]",L="[object Proxy]",E="[object RegExp]",R="[object Set]",j="[object String]",X="[object Symbol]",G="[object Undefined]",O="[object WeakMap]",k="[object ArrayBuffer]",D="[object DataView]",I="[object Float32Array]",g="[object Float64Array]",z="[object Int8Array]",C="[object Int16Array]",M="[object Int32Array]",T="[object Uint8Array]",P="[object Uint8ClampedArray]",w="[object Uint16Array]",S="[object Uint32Array]",A=/[\\^$.*+?()[\]{}|]/g,V=/^\[object .+?Constructor\]$/,F=/^(?:0|[1-9]\d*)$/,B={};B[I]=B[g]=B[z]=B[C]=B[M]=B[T]=B[P]=B[w]=B[S]=!0,B[s]=B[f]=B[k]=B[u]=B[D]=B[h]=B[d]=B[p]=B[v]=B[_]=B[N]=B[E]=B[R]=B[j]=B[O]=!1;var Z=typeof je=="object"&&je&&je.Object===Object&&je,q=typeof self=="object"&&self&&self.Object===Object&&self,Y=Z||q||Function("return this")(),et=e&&!e.nodeType&&e,yt=et&&!0&&t&&!t.nodeType&&t,at=yt&&yt.exports===et,st=at&&Z.process,ot=function(){try{return st&&st.binding&&st.binding("util")}catch{}}(),it=ot&&ot.isTypedArray;function K(c,y){for(var $=-1,U=c==null?0:c.length,ft=0,rt=[];++$<U;){var vt=c[$];y(vt,$,c)&&(rt[ft++]=vt)}return rt}function ct(c,y){for(var $=-1,U=y.length,ft=c.length;++$<U;)c[ft+$]=y[$];return c}function nt(c,y){for(var $=-1,U=c==null?0:c.length;++$<U;)if(y(c[$],$,c))return!0;return!1}function Et(c,y){for(var $=-1,U=Array(c);++$<c;)U[$]=y($);return U}function zt(c){return function(y){return c(y)}}function mt(c,y){return c.has(y)}function St(c,y){return c==null?void 0:c[y]}function kt(c){var y=-1,$=Array(c.size);return c.forEach(function(U,ft){$[++y]=[ft,U]}),$}function pt(c,y){return function($){return c(y($))}}function ht(c){var y=-1,$=Array(c.size);return c.forEach(function(U){$[++y]=U}),$}var Lt=Array.prototype,Qt=Function.prototype,Pt=Object.prototype,_t=Y["__core-js_shared__"],Re=Qt.toString,Vt=Pt.hasOwnProperty,dn=function(){var c=/[^.]+$/.exec(_t&&_t.keys&&_t.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Fe=Pt.toString,pn=RegExp("^"+Re.call(Vt).replace(A,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bt=at?Y.Buffer:void 0,Ze=Y.Symbol,Ve=Y.Uint8Array,qe=Pt.propertyIsEnumerable,gn=Lt.splice,Jt=Ze?Ze.toStringTag:void 0,yn=Object.getOwnPropertySymbols,Jn=bt?bt.isBuffer:void 0,tr=pt(Object.keys,Object),He=ke(Y,"DataView"),_e=ke(Y,"Map"),xt=ke(Y,"Promise"),Dt=ke(Y,"Set"),qt=ke(Y,"WeakMap"),Bt=ke(Object,"create"),Nt=be(He),fe=be(_e),vn=be(xt),Ge=be(Dt),Ue=be(qt),Ir=Ze?Ze.prototype:void 0,er=Ir?Ir.valueOf:void 0;function xe(c){var y=-1,$=c==null?0:c.length;for(this.clear();++y<$;){var U=c[y];this.set(U[0],U[1])}}function io(){this.__data__=Bt?Bt(null):{},this.size=0}function oo(c){var y=this.has(c)&&delete this.__data__[c];return this.size-=y?1:0,y}function ao(c){var y=this.__data__;if(Bt){var $=y[c];return $===r?void 0:$}return Vt.call(y,c)?y[c]:void 0}function so(c){var y=this.__data__;return Bt?y[c]!==void 0:Vt.call(y,c)}function lo(c,y){var $=this.__data__;return this.size+=this.has(c)?0:1,$[c]=Bt&&y===void 0?r:y,this}xe.prototype.clear=io,xe.prototype.delete=oo,xe.prototype.get=ao,xe.prototype.has=so,xe.prototype.set=lo;function ie(c){var y=-1,$=c==null?0:c.length;for(this.clear();++y<$;){var U=c[y];this.set(U[0],U[1])}}function uo(){this.__data__=[],this.size=0}function co(c){var y=this.__data__,$=_n(y,c);if($<0)return!1;var U=y.length-1;return $==U?y.pop():gn.call(y,$,1),--this.size,!0}function fo(c){var y=this.__data__,$=_n(y,c);return $<0?void 0:y[$][1]}function ho(c){return _n(this.__data__,c)>-1}function po(c,y){var $=this.__data__,U=_n($,c);return U<0?(++this.size,$.push([c,y])):$[U][1]=y,this}ie.prototype.clear=uo,ie.prototype.delete=co,ie.prototype.get=fo,ie.prototype.has=ho,ie.prototype.set=po;function we(c){var y=-1,$=c==null?0:c.length;for(this.clear();++y<$;){var U=c[y];this.set(U[0],U[1])}}function go(){this.size=0,this.__data__={hash:new xe,map:new(_e||ie),string:new xe}}function yo(c){var y=xn(this,c).delete(c);return this.size-=y?1:0,y}function vo(c){return xn(this,c).get(c)}function mo(c){return xn(this,c).has(c)}function _o(c,y){var $=xn(this,c),U=$.size;return $.set(c,y),this.size+=$.size==U?0:1,this}we.prototype.clear=go,we.prototype.delete=yo,we.prototype.get=vo,we.prototype.has=mo,we.prototype.set=_o;function mn(c){var y=-1,$=c==null?0:c.length;for(this.__data__=new we;++y<$;)this.add(c[y])}function xo(c){return this.__data__.set(c,r),this}function wo(c){return this.__data__.has(c)}mn.prototype.add=mn.prototype.push=xo,mn.prototype.has=wo;function he(c){var y=this.__data__=new ie(c);this.size=y.size}function bo(){this.__data__=new ie,this.size=0}function Co(c){var y=this.__data__,$=y.delete(c);return this.size=y.size,$}function Lo(c){return this.__data__.get(c)}function Mo(c){return this.__data__.has(c)}function So(c,y){var $=this.__data__;if($ instanceof ie){var U=$.__data__;if(!_e||U.length<n-1)return U.push([c,y]),this.size=++$.size,this;$=this.__data__=new we(U)}return $.set(c,y),this.size=$.size,this}he.prototype.clear=bo,he.prototype.delete=Co,he.prototype.get=Lo,he.prototype.has=Mo,he.prototype.set=So;function Ao(c,y){var $=wn(c),U=!$&&Vo(c),ft=!$&&!U&&nr(c),rt=!$&&!U&&!ft&&Zr(c),vt=$||U||ft||rt,Ct=vt?Et(c.length,String):[],Mt=Ct.length;for(var gt in c)Vt.call(c,gt)&&!(vt&&(gt=="length"||ft&&(gt=="offset"||gt=="parent")||rt&&(gt=="buffer"||gt=="byteLength"||gt=="byteOffset")||Oo(gt,Mt)))&&Ct.push(gt);return Ct}function _n(c,y){for(var $=c.length;$--;)if(Or(c[$][0],y))return $;return-1}function $o(c,y,$){var U=y(c);return wn(c)?U:ct(U,$(c))}function Ye(c){return c==null?c===void 0?G:m:Jt&&Jt in Object(c)?Po(c):Zo(c)}function Er(c){return Xe(c)&&Ye(c)==s}function zr(c,y,$,U,ft){return c===y?!0:c==null||y==null||!Xe(c)&&!Xe(y)?c!==c&&y!==y:ko(c,y,$,U,zr,ft)}function ko(c,y,$,U,ft,rt){var vt=wn(c),Ct=wn(y),Mt=vt?f:de(c),gt=Ct?f:de(y);Mt=Mt==s?N:Mt,gt=gt==s?N:gt;var Rt=Mt==N,Xt=gt==N,At=Mt==gt;if(At&&nr(c)){if(!nr(y))return!1;vt=!0,Rt=!1}if(At&&!Rt)return rt||(rt=new he),vt||Zr(c)?Pr(c,y,$,U,ft,rt):Eo(c,y,Mt,$,U,ft,rt);if(!($&i)){var Ht=Rt&&Vt.call(c,"__wrapped__"),Gt=Xt&&Vt.call(y,"__wrapped__");if(Ht||Gt){var pe=Ht?c.value():c,oe=Gt?y.value():y;return rt||(rt=new he),ft(pe,oe,$,U,rt)}}return At?(rt||(rt=new he),zo(c,y,$,U,ft,rt)):!1}function No(c){if(!Fr(c)||Ro(c))return!1;var y=Br(c)?pn:V;return y.test(be(c))}function To(c){return Xe(c)&&Rr(c.length)&&!!B[Ye(c)]}function Io(c){if(!Fo(c))return tr(c);var y=[];for(var $ in Object(c))Vt.call(c,$)&&$!="constructor"&&y.push($);return y}function Pr(c,y,$,U,ft,rt){var vt=$&i,Ct=c.length,Mt=y.length;if(Ct!=Mt&&!(vt&&Mt>Ct))return!1;var gt=rt.get(c);if(gt&&rt.get(y))return gt==y;var Rt=-1,Xt=!0,At=$&o?new mn:void 0;for(rt.set(c,y),rt.set(y,c);++Rt<Ct;){var Ht=c[Rt],Gt=y[Rt];if(U)var pe=vt?U(Gt,Ht,Rt,y,c,rt):U(Ht,Gt,Rt,c,y,rt);if(pe!==void 0){if(pe)continue;Xt=!1;break}if(At){if(!nt(y,function(oe,Ce){if(!mt(At,Ce)&&(Ht===oe||ft(Ht,oe,$,U,rt)))return At.push(Ce)})){Xt=!1;break}}else if(!(Ht===Gt||ft(Ht,Gt,$,U,rt))){Xt=!1;break}}return rt.delete(c),rt.delete(y),Xt}function Eo(c,y,$,U,ft,rt,vt){switch($){case D:if(c.byteLength!=y.byteLength||c.byteOffset!=y.byteOffset)return!1;c=c.buffer,y=y.buffer;case k:return!(c.byteLength!=y.byteLength||!rt(new Ve(c),new Ve(y)));case u:case h:case _:return Or(+c,+y);case d:return c.name==y.name&&c.message==y.message;case E:case j:return c==y+"";case v:var Ct=kt;case R:var Mt=U&i;if(Ct||(Ct=ht),c.size!=y.size&&!Mt)return!1;var gt=vt.get(c);if(gt)return gt==y;U|=o,vt.set(c,y);var Rt=Pr(Ct(c),Ct(y),U,ft,rt,vt);return vt.delete(c),Rt;case X:if(er)return er.call(c)==er.call(y)}return!1}function zo(c,y,$,U,ft,rt){var vt=$&i,Ct=Dr(c),Mt=Ct.length,gt=Dr(y),Rt=gt.length;if(Mt!=Rt&&!vt)return!1;for(var Xt=Mt;Xt--;){var At=Ct[Xt];if(!(vt?At in y:Vt.call(y,At)))return!1}var Ht=rt.get(c);if(Ht&&rt.get(y))return Ht==y;var Gt=!0;rt.set(c,y),rt.set(y,c);for(var pe=vt;++Xt<Mt;){At=Ct[Xt];var oe=c[At],Ce=y[At];if(U)var Vr=vt?U(Ce,oe,At,y,c,rt):U(oe,Ce,At,c,y,rt);if(!(Vr===void 0?oe===Ce||ft(oe,Ce,$,U,rt):Vr)){Gt=!1;break}pe||(pe=At=="constructor")}if(Gt&&!pe){var bn=c.constructor,Cn=y.constructor;bn!=Cn&&"constructor"in c&&"constructor"in y&&!(typeof bn=="function"&&bn instanceof bn&&typeof Cn=="function"&&Cn instanceof Cn)&&(Gt=!1)}return rt.delete(c),rt.delete(y),Gt}function Dr(c){return $o(c,Go,Do)}function xn(c,y){var $=c.__data__;return Bo(y)?$[typeof y=="string"?"string":"hash"]:$.map}function ke(c,y){var $=St(c,y);return No($)?$:void 0}function Po(c){var y=Vt.call(c,Jt),$=c[Jt];try{c[Jt]=void 0;var U=!0}catch{}var ft=Fe.call(c);return U&&(y?c[Jt]=$:delete c[Jt]),ft}var Do=yn?function(c){return c==null?[]:(c=Object(c),K(yn(c),function(y){return qe.call(c,y)}))}:Uo,de=Ye;(He&&de(new He(new ArrayBuffer(1)))!=D||_e&&de(new _e)!=v||xt&&de(xt.resolve())!=x||Dt&&de(new Dt)!=R||qt&&de(new qt)!=O)&&(de=function(c){var y=Ye(c),$=y==N?c.constructor:void 0,U=$?be($):"";if(U)switch(U){case Nt:return D;case fe:return v;case vn:return x;case Ge:return R;case Ue:return O}return y});function Oo(c,y){return y=y??a,!!y&&(typeof c=="number"||F.test(c))&&c>-1&&c%1==0&&c<y}function Bo(c){var y=typeof c;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?c!=="__proto__":c===null}function Ro(c){return!!dn&&dn in c}function Fo(c){var y=c&&c.constructor,$=typeof y=="function"&&y.prototype||Pt;return c===$}function Zo(c){return Fe.call(c)}function be(c){if(c!=null){try{return Re.call(c)}catch{}try{return c+""}catch{}}return""}function Or(c,y){return c===y||c!==c&&y!==y}var Vo=Er(function(){return arguments}())?Er:function(c){return Xe(c)&&Vt.call(c,"callee")&&!qe.call(c,"callee")},wn=Array.isArray;function qo(c){return c!=null&&Rr(c.length)&&!Br(c)}var nr=Jn||Yo;function Ho(c,y){return zr(c,y)}function Br(c){if(!Fr(c))return!1;var y=Ye(c);return y==p||y==b||y==l||y==L}function Rr(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=a}function Fr(c){var y=typeof c;return c!=null&&(y=="object"||y=="function")}function Xe(c){return c!=null&&typeof c=="object"}var Zr=it?zt(it):To;function Go(c){return qo(c)?Ao(c):Io(c)}function Uo(){return[]}function Yo(){return!1}t.exports=Ho})(Un,Un.exports);var cf=Un.exports;const ff=mi(cf),nn=+getComputedStyle(document.documentElement).getPropertyValue("--transition").replace(/(.+)ms/,(t,e)=>e).replace(/(.+)s/,(t,e)=>e*1e3),yr=+getComputedStyle(document.documentElement).getPropertyValue("--spacing").replace(/px$/,""),hf={__name:"BaseInterpolate",props:{props:Object,duration:{type:Number,default:nn},delay:{type:Number,default:0}},setup(t){const e=t,n=ut(e.props);let r=null;const i=uf(.25,.1,.25,1);let o=Fn(null,e.props);se(()=>e.props,(s,f)=>{ff(s,f)||(o=Fn(n.value,e.props),r=null,requestAnimationFrame(a))},{deep:!1});function a(s){if(e.duration===0)return n.value={...e.props};r===null&&(r=s);const f=Math.max(Math.min((s-r-e.delay)/e.duration,1),0);n.value={...o(i(f))},f<1&&requestAnimationFrame(a)}return(s,f)=>vi(s.$slots,"default",Qo(Jo(n.value)))}},df={class:"node-wrapper"},pf={__name:"GraphNode",props:{id:String,view:String,position:Object,graph:[String,Boolean]},setup(t){const e=t,n=_r();Oe();const r=Yt(),i=Be(),o=Tr(),a=xr(),s=ce(),f=me(),l=cn(),u=_i(),h=vc(),d=Yn(),p=ut(null),b=Q(()=>r.data.nodes[e.id]),v=Q(()=>({transform:`translate(${e.position.x+i.offset.x}px, ${e.position.y+i.offset.y}px) translate(-50%, -50%)`})),_=Q(()=>Qc(b.value.type)),m=Q(()=>p.value.el??p.value.$el),N=Q(()=>r.graphs.filter(k=>Object.prototype.hasOwnProperty.call(k.allocations??{},e.id))),x=Q(()=>b.value.inheritDisplay?o.inheritStateFromNeighbor(e.id):o.states[e.id]),L=Q(()=>{var k,D,I,g;return(g=(I=(D=(k=r.data.nodes)==null?void 0:k[e.graph])==null?void 0:D.allocations)==null?void 0:I[e.id])==null?void 0:g.locked}),E=new ResizeObserver(k=>{for(const D of k)D.contentRect});function R(k){!f.edit||k.metaKey?n.push({name:"graph",params:{type:b.value.type,id:e.id}}):h.connecting?h.close(e.id):d.mode==="add-edge"?h.open(e.id,"→",e.graph):d.mode==="display-blur"?d.setDisplay(e.id,"hide",e.graph):d.mode==="display-default"?d.setDisplay(e.id,"default",e.graph):d.mode==="display-highlight"?d.setDisplay(e.id,"highlight",e.graph):d.mode==="display-unset"&&d.setDisplay(e.id,null,e.graph)}function j(){f.edit&&u.open(e.id,"node")}function X(k){if(!f.edit||e.view!=="diagram"||k.button!==0||L.value)return;k.stopPropagation();const D={x:k.x,y:k.y},I={x:r.data.nodes[e.graph].allocations[e.id].x,y:r.data.nodes[e.graph].allocations[e.id].y},g=new AbortController;window.addEventListener("mousemove",C=>{const M={x:(C.x-D.x)/i.transform.k,y:(C.y-D.y)/i.transform.k},T=C.shiftKey?.5:20,P=Math.round((I.x+M.x)/T)*T,w=Math.round((I.y+M.y)/T)*T;r.data.nodes[e.graph].allocations[e.id].x=P,r.data.nodes[e.graph].allocations[e.id].y=w},{signal:g.signal}),window.addEventListener("mouseup",()=>{z()},{once:!0,signal:g.signal}),window.addEventListener("keydown",C=>{C.key==="Escape"&&z()},{signal:g.signal});function z(){g.abort()}}function G(k,D){return k?[D]:[]}function O(k){f.edit&&(k.preventDefault(),k.stopPropagation(),l.open(Qn,[...G(e.view==="diagram",{label:"delete",action:()=>{r.deleteNode(e.id,e.graph)}}),{label:"edit",action:()=>{u.open(e.id,"node")}},...G(e.view==="diagram",{label:"→",action:()=>{e.view==="diagram"&&h.open(e.id,"→",e.graph)}}),...G(e.view==="diagram",{label:L.value?"unlock":"lock",action:()=>{r.data.nodes[e.graph].allocations[e.id].locked=!L.value}}),{label:"log",action:()=>{console.log(e.id,r.data.nodes[e.graph].allocations[e.id])}}],{x:k.x,y:k.y}))}return se(()=>[e.position.y,e.position.x],()=>{i.nodes[e.id]={...i.nodes[e.id],x:e.position.x,y:e.position.y}}),De(()=>{E.observe(m.value)}),mr(()=>{m.value!=null&&E.unobserve(m.value),delete i.nodes[e.id]}),(k,D)=>{var I,g;return H(),J("div",df,[tt("div",{style:Ft(v.value)},[(H(),wt(ta(_.value),{ref_key:"componentRef",ref:p,id:t.id,class:Ut(["node",[x.value,t.view,`mode-${W(d).mode}`,{"user-active":!W(a).inactivityShort||!W(s).playing,edit:W(f).edit,locked:L.value,exact:(g=(I=W(o).exactMarker)==null?void 0:I.states)==null?void 0:g.hasOwnProperty(t.id)}]]),"no-style":v.value,node:b.value,occurances:N.value,position:t.position,onClick:R,onDblclick:ve(j,["stop"]),onMousedown:X,onContextmenu:O},null,40,["id","class","no-style","node","occurances","position"]))],4)])}}},gf=$t(pf,[["__scopeId","data-v-3a90b1e0"]]);function di(t,e,n,r,i,o,a,s,f){const l=i+a,u=o+s,h=i+f,d=o+f,p=i+a-f,b=o+s-f,v=[[i,b,i,d,i,o],[h,o,p,o,l,o],[l,d,l,b,l,u],[p,u,h,u,i,u]],_=[[h,d,Math.PI,Math.PI*1.5],[p,d,Math.PI*1.5,Math.PI*2],[p,b,0,Math.PI*.5],[h,b,Math.PI*.5,Math.PI]];let m=[];return v.forEach((N,x)=>{const[L,E,R,j]=N,[X,G,O,k]=_[x];_f(X,G,f,t,e,n,r).filter(I=>{const g=vf(mf(X,G,I[0],I[1]));return g>O&&g<k}).forEach(I=>m.push({point:I,anchor:x*2+1}));const D=yf(t,e,n,r,L,E,R,j);D&&m.push({point:D,anchor:x*2})}),m}function yf(t,e,n,r,i,o,a,s){const f=(s-o)*(n-t)-(a-i)*(r-e),l=(a-i)*(e-o)-(s-o)*(t-i),u=(n-t)*(e-o)-(r-e)*(t-i);if(f===0)return void 0;const h=l/f,d=u/f;if(h>=0&&h<=1&&d>=0&&d<=1)return[t+h*(n-t),e+h*(r-e)]}function vf(t){return t-Math.PI*2*Math.floor(t/(Math.PI*2))}function mf(t,e,n,r){return Math.atan2(r-e,n-t)}function _f(t,e,n,r,i,o,a){var s,f,l,u,h,d,p,b,v=[o-r,a-i],_=[r-t,i-e];return s=v[0]*_[0]+v[1]*_[1],f=2*(v[0]*v[0]+v[1]*v[1]),s*=-2,l=Math.sqrt(s*s-2*f*(_[0]*_[0]+_[1]*_[1]-n*n)),isNaN(l)?[]:(u=(s-l)/f,h=(s+l)/f,p=[],b=[],d=[],u<=1&&u>=0&&(p[0]=r+v[0]*u,p[1]=i+v[1]*u,d[0]=p),h<=1&&h>=0&&(b[0]=r+v[0]*h,b[1]=i+v[1]*h,d[d.length]=b),d)}var eo={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.pathDataLength=n()})(je,function(){var e={};const{PI:n,sin:r,cos:i,acos:o,abs:a,sqrt:s,log:f,tan:l}=Math,u={wa12:[[.24914704581340288,.12523340851146894],[.23349253653835458,.3678314989981802],[.20316742672306584,.5873179542866175],[.16007832854334633,.7699026741943047],[.10693932599531818,.9041172563704748],[.04717533638650846,.9815606342467192]],wa24:[[.1279381953467522,.0640568928626056],[.1258374563468283,.1911188674736163],[.1216704729278034,.3150426796961634],[.1155056680537256,.4337935076260451],[.1074442701159656,.5454214713888396],[.0976186521041139,.6480936519369755],[.0861901615319533,.7401241915785544],[.0733464814110803,.820001985973903],[.0592985849154368,.8864155270044011],[.0442774388174198,.9382745520027328],[.0285313886289337,.9747285559713095],[.0123412297999872,.9951872199970213]]};function h(x,L=.5){const E=(G,O,k)=>({x:(O.x-G.x)*k+G.x,y:(O.y-G.y)*k+G.y}),R=(G,O,k,D,I)=>{let g=1-I;return{x:g**3*G.x+3*g**2*I*O.x+3*g*I**2*k.x+I**3*D.x,y:g**3*G.y+3*g**2*I*O.y+3*g*I**2*k.y+I**3*D.y}},j=(G,O,k,D)=>{let I=1-D;return{x:I*I*G.x+2*I*D*O.x+D**2*k.x,y:I*I*G.y+2*I*D*O.y+D**2*k.y}};let X;return x.length===4?X=R(x[0],x[1],x[2],x[3],L):x.length===3?X=j(x[0],x[1],x[2],L):X=E(x[0],x[1],L),X}function d(x,L){this.totalLength=x||0,this.segments=L||[]}d.prototype.getPointAtLength=function(x=0){let{segments:L,totalLength:E}=this,R=!1,j={x:0,y:0},X=0;if(x===0)return L[0].points[0];if(+x.toFixed(3)==+E.toFixed(3)){let{points:G}=L[L.length-1];return j=G[G.length-1],j}for(let G=0;G<L.length&&!R;G++){let O=L[G],{type:k,lengths:D,points:I,total:g}=O,z=D[D.length-1],C=1/(D.length-1);if(z>x){R=!0;let M=!1,T;switch(k){case"L":T=z-x,X=1-1/g*T,j=h(I,X);break;case"A":T=z-x,X=1-1/g*T;let{cx:P,cy:w,deltaAngle:S}=O.points[1],A=-S*X,V=Math.cos(A),F=Math.sin(A);p0=O.points[0],j={x:V*(p0.x-P)+F*(p0.y-w)+P,y:V*(p0.y-w)-F*(p0.x-P)+w};break;case"C":case"Q":let B=_([I[0],I[1]])+_([I[1],I[2]]),Z=k==="C"?_([I[2],I[3]]):0,q=_([I[0],I[I.length-1]]);if(B+Z===q)T=z-x,X=1-1/g*T,j=X<=1?h([I[0],I[2]],X):I[I.length-1];else for(let Y=0;Y<D.length&&!M;Y++){let et=D[Y],yt=Y>0?D[Y-1]:D[Y];if(et>x){let at=C*Y,st=et-yt,ot=et-x,it=1/st*ot;X=at-C*it,M=!0,j=h(I,X)}}break}j.index=O.index,j.t=X}}return j};function p(x,L="medium",E=!1){const R=M=>{let T=0;for(let P=0;P<M.length;P++){let w=M[P].x,S=M[P===M.length-1?0:P+1].y,A=M[P===M.length-1?0:P+1].x,V=M[P].y;T+=w*S*.5-A*V*.5}return Math.abs(T)<.1};let j=L==="high"?4:L==="medium"?2:1,X=L==="high",G=L==="medium"?24:12,O=[12,24,36,48,60,64,72,96],k=L==="low"?10:12,D=L==="low"?16:L==="medium"?24:36,I=Array.isArray(x)?x:m(x,{arcAccuracy:j}),g=0,z=I[0],C={totalLength:0,segments:[]};for(let M=1;M<I.length;M++){let P=I[M-1].values,w=P.length,S={x:P[w-2],y:P[w-1]},A=I[M],{type:V,values:F}=A,B=F.length,Z={x:F[B-2],y:F[B-1]},q,Y,et,yt,at={lengths:[],points:[],index:M,total:0,type:V};switch(V){case"M":z=I[M],q=0;break;case"Z":case"z":case"L":V.toLowerCase()==="z"&&(Z={x:z.values[0],y:z.values[1]},at.type="L"),q=_([S,Z]),at.points.push(S,Z);break;case"A":Z={x:A.values[5],y:A.values[6]};let st=A.values[3],ot=A.values[4],it=N(S.x,S.y,A.values[0],A.values[1],A.values[2],st,ot,Z.x,Z.y),{cx:K,cy:ct,rx:nt,ry:Et,startAngle:zt,deltaAngle:mt}=it;q=2*Math.PI*nt*(1/360*Math.abs(mt*180/n)),at.points=[S,{startAngle:zt,deltaAngle:mt,cx:K,cy:ct},Z];break;case"C":case"Q":at.lengths.push(g),Y={x:F[0],y:F[1]},et=V==="C"?{x:F[2],y:F[3]}:Y;let St=V==="C"?[S,Y,et,Z]:[S,Y,Z],kt=V==="Q"?k:D,pt=R(St);if(pt){St=[S,Z],q=_(St),at.type="L",at.points.push(S,Z);break}else if(q=X?_(St,1,O[0]):_(St,1,G),V==="C"&&X){let ht,Lt=!1,Qt=.05,Pt=0;for(let _t=1;_t<O.length&&!Lt;_t++)lgNew=O[_t],ht=_(St,1,lgNew),Pt=a(ht-q),Pt<Qt||_t===O.length-1?(G=O[_t-1],Lt=!0):q=ht}if(!E&&!pt){for(let ht=1;ht<kt;ht++)yt=1/kt*ht,at.lengths.push(_(St,yt,G)+g);at.points=St}break;default:q=0;break}E||(at.lengths.push(q+g),at.total=q),g+=q,V!=="M"&&C.segments.push(at),C.totalLength=g}return E?g:new d(C.totalLength,C.segments)}function b(x,L=0){let E=m(x);return v(E,L)}function v(x,L=0){return p(x,L,!0)}function _(x,L=1,E=0){const R=(O,k)=>s((k.x-O.x)*(k.x-O.x)+(k.y-O.y)*(k.y-O.y)),j=(O,k,D,I,g,z)=>{if(g===0)return 0;const C=(S,A=-1,V=1)=>{let F=[],B,Z,q,Y,et,yt,at,st;const ot=S+1>>1;q=.5*(V+A),Y=.5*(V-A);for(let it=ot-1;it>=0;it--){Z=i(n*(it+.75)/(S+.5));do{st=1,at=0;for(let K=0;K<S;K++)yt=at,at=st,st=((2*K+1)*Z*at-K*yt)/(K+1);et=S*(Z*st-at)/(Z*Z-1),B=Z,Z=B-st/et}while(a(Z-B)>1e-14);F.push([2*Y/((1-Z*Z)*et*et),q+Y*Z])}return F},M=(S,A,V,F,B)=>{let Z=-3*A+9*V-9*F+3*B,q=S*Z+6*A-12*V+6*F;return S*q-3*A+3*V};g=g>1?1:g<0?0:g;let T=g/2;u[z]||(u[z]=C(z));const P=u[z];let w=0;for(let S=0,A=P.length;S<A;S++){let[V,F]=[P[S][0],P[S][1]],B=T*F,Z=B+T,q=-B+T,Y=M(q,O.x,k.x,D.x,I.x),et=M(q,O.y,k.y,D.y,I.y),yt=Y*Y+et*et,at=M(Z,O.x,k.x,D.x,I.x),st=M(Z,O.y,k.y,D.y,I.y),ot=at*at+st*st;w+=V*s(yt)+V*s(ot)}return T*w},X=(O,k,D,I,g=!1)=>{if(I===0)return 0;if(g){let Y=R(O,k)+R(k,D),et=R(O,D);if(Y===et)return et}let z,C,M,T,P,w,S,A,V;A=k.x*2,V=k.y*2,T=O.x-A+D.x,S=O.y-V+D.y,P=A-2*O.x,w=V-2*O.y,z=4*(T*T+S*S),C=4*(T*P+S*w),M=P*P+w*w;const F=C/(2*z),B=M/z,Z=I+F,q=B-F**2;return s(z)/2*(Z*s(Z**2+q)-F*s(F**2+q)+q*f((Z+s(Z**2+q))/(F+s(F**2+q))))};let G;return x.length===4?G=j(x[0],x[1],x[2],x[3],L,E):x.length===3?G=X(x[0],x[1],x[2],L):G=R(x[0],x[1]),G}function m(x,L={}){x=x.replace(/[\n\r\t|,]/g," ").trim().replace(/(\d)-/g,"$1 -").replace(/(\.)(?=(\d+\.\d+)+)(\d+)/g,"$1$3 ");let E=[],R=/([mlcqazvhst])([^mlcqazvhst]*)/gi,j=x.match(R),X={m:2,a:7,c:6,h:1,l:2,q:4,s:4,t:2,v:1,z:0};L={toAbsolute:!0,toLonghands:!0,arcToCubic:!1,arcAccuracy:4,...L};let{toAbsolute:G,toLonghands:O,arcToCubic:k,arcAccuracy:D}=L,I=/[a]/gi.test(x),g=O?/[vhst]/gi.test(x):!1,z=G?/[lcqamts]/g.test(x.substring(1,x.length-1)):!1,C,M,T,P,w;for(let A=0;A<j.length;A++){let V=j[A],F=V.substring(0,1),B=F.toLowerCase(),Z=F.toUpperCase(),q=F===B,Y=X[B],et=V.substring(1,V.length).trim().split(" ").filter(Boolean);if(B==="a"&&et.length!=X.a){let ot=0,it=[];for(let K=0;K<et.length;K++){let ct=et[K];if(ot>=Y&&(ot=0),(ot===3||ot===4)&&ct.length>1){let nt=ot===3?ct.substring(0,1):"",Et=ot===3?ct.substring(1,2):ct.substring(0,1),zt=ot===3?ct.substring(2):ct.substring(1),mt=[nt,Et,zt].filter(Boolean);it.push(mt),ot+=mt.length}else it.push(ct),ot++}et=it.flat().filter(Boolean)}et=et.map(Number);let yt=et.length>Y,at=yt?et.slice(0,Y):et,st=[{type:F,values:at}];if(yt){let ot=B==="m"?q?"l":"L":F;for(let it=Y;it<et.length;it+=Y){let K=et.slice(it,it+Y);st.push({type:ot,values:K})}}if(!z&&!g&&!I)st.forEach(ot=>{E.push(ot)});else{A===0&&(C=et[0],M=et[1],T=C,P=M,w={x:et[0],y:et[1]});let ot=st[0].type;Z=ot.toUpperCase(),q=!!(ot.toLowerCase()===ot&&E.length);for(let it=0;it<st.length;it++){let K=st[it],ct=K.type,nt=K.values,Et=nt.length,mt=(st[it-1]?st[it-1]:A>0&&E[E.length-1]?E[E.length-1]:st[it]).values,St=mt.length;if(q=st.length>1?ct.toLowerCase()===ct&&E.length:q,q)switch(K.type=st.length>1?ct.toUpperCase():Z,B){case"a":K.values=[nt[0],nt[1],nt[2],nt[3],nt[4],nt[5]+C,nt[6]+M];break;case"h":case"v":K.values=ct==="h"?[nt[0]+C]:[nt[0]+M];break;case"m":case"l":case"t":ct==="m"&&(w={x:nt[0]+C,y:nt[1]+M}),K.values=[nt[0]+C,nt[1]+M];break;case"c":K.values=[nt[0]+C,nt[1]+M,nt[2]+C,nt[3]+M,nt[4]+C,nt[5]+M];break;case"q":case"s":K.values=[nt[0]+C,nt[1]+M,nt[2]+C,nt[3]+M];break;case"z":case"Z":T=w.x,P=w.y;break}else C=0,M=0;if(g){let pt,ht,Lt,Qt,Pt,_t;K.type==="H"||K.type==="V"?(K.values=K.type==="H"?[K.values[0],P]:[T,K.values[0]],K.type="L"):(K.type==="T"||K.type==="S")&&([pt,ht]=[mt[0],mt[1]],[Pt,_t]=St>2?[mt[2],mt[3]]:[mt[0],mt[1]],Lt=K.type==="T"?T*2-pt:T*2-Pt,Qt=K.type==="T"?P*2-ht:P*2-_t,K.values=[Lt,Qt,K.values].flat(),K.type=K.type==="T"?"Q":"C")}let kt=!1;I&&K.type==="A"?(p0={x:T,y:P},B==="a"&&(kt=K.values[0]!==K.values[1],kt||k?S(p0,K.values,D).forEach(ht=>{E.push(ht)}):E.push(K))):E.push(K),T=Et>1?nt[Et-2]+C:B==="h"?nt[0]+C:T,P=Et>1?nt[Et-1]+M:B==="v"?nt[0]+M:P,C=T,M=P}}}return E[0].type="M",E;function S(A,V,F=1){const B=n*2;let[Z,q,Y,et,yt,at,st]=V;if(Z===0||q===0)return[];let ot=Y?Y*B/360:0,it=ot?r(ot):0,K=ot?i(ot):1,ct=K*(A.x-at)/2+it*(A.y-st)/2,nt=-it*(A.x-at)/2+K*(A.y-st)/2;if(ct===0&&nt===0)return[];Z=a(Z),q=a(q);let Et=ct*ct/(Z*Z)+nt*nt/(q*q);if(Et>1){let xt=s(Et);Z*=xt,q*=xt}let zt=Z*Z,mt=Z===q?zt:q*q,St=ct*ct,kt=nt*nt,pt=zt*mt-zt*kt-mt*St;pt<=0?pt=0:(pt/=zt*kt+mt*St,pt=s(pt)*(et===yt?-1:1));let ht=pt?pt*Z/q*nt:0,Lt=pt?pt*-q/Z*ct:0,Qt=K*ht-it*Lt+(A.x+at)/2,Pt=it*ht+K*Lt+(A.y+st)/2,_t=(ct-ht)/Z,Re=(nt-Lt)/q,Vt=(-ct-ht)/Z,dn=(-nt-Lt)/q;const Fe=(xt,Dt,qt,Bt)=>{let Nt=+(xt*qt+Dt*Bt).toFixed(9);return Nt===1||Nt===-1?Nt===1?0:n:(Nt=Nt>1?1:Nt<-1?-1:Nt,(xt*Bt-Dt*qt<0?-1:1)*o(Nt))};let pn=Fe(1,0,_t,Re),bt=Fe(_t,Re,Vt,dn);yt===0&&bt>0?bt-=n*2:yt===1&&bt<0&&(bt+=n*2);let Ve=+(a(bt)/(B/4)).toFixed(0)*F;bt/=Ve;let qe=[];const gn=1.5707963267948966,Jt=.551785;let yn=bt===gn?Jt:bt===-gn?-Jt:4/3*l(bt/4),Jn=bt?i(bt):1,tr=bt?r(bt):0,He="C";const _e=(xt,Dt,qt,Bt,Nt)=>{let fe=xt!=Dt?i(xt):Bt,vn=xt!=Dt?r(xt):Nt,Ge=i(xt+Dt),Ue=r(xt+Dt);return[{x:fe-vn*qt,y:vn+fe*qt},{x:Ge+Ue*qt,y:Ue-Ge*qt},{x:Ge,y:Ue}]};for(let xt=0;xt<Ve;xt++){let Dt={type:He,values:[]};_e(pn,bt,yn,Jn,tr).forEach(Bt=>{let Nt=Bt.x*Z,fe=Bt.y*q;Dt.values.push(K*Nt-it*fe+Qt,it*Nt+K*fe+Pt)}),qe.push(Dt),pn+=bt}return qe}}function N(x,L,E,R,j,X,G,O,k){const D=(kt,pt,ht,Lt)=>{let Qt=kt*ht+pt*Lt,Pt=Math.sqrt((kt*kt+pt*pt)*(ht*ht+Lt*Lt)),_t=Math.acos(Qt/Pt);return kt*Lt-pt*ht<0&&(_t=-_t),_t};let I=+j*Math.PI/180,g,z,C,M,T,w=Math.PI*2;if(E<0&&(E=-E),R<0&&(R=-R),E==0||R==0)throw Error("rx and ry can not be 0");let S=Math.sin(I),A=Math.cos(I),V=(x-O)/2,F=(L-k)/2,B=(x+O)/2,Z=(L+k)/2,q=A*V+S*F,Y=A*F-S*V,et=q*q/(E*E)+Y*Y/(R*R);et>1&&(E=E*Math.sqrt(et),R=R*Math.sqrt(et));let yt=E*R,at=E*Y,st=R*q,ot=at*at+st*st;ot||console.log("start point can not be same as end point");let it=Math.sqrt(Math.abs((yt*yt-ot)/ot));X==G&&(it=-it);let K=it*at/R,ct=-it*st/E;g=A*K-S*ct+B,z=S*K+A*ct+Z;let nt=(q-K)/E,Et=(q+K)/E,zt=(Y-ct)/R,mt=(Y+ct)/R;return C=D(1,0,nt,zt),M=D(nt,zt,-Et,-mt),M>w?M-=w:M<0&&(M+=w),(G==!1||G==0)&&(M-=w),T=C+M,T>w?T-=w:T<0&&(T+=w),{cx:g,cy:z,rx:E,ry:R,startAngle:C,deltaAngle:M,endAngle:T,clockwise:G==!0||G==1}}return e.getPathLengthLookup=p,e.getPathLengthFromD=b,e.getPathDataLength=v,e.getLength=_,e.parsePathDataNormalized=m,e.svgArcToCenterParam=N,e})})(eo);var xf=eo.exports;const wf=["id"],bf=["id"],Cf=["d"],Lf=["d","marker-end","marker-start"],Mf=["x","y"],Sf=["x","y"],Af={__name:"GraphEdge",props:{edge:Object,view:String},setup(t){const e=Be(),n=Tr(),r=xr(),i=ce(),o=Yt(),a=me(),s=_i(),f=cn(),l=Oe(),u=t,h=Q(()=>l.params.type!=="graph"),d=Q(()=>e.nodes[u.edge.nodes[0]]),p=Q(()=>e.nodes[u.edge.nodes[1]]),b=Q(()=>{var D;const k=(D=o.data.nodes[u.edge.graph])==null?void 0:D.color;return{"--graph-accent":k?`var(--${k})`:null}}),v=Q(()=>n.inheritStateFromNodes(u.edge.nodes)),_=Q(()=>{if(d.value==null||p.value==null)return;const k=yr,D=yr,I=d.value.width+k,g=d.value.height+k,z=p.value.width+k,C=p.value.height+k,M=di(d.value.x,d.value.y,p.value.x,p.value.y,d.value.x-I/2,d.value.y-g/2,I,g,Math.min(D,g/2-.1))[0],T=di(d.value.x,d.value.y,p.value.x,p.value.y,p.value.x-z/2,p.value.y-C/2,z,C,Math.min(D,C/2-.1))[0];if(M==null||T==null)return;const P={x:M.point[0]+e.offset.x,y:M.point[1]+e.offset.y},w={x:T.point[0]+e.offset.x,y:T.point[1]+e.offset.y},S={x:(P.x+w.x)/2,y:(P.y+w.y)/2};if(h.value)return[P,S,S,w];const A=[{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}];return[P,{x:P.x+A[M.anchor].x*100,y:P.y+A[M.anchor].y*100},{x:w.x+A[T.anchor].x*100,y:w.y+A[T.anchor].y*100},w]}),m=Q(()=>{if(_.value!=null)return`M${_.value.map((k,D)=>`${D===1?"C":""}${k.x},${k.y}`).join(" ")}`}),N=Q(()=>{if(m.value==null)return[];let k=xf.getPathLengthLookup(m.value),D=k.totalLength;return k.getPointAtLength(D/2)}),x=Q(()=>u.edge.nodes.join("-")),L=Q(()=>`url('#marker-${x.value}')`),E=Q(()=>`url('#marker-${x.value}-alt')`),R=Q(()=>(u.edge.arrow==="→"||u.edge.arrow==="↔")&&L.value),j=Q(()=>(u.edge.arrow==="←"||u.edge.arrow==="↔")&&E.value);function X(k){if(!k.metaKey)return;k.stopPropagation(),k.preventDefault();const D=[null,"→","←","↔"],I=Math.max(D.indexOf(u.edge.arrow),0);o.data.edges.find(g=>g.id===u.edge.id).arrow=D[(I+1)%D.length]}function G(k){!a.edit||k.metaKey||s.open(u.edge.id,"edge")}function O(k){a.edit&&(k.preventDefault(),k.stopPropagation(),f.open(Qn,[{label:"delete",action:()=>{o.data.edges=o.data.edges.filter(D=>D.id!==u.edge.id)}},{label:"edit",action:()=>{s.open(u.edge.id,"edge")}}],{x:k.x,y:k.y}))}return(k,D)=>(H(),J("g",{class:Ut(["edge",[v.value,t.view,{"user-active":!W(r).inactivityShort||!W(i).playing}]]),style:Ft(b.value)},[tt("defs",null,[tt("marker",{id:`marker-${x.value}`,markerWidth:"10",markerHeight:"20",refX:"10",refY:"10",orient:"auto"},D[0]||(D[0]=[tt("path",{d:"M2,6.5 L10,10 L2,13.5"},null,-1)]),8,wf),tt("marker",{id:`marker-${x.value}-alt`,markerWidth:"10",markerHeight:"20",refX:"00",refY:"10",orient:"auto"},D[1]||(D[1]=[tt("path",{d:"M8,6.5 L0,10 L8,13.5"},null,-1)]),8,bf)]),lt(hf,{props:{d:m.value,...N.value},delay:0,duration:W(a).edit?0:W(nn)},{default:dt(I=>[W(a).edit?(H(),J("path",{key:0,class:"edit",d:I.d,onDblclick:ve(G,["stop"]),onContextmenu:O,onClick:X},null,40,Cf)):ee("",!0),tt("path",{d:I.d,"marker-end":R.value,"marker-start":j.value},null,8,Lf),tt("text",{class:Ut(["shadow",{edit:W(a).edit}]),x:I.x,y:I.y,onDblclick:ve(G,["stop"]),onContextmenu:O,onClick:X},[lt(Pn,{text:t.edge.label},null,8,["text"])],42,Mf),tt("text",{x:I.x,y:I.y},[lt(Pn,{text:t.edge.label},null,8,["text"])],8,Sf)]),_:1},8,["props","duration"])],6))}},$f=$t(Af,[["__scopeId","data-v-c56d618c"]]),kn={__name:"ContextMenuSearch",props:{context:{type:Object,default:()=>({nodeType:"entity"})}},setup(t){const e=Yt(),n=cn(),r=Be();function i(o){e.data.nodes[e.nodeId].allocations==null&&(e.data.nodes[e.nodeId].allocations={}),e.data.nodes[e.nodeId].allocations[o]={x:(n.offset.x-r.transform.x)/r.transform.k,y:(n.offset.y-r.transform.y)/r.transform.k}}return(o,a)=>(H(),wt(ea,{onSelectItem:i,context:t.context},null,8,["context"]))}},kf=["d"],Nf={__name:"TheGraph",setup(t){const e=Oe(),n=_r(),r=Yt();xi();const i=Tr(),o=xr(),a=ce(),s=Be(),f=me(),l=cn(),u=Yn(),h=ut([]),d=ut(null),p=ut(null),b=ut(null),v=ut(null),_=Q(()=>e.params.id),m=ut(r.data.nodes[_.value]),N=Q(()=>e.params.type==="graph"?"diagram":"network"),x=Q(()=>`translate(${s.transform.x}px, ${s.transform.y}px) scale(${s.transform.k})`),L=Q(()=>{if(h.value==null)return;if(i.bounds!=null)return{x1:i.bounds.x1+s.offset.x,y1:i.bounds.y1+s.offset.y,x2:i.bounds.x2+s.offset.x,y2:i.bounds.y2+s.offset.y};const w=Object.values(h.value),S=w.map(({x:B})=>B),A=w.map(({y:B})=>B),V=200,F=100;return{x1:Math.min(...S)-V+s.offset.x,y1:Math.min(...A)-F+s.offset.y,x2:Math.max(...S)+V+s.offset.x,y2:Math.max(...A)+F+s.offset.y}}),E=Q(()=>{const w=Object.keys(h.value??{});return r.data.edges.filter(S=>w.includes(S.nodes[0])&&w.includes(S.nodes[1])&&(S.graph===_.value||m.value.type!=="graph"))}),R=Q(()=>Object.keys(h.value??{}).sort()),j=Q(()=>{if(m.value.color!=null)return{"--graph-accent":`var(--${m.value.color})`}}),X=Q(()=>{var F;if((((F=i.exactMarker)==null?void 0:F.bounds)==null&&v.value)==null)return;const{x1:w,y1:S,x2:A,y2:V}=v.value||i.exactMarker.bounds;return`M${w+s.offset.x},${S+s.offset.y} L${A+s.offset.x},${S+s.offset.y} L${A+s.offset.x},${V+s.offset.y} L${w+s.offset.x},${V+s.offset.y} Z`});se([_,()=>r.data],([w],[S])=>{m.value=r.data.nodes[w],G(nn,S)}),se(L,()=>{o.inactivityShort&&k(L.value,nn)}),se(()=>o.inactivityShort,()=>{a.playing&&k(L.value,nn)}),se(()=>o.inactivityLong,()=>{a.playing&&e.name==="graph"&&e.params.type!=="graph"&&a.graphId!=null&&n.push({name:"graph",params:{type:"graph",id:a.graphId}})}),De(()=>{p.value=ge(d.value),b.value=Pu().scaleExtent([.1,1]).on("zoom",w=>{s.transform=w.transform}).filter(w=>{if(u.mode!=="display-frame")return on(()=>o.registerActivity()),w.button===0&&!l.show}),p.value.call(b.value),G(0),I.observe(d.value)}),mr(()=>{d.value!=null&&I.unobserve(d.value)});function G(w,S){if(m.value.type==="graph"){if(h.value=m.value.allocations,S!=null){const A=r.data.nodes[S].type==="graph"?O(r.data.nodes[S].allocations):{x:0,y:0},V=r.data.nodes[S].type==="graph"||h.value[S]==null?O(h.value):h.value[S];s.offset.x=s.offset.x+A.x-V.x,s.offset.y=s.offset.y+A.y-V.y}k(L.value,w)}else h.value=pc(_.value),D(s.offset,w)}function O(w){const S=Object.values(w),A=S.map(({x:Y})=>Y),V=S.map(({y:Y})=>Y),F=Math.min(...A),B=Math.max(...A),Z=Math.min(...V),q=Math.max(...V);return{x:(F+B)/2,y:(Z+q)/2}}function k(w,S=0){if(w==null)return;const A={x:w.x2-w.x1,y:w.y2-w.y1},V=d.value.getBoundingClientRect(),F=V.width/A.x,B=(V.height-yr*2.7)/A.y,Z=Math.min(F,B),q=w.x1+A.x/2,Y=w.y1+A.y/2;p.value.transition().duration(S).call(b.value.transform,Hn.translate(V.width/2,V.height/2).scale(Z).translate(-q,-Y))}function D({x:w,y:S},A=0){const V=d.value.getBoundingClientRect();p.value.transition().duration(A).call(b.value.transform,Hn.translate(V.width/2,V.height/2).scale(1).translate(-w,-S))}const I=new ResizeObserver(w=>{for(const S of w)S.contentRect&&k(L.value,0)});function g(w){!f.edit||N.value!=="diagram"||(w.preventDefault(),l.open(Qn,[{label:"add",action:S=>{S.stopPropagation(),l.open(kn)}},{label:"log",action:()=>{console.log(s.transform,l.offset)}}],{x:w.x,y:w.y}))}function z(w){if(!(!f.edit||N.value!=="diagram"))switch(["add-entity","add-story","add-image"].includes(u.mode)&&w.stopPropagation(),u.mode){case"add-entity":l.open(kn,{nodeType:"entity"},{x:w.x,y:w.y}),u.resetMode();break;case"add-story":l.open(kn,{nodeType:"graph"},{x:w.x,y:w.y}),u.resetMode();break;case"add-image":l.open(kn,{nodeType:"image"},{x:w.x,y:w.y}),u.resetMode();break}}function C(w){if(u.mode==="display-frame"){w.preventDefault(),w.stopPropagation();const S=P(w);v.value={x1:S.x-s.offset.x,y1:S.y-s.offset.y,x2:S.x-s.offset.x,y2:S.y-s.offset.y};const A=new AbortController,V=function(){console.log("reset"),A.abort(),v.value=null};window.addEventListener("keydown",F=>{F.key==="Escape"&&V()},{signal:A.signal}),window.addEventListener("mousemove",F=>{const{x:B,y:Z}=P(F);v.value.x2=B-s.offset.x,v.value.y2=Z-s.offset.y},{signal:A.signal}),window.addEventListener("mouseup",()=>{u.setBounds(v.value,_.value),V(),u.resetMode()},{signal:A.signal})}}function M(w){if(w.preventDefault(),!f.edit||N.value!=="diagram")return;const S=Hr(w.dataTransfer.getData("text/uri-list")),A=r.nodes.find(F=>F.file===Hr(S));if(A!=null)return T(A.id,w.x,w.y);if(/(.png|.jpe?g|.gif|.webp)$/i.test(S)){const F=crypto.randomUUID(),B={type:"image",file:S,label:{universal:S.replace(/[^:]*:\/?\/?/,"").replace(/\.[^.]+$/,"")}};r.data.nodes[F]=B,T(F,w.x,w.y)}}function T(w,S,A){r.data.nodes[r.nodeId].allocations[w]=P({x:S,y:A})}function P(w){return{x:(w.x-s.transform.x)/s.transform.k,y:(w.y-s.transform.y)/s.transform.k}}return(w,S)=>(H(),J("main",{class:Ut(["graph",[`mode-${W(u).mode}`,{initializing:W(e).meta.initializeView}]]),ref_key:"zoomElement",ref:d,style:Ft(j.value),onContextmenu:g,onClick:z,onMousedown:C,onDrop:M,onDragover:S[0]||(S[0]=ve(()=>{},["prevent"])),onDragenter:S[1]||(S[1]=ve(()=>{},["prevent"]))},[tt("div",{class:"nodes",style:Ft({transform:x.value})},[lt(qr,{name:"nodes"},{default:dt(()=>[(H(!0),J(Ie,null,Ee(R.value,A=>(H(),wt(gf,{key:A,id:A,position:h.value[A],view:N.value,graph:N.value==="diagram"&&_.value},null,8,["id","position","view","graph"]))),128))]),_:1})],4),(H(),J("svg",null,[tt("g",{style:Ft({transform:x.value})},[lt(qr,{name:"edges"},{default:dt(()=>[(H(!0),J(Ie,null,Ee(E.value,A=>(H(),wt($f,{key:A.id,edge:A,view:N.value},null,8,["edge","view"]))),128))]),_:1}),W(f).edit&&X.value?(H(),J("path",{key:0,d:X.value,class:"display-bounds"},null,8,kf)):ee("",!0)],4)]))],38))}},Tf=$t(Nf,[["__scopeId","data-v-f6d4c121"]]),If={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Ef(t,e){return H(),J("svg",If,e[0]||(e[0]=[tt("path",{d:"M18,15 L20,15 C20.5522847,15 21,15.4477153 21,16 L21,29 C21,29.5522847 20.5522847,30 20,30 L18,30 C17.4477153,30 17,29.5522847 17,29 L17,16 C17,15.4477153 17.4477153,15 18,15 Z M25,15 L27,15 C27.5522847,15 28,15.4477153 28,16 L28,29 C28,29.5522847 27.5522847,30 27,30 L25,30 C24.4477153,30 24,29.5522847 24,29 L24,16 C24,15.4477153 24.4477153,15 25,15 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const zf={name:"base-ControlsPause",render:Ef},Pf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Df(t,e){return H(),J("svg",Pf,e[0]||(e[0]=[tt("polyline",{stroke:"#000000","stroke-width":"2",transform:"matrix(-1 0 0 1 43.5 0)",points:"18.5 16 25 22.5 18.5 29",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const Of={name:"base-ControlsMarkerPrevious",render:Df},Bf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Rf(t,e){return H(),J("svg",Bf,e[0]||(e[0]=[tt("polyline",{stroke:"#000000","stroke-width":"2",points:"20 16 26.5 22.5 20 29",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const Ff={name:"base-ControlsMarkerNext",render:Rf},Zf={class:"icon",width:"3",height:"45",viewBox:"0 0 3 45",xmlns:"http://www.w3.org/2000/svg"};function Vf(t,e){return H(),J("svg",Zf,e[0]||(e[0]=[tt("path",{d:"M2,36.5 C2,36.7761424 1.77614237,37 1.5,37 C1.22385763,37 1,36.7761424 1,36.5 L1,8.5 C1,8.22385763 1.22385763,8 1.5,8 C1.77614237,8 2,8.22385763 2,8.5 L2,36.5 Z",fill:"currentColor",opacity:".25"},null,-1)]))}const qf={name:"base-SeperatorVertical",render:Vf},Hf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Gf(t,e){return H(),J("svg",Hf,e[0]||(e[0]=[tt("g",{fill:"none","fill-rule":"evenodd"},[tt("path",{d:"M18,14 C18.5522847,14 19,14.4477153 19,15 C19,15.5522847 18.5522847,16 18,16 L17,16 C16.4477153,16 16,16.4477153 16,17 L16,18 C16,18.5522847 15.5522847,19 15,19 C14.4477153,19 14,18.5522847 14,18 L14,17 C14,15.3431458 15.3431458,14 17,14 L18,14 Z M31,18 C31,18.5522847 30.5522847,19 30,19 C29.4477153,19 29,18.5522847 29,18 L29,17 C29,16.4477153 28.5522847,16 28,16 L27,16 C26.4477153,16 26,15.5522847 26,15 C26,14.4477153 26.4477153,14 27,14 L28,14 C29.6568542,14 31,15.3431458 31,17 L31,18 Z M27,31 C26.4477153,31 26,30.5522847 26,30 C26,29.4477153 26.4477153,29 27,29 L28,29 C28.5522847,29 29,28.5522847 29,28 L29,27 C29,26.4477153 29.4477153,26 30,26 C30.5522847,26 31,26.4477153 31,27 L31,28 C31,29.6568542 29.6568542,31 28,31 L27,31 Z M14,27 C14,26.4477153 14.4477153,26 15,26 C15.5522847,26 16,26.4477153 16,27 L16,28 C16,28.5522847 16.4477153,29 17,29 L18,29 C18.5522847,29 19,29.4477153 19,30 C19,30.5522847 18.5522847,31 18,31 L17,31 C15.3431458,31 14,29.6568542 14,28 L14,27 Z",fill:"currentColor","fill-rule":"nonzero"}),tt("path",{d:"M23.2071068,15.2071068 L29.7928932,21.7928932 C30.1834175,22.1834175 30.1834175,22.8165825 29.7928932,23.2071068 L23.2071068,29.7928932 C22.8165825,30.1834175 22.1834175,30.1834175 21.7928932,29.7928932 L15.2071068,23.2071068 C14.8165825,22.8165825 14.8165825,22.1834175 15.2071068,21.7928932 L21.7928932,15.2071068 C22.1834175,14.8165825 22.8165825,14.8165825 23.2071068,15.2071068 Z",fill:"currentColor"})],-1)]))}const Uf={name:"base-DisplayDefaultFrame",render:Gf},Yf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Xf(t,e){return H(),J("svg",Yf,e[0]||(e[0]=[tt("path",{d:"M23.2071068,15.2071068 L29.7928932,21.7928932 C30.1834175,22.1834175 30.1834175,22.8165825 29.7928932,23.2071068 L23.2071068,29.7928932 C22.8165825,30.1834175 22.1834175,30.1834175 21.7928932,29.7928932 L15.2071068,23.2071068 C14.8165825,22.8165825 14.8165825,22.1834175 15.2071068,21.7928932 L21.7928932,15.2071068 C22.1834175,14.8165825 22.8165825,14.8165825 23.2071068,15.2071068 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const no={name:"base-DisplayDefault",render:Xf},Wf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Kf(t,e){return H(),J("svg",Wf,e[0]||(e[0]=[tt("path",{d:"M19,14 C19.5522847,14 20,14.4477153 20,15 C20,15.5522847 19.5522847,16 19,16 L17,16 C16.4477153,16 16,16.4477153 16,17 L16,19 C16,19.5522847 15.5522847,20 15,20 C14.4477153,20 14,19.5522847 14,19 L14,17 C14,15.3431458 15.3431458,14 17,14 L19,14 Z M31,19 C31,19.5522847 30.5522847,20 30,20 C29.4477153,20 29,19.5522847 29,19 L29,17 C29,16.4477153 28.5522847,16 28,16 L26,16 C25.4477153,16 25,15.5522847 25,15 C25,14.4477153 25.4477153,14 26,14 L28,14 C29.6568542,14 31,15.3431458 31,17 L31,19 Z M26,31 C25.4477153,31 25,30.5522847 25,30 C25,29.4477153 25.4477153,29 26,29 L28,29 C28.5522847,29 29,28.5522847 29,28 L29,26 C29,25.4477153 29.4477153,25 30,25 C30.5522847,25 31,25.4477153 31,26 L31,28 C31,29.6568542 29.6568542,31 28,31 L26,31 Z M14,26 C14,25.4477153 14.4477153,25 15,25 C15.5522847,25 16,25.4477153 16,26 L16,28 C16,28.5522847 16.4477153,29 17,29 L19,29 C19.5522847,29 20,29.4477153 20,30 C20,30.5522847 19.5522847,31 19,31 L17,31 C15.3431458,31 14,29.6568542 14,28 L14,26 Z",fill:"currentColor"},null,-1)]))}const ro={name:"base-DisplayFrame",render:Kf},jf={key:0,class:"markers"},Qf=["onClick","onMousemove","onContextmenu"],Jf={__name:"ControlsProgress",props:{showMarkers:Boolean},setup(t){const e=ut(0),n=Yt(),r=ce(),i=cn(),o=Yn(),a=Q(()=>n.data.nodes[r.graphId]),s=Q(()=>{const b=`${r.time/r.duration*100}%`;return`linear-gradient(to right, var(--left) ${b}, var(--right) ${b})`});function f(b,v){(v||!r.playing)&&(r.playFrom=r.time=b.offsetX/b.target.getBoundingClientRect().width*r.duration),v&&h()}function l(b){return`${b/r.duration*100}%`}function u(b,v,_){b.stopPropagation(),(_||!r.playing)&&(r.playFrom=r.time=v.time),_&&h()}function h(){e.value=r.time}function d(){r.playFrom=r.time=e.value}function p(b,v,_){b.preventDefault(),b.stopPropagation(),i.open(Qn,[{label:"delete",action:()=>{n.data.nodes[r.graphId].marker=n.data.nodes[r.graphId].marker.filter((m,N)=>N!==_)}},{label:"+",remainOpen:!0,action:m=>{m.stopPropagation(),n.data.nodes[r.graphId].marker[_].time+=1}},{label:"-",remainOpen:!0,action:m=>{m.stopPropagation(),n.data.nodes[r.graphId].marker[_].time-=1}},...v.bounds!=null?[{label:"clear bounds",action:()=>{o.setBounds(null,r.graphId,v.time)}}]:[]],{x:b.x,y:b.y})}return(b,v)=>{var _;return H(),J("div",{class:"progress",style:Ft({background:s.value}),onClick:v[0]||(v[0]=m=>f(m,!0)),onMousemove:f,onMouseenter:h,onMouseleave:d},[t.showMarkers&&((_=a.value)!=null&&_.marker)?(H(),J("div",jf,[(H(!0),J(Ie,null,Ee(a.value.marker,(m,N)=>(H(),J("div",{key:N,class:Ut(["marker",{active:m.time===W(r).time||m.time===e.value}]),style:Ft({left:l(m.time)}),onClick:x=>u(x,m,!0),onMousemove:x=>u(x,m),onContextmenu:x=>p(x,m,N)},[m.bounds&&m.states?(H(),wt(W(Uf),{key:0})):m.states?(H(),wt(W(no),{key:1})):(H(),wt(W(ro),{key:2}))],46,Qf))),128))])):ee("",!0)],36)}}},pi=$t(Jf,[["__scopeId","data-v-158acf2c"]]),t1={__name:"TheControls",setup(t){const e=Yt(),n=ce(),r=me(),i=Q(()=>e.data.nodes[n.graphId]),o=Q(()=>{var u;if(((u=i.value)==null?void 0:u.color)!=null)return{"--graph-accent":`var(--${i.value.color})`}}),a=Q(()=>n.playing),s=Q(()=>i.value.marker.toSorted((u,h)=>u.time-h.time));function f(){var u;n.playFrom=n.time=((u=s.value.findLast(h=>h.time<n.time))==null?void 0:u.time)??0}function l(){var u;n.playFrom=n.time=((u=s.value.find(h=>h.time>n.time))==null?void 0:u.time)??n.duration}return(u,h)=>(H(),J("section",{class:Ut(["timeline",{edit:W(r).edit}]),style:Ft(o.value)},[W(r).edit?(H(),wt(yi,{key:0,class:"button-group",horizontal:""},{default:dt(()=>[lt(rr,{"disable-padding":""},{default:dt(()=>[a.value?(H(),wt(W(zf),{key:1,onClick:h[1]||(h[1]=d=>W(n).setPlaying=!1)})):(H(),wt(W(Wi),{key:0,onClick:h[0]||(h[0]=d=>W(n).setPlaying=!0)}))]),_:1}),lt(rr,{"disable-padding":""},{default:dt(()=>[lt(W(Of),{onClick:f})]),_:1}),lt(rr,{"disable-padding":""},{default:dt(()=>[lt(W(Ff),{onClick:l})]),_:1}),lt(W(qf)),lt(pi,{"show-markers":""})]),_:1})):(H(),wt(pi,{key:1}))],6))}},e1=$t(t1,[["__scopeId","data-v-264fb344"]]),n1={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function r1(t,e){return H(),J("svg",n1,e[0]||(e[0]=[tt("path",{d:"M18.3994816,13.8517704 L28.7074921,22.4660712 C29.1312774,22.8202243 29.1877255,23.450868 28.8335723,23.8746534 C28.6860759,24.0511499 28.4822444,24.1714042 28.2564291,24.2151501 L25.5073341,24.7477155 C24.9651298,24.8527535 24.6107365,25.377447 24.7157744,25.9196512 C24.7313245,25.9999207 24.7566603,26.0779801 24.7912143,26.1520815 L26.5743353,29.9759967 C26.8077409,30.4765367 26.5911857,31.0715171 26.0906457,31.3049227 L25.184338,31.727541 C24.683798,31.9609466 24.0888175,31.7443914 23.8554119,31.2438515 L22.072291,27.4199363 C21.8388853,26.9193963 21.2439049,26.7028411 20.7433649,26.9362467 C20.6692636,26.9708008 20.5996796,27.0143123 20.5361713,27.0658068 L18.3611183,28.8294093 C17.9321324,29.1772448 17.3023942,29.1114594 16.9545587,28.6824734 C16.8096934,28.5038109 16.7308474,28.2806704 16.7313064,28.0506573 L16.7582326,14.6170974 C16.7593395,14.0648137 17.2079512,13.6179967 17.7602349,13.6191016 C17.9939596,13.6195721 18.220137,13.7018939 18.3994816,13.8517704 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const i1={name:"base-CursorDefault",render:r1},o1={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function a1(t,e){return H(),J("svg",o1,e[0]||(e[0]=[tt("path",{d:"M32,15 C33.1045695,15 34,15.8954305 34,17 L34,28 C34,29.1045695 33.1045695,30 32,30 L13,30 C11.8954305,30 11,29.1045695 11,28 L11,17 C11,15.8954305 11.8954305,15 13,15 L32,15 Z M32,16 L13,16 C12.4477153,16 12,16.4477153 12,17 L12,28 C12,28.5522847 12.4477153,29 13,29 L32,29 C32.5522847,29 33,28.5522847 33,28 L33,17 C33,16.4477153 32.5522847,16 32,16 Z M23,25 C23.5522847,25 24,25.4477153 24,26 L24,27 C24,27.5522847 23.5522847,28 23,28 L14,28 C13.4477153,28 13,27.5522847 13,27 L13,26 C13,25.4477153 13.4477153,25 14,25 L23,25 Z M31,17 C31.5522847,17 32,17.4477153 32,18 L32,23 C32,23.5522847 31.5522847,24 31,24 L14,24 C13.4477153,24 13,23.5522847 13,23 L13,18 C13,17.4477153 13.4477153,17 14,17 L31,17 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const s1={name:"base-AddEntity",render:a1},l1={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function u1(t,e){return H(),J("svg",l1,e[0]||(e[0]=[tt("path",{d:"M32,15 C33.1045695,15 34,15.8954305 34,17 L34,28 C34,29.1045695 33.1045695,30 32,30 L13,30 C11.8954305,30 11,29.1045695 11,28 L11,17 C11,15.8954305 11.8954305,15 13,15 L32,15 Z M32,16 L13,16 C12.4477153,16 12,16.4477153 12,17 L12,28 C12,28.5522847 12.4477153,29 13,29 L32,29 C32.5522847,29 33,28.5522847 33,28 L33,17 C33,16.4477153 32.5522847,16 32,16 Z M20.1483417,19.765467 C20.4377927,19.2951091 21.0537395,19.1484551 21.5240974,19.4379061 L25.1160552,21.6483417 C25.2493757,21.730385 25.3615728,21.8425821 25.4436161,21.9759026 C25.7330671,22.4462605 25.5864131,23.0622073 25.1160552,23.3516583 L21.5240974,25.5620939 C21.3664897,25.6590832 21.1850598,25.7104356 21,25.7104356 C20.4477153,25.7104356 20,25.2627203 20,24.7104356 L20,20.2895644 C20,20.1045046 20.0513523,19.9230747 20.1483417,19.765467 Z",fill:"currentColor"},null,-1)]))}const c1={name:"base-AddStory",render:u1},f1={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function h1(t,e){return H(),J("svg",f1,e[0]||(e[0]=[tt("path",{d:"M32,15 C33.1045695,15 34,15.8954305 34,17 L34,28 C34,29.1045695 33.1045695,30 32,30 L13,30 C11.8954305,30 11,29.1045695 11,28 L11,17 C11,15.8954305 11.8954305,15 13,15 L32,15 Z M32,16 L13,16 C12.4477153,16 12,16.4477153 12,17 L12,28 C12,28.5522847 12.4477153,29 13,29 L32,29 C32.5522847,29 33,28.5522847 33,28 L33,17 C33,16.4477153 32.5522847,16 32,16 Z M26,22 C27.8346354,21.3884549 29.6692708,21.6183815 31.5040033,22.6896136 C31.8106661,22.8685631 31.9994458,23.1967019 32,23.5517578 L32,27 C32,27.5522847 31.5522847,28 31,28 L14,28 C13.4477153,28 13,27.5522847 13,27 L13,25.9687057 L13.0105961,25.8251331 C13.0818756,25.3451379 13.503213,24.9842004 14,25 L14.4403514,25.0105801 C20.8078896,25.11322 23.2067448,22.9310851 26,22 Z M16.75,18.5 C17.7164983,18.5 18.5,19.2835017 18.5,20.25 C18.5,21.2164983 17.7164983,22 16.75,22 C15.7835017,22 15,21.2164983 15,20.25 C15,19.2835017 15.7835017,18.5 16.75,18.5 Z",fill:"currentColor"},null,-1)]))}const d1={name:"base-AddImage",render:h1},p1={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function g1(t,e){return H(),J("svg",p1,e[0]||(e[0]=[tt("path",{d:"M31.0395445,14.6621019 C31.0865261,14.8343676 31.0865261,15.0160709 31.0395445,15.1883367 L29.2261258,21.8375386 C29.0808101,22.3703629 28.531069,22.6845007 27.9982446,22.539185 C27.8303497,22.4933955 27.6773109,22.4045836 27.5542552,22.281528 L25.844,20.5709684 L15.7071068,30.7071068 C15.3165825,31.0976311 14.6834175,31.0976311 14.2928932,30.7071068 C13.9023689,30.3165825 13.9023689,29.6834175 14.2928932,29.2928932 L24.429,19.1559684 L22.718472,17.4457448 C22.3279477,17.0552205 22.3279477,16.4220555 22.718472,16.0315312 C22.8415277,15.9084756 22.9945665,15.8196637 23.1624614,15.7738742 L29.8116633,13.9604555 C30.3444877,13.8151397 30.8942288,14.1292775 31.0395445,14.6621019 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const y1={name:"base-AddLink",render:g1},v1={class:"icon",width:"45",height:"3",viewBox:"0 0 45 3",xmlns:"http://www.w3.org/2000/svg"};function m1(t,e){return H(),J("svg",v1,e[0]||(e[0]=[tt("path",{d:"M36.5,1 C36.7761424,1 37,1.22385763 37,1.5 C37,1.77614237 36.7761424,2 36.5,2 L8.5,2 C8.22385763,2 8,1.77614237 8,1.5 C8,1.22385763 8.22385763,1 8.5,1 L36.5,1 Z",fill:"currentColor",opacity:".25"},null,-1)]))}const gi={name:"base-SeperatorHorizontal",render:m1},_1={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"},x1=["id"],w1=["filter"];function b1(t,e){return H(),J("svg",_1,[tt("defs",null,[tt("filter",{x:"-34.9%",y:"-34.9%",width:"169.8%",height:"169.8%",filterUnits:"objectBoundingBox",id:t.idMap.a},e[0]||(e[0]=[tt("feGaussianBlur",{stdDeviation:"2",in:"SourceGraphic"},null,-1)]),8,x1)]),tt("path",{d:"M22.7071068,15.7071068 L29.2928932,22.2928932 C29.6834175,22.6834175 29.6834175,23.3165825 29.2928932,23.7071068 L22.7071068,30.2928932 C22.3165825,30.6834175 21.6834175,30.6834175 21.2928932,30.2928932 L14.7071068,23.7071068 C14.3165825,23.3165825 14.3165825,22.6834175 14.7071068,22.2928932 L21.2928932,15.7071068 C21.6834175,15.3165825 22.3165825,15.3165825 22.7071068,15.7071068 Z",fill:"currentColor",filter:"url(#"+t.idMap.a+")","fill-rule":"evenodd",opacity:".832"},null,8,w1)])}const C1={name:"base-DisplayBlur",render:b1,data(){return{idMap:{a:"uicons-"+Math.random().toString(36).substr(2,10)}}}},L1={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function M1(t,e){return H(),J("svg",L1,e[0]||(e[0]=[tt("path",{d:"M17.1464466,27.1464466 L17.8535534,27.8535534 L15.3535534,30.3535534 L14.6464466,29.6464466 L17.1464466,27.1464466 Z M27.8535534,27.1464466 L30.3535534,29.6464466 L29.6464466,30.3535534 L27.1464466,27.8535534 L27.8535534,27.1464466 Z M23.2071068,15.2071068 L29.7928932,21.7928932 C30.1834175,22.1834175 30.1834175,22.8165825 29.7928932,23.2071068 L23.2071068,29.7928932 C22.8165825,30.1834175 22.1834175,30.1834175 21.7928932,29.7928932 L15.2071068,23.2071068 C14.8165825,22.8165825 14.8165825,22.1834175 15.2071068,21.7928932 L21.7928932,15.2071068 C22.1834175,14.8165825 22.8165825,14.8165825 23.2071068,15.2071068 Z M29.6464466,14.6464466 L30.3535534,15.3535534 L27.8535534,17.8535534 L27.1464466,17.1464466 L29.6464466,14.6464466 Z M15.3535534,14.6464466 L17.8535534,17.1464466 L17.1464466,17.8535534 L14.6464466,15.3535534 L15.3535534,14.6464466 Z M20.7868105,14.1744381 L19.8208847,14.4332571 L18.9058212,11.0181936 L19.871747,10.7593745 L20.7868105,14.1744381 Z M26.0941788,33.9818064 L25.128253,34.2406255 L24.2131895,30.8255619 L25.1791153,30.5667429 L26.0941788,33.9818064 Z M25.1791153,14.4332571 L24.2131895,14.1744381 L25.128253,10.7593745 L26.0941788,11.0181936 L25.1791153,14.4332571 Z M19.871747,34.2406255 L18.9058212,33.9818064 L19.8208847,30.5667429 L20.7868105,30.8255619 L19.871747,34.2406255 Z M30.8255619,20.7868105 L30.5667429,19.8208847 L33.9818064,18.9058212 L34.2406255,19.871747 L30.8255619,20.7868105 Z M11.0181936,26.0941788 L10.7593745,25.128253 L14.1744381,24.2131895 L14.4332571,25.1791153 L11.0181936,26.0941788 Z M30.5667429,25.1791153 L30.8255619,24.2131895 L34.2406255,25.128253 L33.9818064,26.0941788 L30.5667429,25.1791153 Z M10.7593745,19.871747 L11.0181936,18.9058212 L14.4332571,19.8208847 L14.1744381,20.7868105 L10.7593745,19.871747 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const S1={name:"base-DisplayHighlight",render:M1},A1={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function $1(t,e){return H(),J("svg",A1,e[0]||(e[0]=[tt("path",{d:"M30.2071068,14.7928932 C30.5976311,15.1834175 30.5976311,15.8165825 30.2071068,16.2071068 L16.2071068,30.2071068 C15.8165825,30.5976311 15.1834175,30.5976311 14.7928932,30.2071068 C14.4023689,29.8165825 14.4023689,29.1834175 14.7928932,28.7928932 L28.7928932,14.7928932 C29.1834175,14.4023689 29.8165825,14.4023689 30.2071068,14.7928932 Z M27.9142136,19.9142136 L29.7928932,21.7928932 C30.1834175,22.1834175 30.1834175,22.8165825 29.7928932,23.2071068 L23.2071068,29.7928932 C22.8165825,30.1834175 22.1834175,30.1834175 21.7928932,29.7928932 L19.9142136,27.9142136 L27.9142136,19.9142136 Z M23.2071068,15.2071068 L25.0862136,17.0862136 L17.0862136,25.0862136 L15.2071068,23.2071068 C14.8165825,22.8165825 14.8165825,22.1834175 15.2071068,21.7928932 L21.7928932,15.2071068 C22.1834175,14.8165825 22.8165825,14.8165825 23.2071068,15.2071068 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const k1={name:"base-DisplayUnset",render:$1},N1={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function T1(t,e){return H(),J("svg",N1,e[0]||(e[0]=[tt("path",{d:"M15,30 L30,30 L30,29 L15,29 L15,30 Z M23,15 L23,25.292 L26.6464466,21.6464466 L27.3535534,22.3535534 L22.5,27.2071068 L17.6464466,22.3535534 L18.3535534,21.6464466 L22,25.292 L22,15 L23,15 Z",fill:"currentColor"},null,-1)]))}const I1={name:"base-Export",render:T1},E1={class:"toolbar"},z1={__name:"TheToolbar",setup(t){const e=Yn(),n=Yt();return(r,i)=>(H(),J("section",E1,[lt(wi,{modelValue:W(e).mode,"onUpdate:modelValue":i[0]||(i[0]=o=>W(e).mode=o),options:[{value:"default",slot:"default",tooltip:"Select"},{value:"add-entity",slot:"add-entity",tooltip:"add entity"},{value:"add-story",slot:"add-story",tooltip:"add story"},{value:"add-image",slot:"add-image",tooltip:"add image"},{value:"add-edge",slot:"add-edge",tooltip:"add edge"},{disabled:!0,slot:"seperator"},{value:"display-blur",slot:"display-blur",tooltip:"blur"},{value:"display-default",slot:"display-default",tooltip:"default"},{value:"display-highlight",slot:"display-highlight",tooltip:"highlight"},{value:"display-unset",slot:"display-unset",tooltip:"unset"},{value:"display-frame",slot:"display-frame",tooltip:"frame"},{disabled:!0,slot:"seperator2"},{value:"download",slot:"download",tooltip:"download data",action:W(n).exportProject}]},{default:dt(()=>[lt(W(i1))]),"add-entity":dt(()=>[lt(W(s1))]),"add-story":dt(()=>[lt(W(c1))]),"add-image":dt(()=>[lt(W(d1))]),"add-edge":dt(()=>[lt(W(y1))]),seperator:dt(()=>[lt(W(gi))]),"display-blur":dt(()=>[lt(W(C1))]),"display-default":dt(()=>[lt(W(no))]),"display-highlight":dt(()=>[lt(W(S1))]),"display-unset":dt(()=>[lt(W(k1))]),"display-frame":dt(()=>[lt(W(ro))]),seperator2:dt(()=>[lt(W(gi))]),download:dt(()=>[lt(W(I1))]),_:1},8,["modelValue","options"])]))}},P1=$t(z1,[["__scopeId","data-v-f9fd2ea6"]]),D1={class:"right"},O1={__name:"TheFooter",setup(t){ut("Wanderer"),Oe(),_r();const e=me(),n=xi();return ce(),Yt(),(r,i)=>(H(),J("footer",null,[tt("span",D1,[lt(wi,{horizontal:"","equal-size":"",modelValue:W(e).lang,"onUpdate:modelValue":i[0]||(i[0]=o=>W(e).lang=o),options:W(n).languages},null,8,["modelValue","options"])])]))}},B1=$t(O1,[["__scopeId","data-v-efb16681"]]),R1={class:"interface-layer fullscreen"},F1={__name:"GraphView",setup(t){const e=ce(),n=me();Oe();const r=Q(()=>!e.showVideo||!n.pictureInPicture||n.pictureInPictureVideo);return(i,o)=>(H(),J("div",{class:Ut(["graph-view",{"split-screen":W(e).showVideo&&!W(n).pictureInPicture,"pip-graph":W(e).showVideo&&W(n).pictureInPicture&&!W(n).pictureInPictureVideo}]),onWheel:o[1]||(o[1]=ve(()=>{},["prevent"]))},[W(e).showVideo?(H(),wt(na,{key:0,class:Ut(["video",{fullscreen:!r.value}])},null,8,["class"])):ee("",!0),lt(Tf,{class:Ut(["graph",{fullscreen:r.value}])},null,8,["class"]),tt("div",{class:"toggle-pip",onClick:o[0]||(o[0]=a=>W(n).pictureInPictureVideo=!W(n).pictureInPictureVideo)}),tt("div",R1,[lt(ra),lt(e1),W(n).edit?(H(),wt(P1,{key:0})):ee("",!0),lt(B1)])],34))}},G1=$t(F1,[["__scopeId","data-v-f6cb96d8"]]);export{G1 as default};
