import{_ as v,D as y,A as _,u as T,r as h,f as L,w as s,G as S,o as x,c as A,a as u,h as a,t as P,M as k}from"./index-BTeGC7Kf.js";const w={class:"video"},B=["autoplay","src","muted"],C={class:"subtitle"},D={__name:"TheVideo",props:{letterbox:Boolean},setup(E){const e=y(),i=_(),o=T(),l=k(),n=h(null),c=L(()=>i.getLocalizedMediaUrl(e.video.file));function d(){var t;n.value!=null&&(e.time=((t=n.value)==null?void 0:t.currentTime)??0)}function p(t){t.target.currentTime=e.playFrom??0,e.playFrom=null,e.restoreTimeAfterLanguageChange&&(t.target.currentTime=e.restoreTimeAfterLanguageChange,e.restoreTimeAfterLanguageChange=null)}function m(){e.isExternalPlayer?e.requestNext():l.push({name:"graph",params:{type:"graph",id:e.next}})}function f(){n.value!=null&&(e.duration=n.value.duration)}return s(()=>e.playFrom,t=>{t!=null&&(n.value.currentTime=t,e.playFrom=null)}),s(()=>o.videoLang,()=>{e.restoreTimeAfterLanguageChange=n.value.currentTime}),s(()=>e.setPlaying,t=>{t!=null&&(t?n.value.play():n.value.pause(),e.setPlaying=null)}),S(()=>{o.mode!=="edit"&&window.addEventListener("click",()=>{n.value.currentTime===0&&n.value.play()},{once:!0})}),(t,r)=>(x(),A("main",w,[u("video",{ref_key:"video",ref:n,crossorigin:"anonymous",autoplay:!a(o).edit,src:c.value,muted:a(e).muted,playsinline:"",onLoadstart:p,onEnded:m,onTimeupdate:d,onPause:r[0]||(r[0]=g=>a(e).playing=!1),onPlay:r[1]||(r[1]=g=>a(e).playing=!0),onDurationchange:f},null,40,B),u("div",C,P(a(e).subtitle),1)]))}},V=v(D,[["__scopeId","data-v-5a33fcc6"]]);export{V as T};
