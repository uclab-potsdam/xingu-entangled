import{_ as v,y,t as _,u as T,s as h,v as L,A as r,B as S,o as x,c as A,a as u,f as o,D as B,O as P}from"./index-BrfVeqZv.js";const k={class:"video"},C=["autoplay","src"],D={class:"subtitle"},E={__name:"TheVideo",props:{letterbox:Boolean},setup(F){const e=y(),i=_(),s=T(),l=P(),a=h(null),c=L(()=>i.getLocalizedMediaUrl(e.video.file));function d(){var t;a.value!=null&&(e.time=((t=a.value)==null?void 0:t.currentTime)??0)}function p(t){t.target.currentTime=e.playFrom??0,e.playFrom=null,e.restoreTimeAfterLanguageChange&&(t.target.currentTime=e.restoreTimeAfterLanguageChange,e.restoreTimeAfterLanguageChange=null)}function m(){e.isExternalPlayer?e.requestNext():l.push({name:"graph",params:{type:"graph",id:e.next}})}function f(){a.value!=null&&(e.duration=a.value.duration)}return r(()=>e.playFrom,t=>{t!=null&&(a.value.currentTime=t,e.playFrom=null)}),r(()=>s.videoLang,()=>{e.restoreTimeAfterLanguageChange=a.value.currentTime}),r(()=>e.setPlaying,t=>{t!=null&&(t?a.value.play():a.value.pause(),e.setPlaying=null)}),r(()=>e.muted,t=>{a.value.muted=t}),S(()=>{window.addEventListener("click",()=>{a.value.currentTime===0&&a.value.play()},{once:!0})}),(t,n)=>(x(),A("main",k,[u("video",{ref_key:"video",ref:a,crossorigin:"anonymous",autoplay:!o(s).edit,src:c.value,playsinline:"",onLoadstart:p,onEnded:m,onTimeupdate:d,onPause:n[0]||(n[0]=g=>o(e).playing=!1),onPlay:n[1]||(n[1]=g=>o(e).playing=!0),onDurationchange:f},null,40,C),u("div",D,B(o(e).subtitle),1)]))}},b=v(E,[["__scopeId","data-v-4cf96c2d"]]);export{b as T};
