import{z as dr,m as lt,b as ue,A as ze,B as K,_ as Gt,C as Te,D as Yt,E as Pe,G as pr,o as j,c as ot,e as rt,k as pi,h as Rt,f as tt,H as an,u as De,d as ct,i as mt,T as gi,t as In,I as Jt,q as sn,J as qo,j as kn,n as te,x as ae,F as En,r as zn,s as Vo,y as ye,K as Go,M as yi,N as Ke,O as Uo,P as Zo,Q as vi,R as gr,S as Un,p as mi,U as yr,l as Yo,V as Xo,a as Wo,W as Hr,X as qr,Y as Ko}from"./index-3REa0sbF.js";import{C as jo,b as vr,D as Qo,c as Jo,a as ta,T as Vr}from"./TheControls-D-Uf1ghJ.js";import{T as ea}from"./TheVideo-0_covZk4.js";import{T as na}from"./TheHeader-CFqbFhSm.js";var ra={value:()=>{}};function Zn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Mn(n)}function Mn(t){this._=t}function ia(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Mn.prototype=Zn.prototype={constructor:Mn,on:function(t,e){var n=this._,r=ia(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=oa(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=Gr(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Gr(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Mn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function oa(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Gr(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ra,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var rr="http://www.w3.org/1999/xhtml";const Ur={svg:"http://www.w3.org/2000/svg",xhtml:rr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ur.hasOwnProperty(e)?{space:Ur[e],local:t}:t}function aa(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===rr&&e.documentElement.namespaceURI===rr?e.createElement(t):e.createElementNS(n,t)}}function sa(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function _i(t){var e=Yn(t);return(e.local?sa:aa)(e)}function la(){}function mr(t){return t==null?la:function(){return this.querySelector(t)}}function ua(t){typeof t!="function"&&(t=mr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=new Array(a),f,l,c=0;c<a;++c)(f=o[c])&&(l=t.call(f,f.__data__,c,o))&&("__data__"in f&&(l.__data__=f.__data__),s[c]=l);return new Bt(r,this._parents)}function ca(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function fa(){return[]}function xi(t){return t==null?fa:function(){return this.querySelectorAll(t)}}function ha(t){return function(){return ca(t.apply(this,arguments))}}function da(t){typeof t=="function"?t=ha(t):t=xi(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],s=a.length,f,l=0;l<s;++l)(f=a[l])&&(r.push(t.call(f,f.__data__,l,a)),i.push(f));return new Bt(r,i)}function wi(t){return function(){return this.matches(t)}}function bi(t){return function(e){return e.matches(t)}}var pa=Array.prototype.find;function ga(t){return function(){return pa.call(this.children,t)}}function ya(){return this.firstElementChild}function va(t){return this.select(t==null?ya:ga(typeof t=="function"?t:bi(t)))}var ma=Array.prototype.filter;function _a(){return Array.from(this.children)}function xa(t){return function(){return ma.call(this.children,t)}}function wa(t){return this.selectAll(t==null?_a:xa(typeof t=="function"?t:bi(t)))}function ba(t){typeof t!="function"&&(t=wi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],f,l=0;l<a;++l)(f=o[l])&&t.call(f,f.__data__,l,o)&&s.push(f);return new Bt(r,this._parents)}function Ci(t){return new Array(t.length)}function Ca(){return new Bt(this._enter||this._groups.map(Ci),this._parents)}function Pn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Pn.prototype={constructor:Pn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function La(t){return function(){return t}}function Sa(t,e,n,r,i,o){for(var a=0,s,f=e.length,l=o.length;a<l;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new Pn(t,o[a]);for(;a<f;++a)(s=e[a])&&(i[a]=s)}function Aa(t,e,n,r,i,o,a){var s,f,l=new Map,c=e.length,g=o.length,h=new Array(c),p;for(s=0;s<c;++s)(f=e[s])&&(h[s]=p=a.call(f,f.__data__,s,e)+"",l.has(p)?i[s]=f:l.set(p,f));for(s=0;s<g;++s)p=a.call(t,o[s],s,o)+"",(f=l.get(p))?(r[s]=f,f.__data__=o[s],l.delete(p)):n[s]=new Pn(t,o[s]);for(s=0;s<c;++s)(f=e[s])&&l.get(h[s])===f&&(i[s]=f)}function Ma(t){return t.__data__}function $a(t,e){if(!arguments.length)return Array.from(this,Ma);var n=e?Aa:Sa,r=this._parents,i=this._groups;typeof t!="function"&&(t=La(t));for(var o=i.length,a=new Array(o),s=new Array(o),f=new Array(o),l=0;l<o;++l){var c=r[l],g=i[l],h=g.length,p=Na(t.call(c,c&&c.__data__,l,r)),b=p.length,m=s[l]=new Array(b),v=a[l]=new Array(b),_=f[l]=new Array(h);n(c,g,m,v,_,p,e);for(var T=0,L=0,C,P;T<b;++T)if(C=m[T]){for(T>=L&&(L=T+1);!(P=v[L])&&++L<b;);C._next=P||null}}return a=new Bt(a,r),a._enter=s,a._exit=f,a}function Na(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ta(){return new Bt(this._exit||this._groups.map(Ci),this._parents)}function Ia(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function ka(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),f=0;f<a;++f)for(var l=n[f],c=r[f],g=l.length,h=s[f]=new Array(g),p,b=0;b<g;++b)(p=l[b]||c[b])&&(h[b]=p);for(;f<i;++f)s[f]=n[f];return new Bt(s,this._parents)}function Ea(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function za(t){t||(t=Pa);function e(g,h){return g&&h?t(g.__data__,h.__data__):!g-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,f=i[o]=new Array(s),l,c=0;c<s;++c)(l=a[c])&&(f[c]=l);f.sort(e)}return new Bt(i,this._parents).order()}function Pa(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Da(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Oa(){return Array.from(this)}function Ra(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function Ba(){let t=0;for(const e of this)++t;return t}function Fa(){return!this.node()}function Ha(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function qa(t){return function(){this.removeAttribute(t)}}function Va(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ga(t,e){return function(){this.setAttribute(t,e)}}function Ua(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Za(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ya(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Xa(t,e){var n=Yn(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Va:qa:typeof e=="function"?n.local?Ya:Za:n.local?Ua:Ga)(n,e))}function Li(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Wa(t){return function(){this.style.removeProperty(t)}}function Ka(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ja(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Qa(t,e,n){return arguments.length>1?this.each((e==null?Wa:typeof e=="function"?ja:Ka)(t,e,n??"")):ke(this.node(),t)}function ke(t,e){return t.style.getPropertyValue(e)||Li(t).getComputedStyle(t,null).getPropertyValue(e)}function Ja(t){return function(){delete this[t]}}function ts(t,e){return function(){this[t]=e}}function es(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ns(t,e){return arguments.length>1?this.each((e==null?Ja:typeof e=="function"?es:ts)(t,e)):this.node()[t]}function Si(t){return t.trim().split(/^|\s+/)}function _r(t){return t.classList||new Ai(t)}function Ai(t){this._node=t,this._names=Si(t.getAttribute("class")||"")}Ai.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Mi(t,e){for(var n=_r(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function $i(t,e){for(var n=_r(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function rs(t){return function(){Mi(this,t)}}function is(t){return function(){$i(this,t)}}function os(t,e){return function(){(e.apply(this,arguments)?Mi:$i)(this,t)}}function as(t,e){var n=Si(t+"");if(arguments.length<2){for(var r=_r(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?os:e?rs:is)(n,e))}function ss(){this.textContent=""}function ls(t){return function(){this.textContent=t}}function us(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function cs(t){return arguments.length?this.each(t==null?ss:(typeof t=="function"?us:ls)(t)):this.node().textContent}function fs(){this.innerHTML=""}function hs(t){return function(){this.innerHTML=t}}function ds(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function ps(t){return arguments.length?this.each(t==null?fs:(typeof t=="function"?ds:hs)(t)):this.node().innerHTML}function gs(){this.nextSibling&&this.parentNode.appendChild(this)}function ys(){return this.each(gs)}function vs(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ms(){return this.each(vs)}function _s(t){var e=typeof t=="function"?t:_i(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function xs(){return null}function ws(t,e){var n=typeof t=="function"?t:_i(t),r=e==null?xs:typeof e=="function"?e:mr(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function bs(){var t=this.parentNode;t&&t.removeChild(this)}function Cs(){return this.each(bs)}function Ls(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ss(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function As(t){return this.select(t?Ss:Ls)}function Ms(t){return arguments.length?this.property("__data__",t):this.node().__data__}function $s(t){return function(e){t.call(this,e,this.__data__)}}function Ns(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Ts(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function Is(t,e,n){return function(){var r=this.__on,i,o=$s(e);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function ks(t,e,n){var r=Ns(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var f=0,l=s.length,c;f<l;++f)for(i=0,c=s[f];i<o;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(s=e?Is:Ts,i=0;i<o;++i)this.each(s(r[i],e,n));return this}function Ni(t,e,n){var r=Li(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Es(t,e){return function(){return Ni(this,t,e)}}function zs(t,e){return function(){return Ni(this,t,e.apply(this,arguments))}}function Ps(t,e){return this.each((typeof e=="function"?zs:Es)(t,e))}function*Ds(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Ti=[null];function Bt(t,e){this._groups=t,this._parents=e}function ln(){return new Bt([[document.documentElement]],Ti)}function Os(){return this}Bt.prototype=ln.prototype={constructor:Bt,select:ua,selectAll:da,selectChild:va,selectChildren:wa,filter:ba,data:$a,enter:Ca,exit:Ta,join:Ia,merge:ka,selection:Os,order:Ea,sort:za,call:Da,nodes:Oa,node:Ra,size:Ba,empty:Fa,each:Ha,attr:Xa,style:Qa,property:ns,classed:as,text:cs,html:ps,raise:ys,lower:ms,append:_s,insert:ws,remove:Cs,clone:As,datum:Ms,on:ks,dispatch:Ps,[Symbol.iterator]:Ds};function pe(t){return typeof t=="string"?new Bt([[document.querySelector(t)]],[document.documentElement]):new Bt([[t]],Ti)}function Rs(t){let e;for(;e=t.sourceEvent;)t=e;return t}function be(t,e){if(t=Rs(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const ir={capture:!0,passive:!1};function or(t){t.preventDefault(),t.stopImmediatePropagation()}function Bs(t){var e=t.document.documentElement,n=pe(t).on("dragstart.drag",or,ir);"onselectstart"in e?n.on("selectstart.drag",or,ir):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Fs(t,e){var n=t.document.documentElement,r=pe(t).on("dragstart.drag",null);e&&(r.on("click.drag",or,ir),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function xr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ii(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function un(){}var nn=.7,Dn=1/nn,Ie="\\s*([+-]?\\d+)\\s*",rn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ee="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hs=/^#([0-9a-f]{3,8})$/,qs=new RegExp(`^rgb\\(${Ie},${Ie},${Ie}\\)$`),Vs=new RegExp(`^rgb\\(${ee},${ee},${ee}\\)$`),Gs=new RegExp(`^rgba\\(${Ie},${Ie},${Ie},${rn}\\)$`),Us=new RegExp(`^rgba\\(${ee},${ee},${ee},${rn}\\)$`),Zs=new RegExp(`^hsl\\(${rn},${ee},${ee}\\)$`),Ys=new RegExp(`^hsla\\(${rn},${ee},${ee},${rn}\\)$`),Zr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xr(un,Se,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Yr,formatHex:Yr,formatHex8:Xs,formatHsl:Ws,formatRgb:Xr,toString:Xr});function Yr(){return this.rgb().formatHex()}function Xs(){return this.rgb().formatHex8()}function Ws(){return ki(this).formatHsl()}function Xr(){return this.rgb().formatRgb()}function Se(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Hs.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Wr(e):n===3?new Pt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?wn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?wn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qs.exec(t))?new Pt(e[1],e[2],e[3],1):(e=Vs.exec(t))?new Pt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Gs.exec(t))?wn(e[1],e[2],e[3],e[4]):(e=Us.exec(t))?wn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Zs.exec(t))?Qr(e[1],e[2]/100,e[3]/100,1):(e=Ys.exec(t))?Qr(e[1],e[2]/100,e[3]/100,e[4]):Zr.hasOwnProperty(t)?Wr(Zr[t]):t==="transparent"?new Pt(NaN,NaN,NaN,0):null}function Wr(t){return new Pt(t>>16&255,t>>8&255,t&255,1)}function wn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Pt(t,e,n,r)}function Ks(t){return t instanceof un||(t=Se(t)),t?(t=t.rgb(),new Pt(t.r,t.g,t.b,t.opacity)):new Pt}function ar(t,e,n,r){return arguments.length===1?Ks(t):new Pt(t,e,n,r??1)}function Pt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}xr(Pt,ar,Ii(un,{brighter(t){return t=t==null?Dn:Math.pow(Dn,t),new Pt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?nn:Math.pow(nn,t),new Pt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Pt(Le(this.r),Le(this.g),Le(this.b),On(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Kr,formatHex:Kr,formatHex8:js,formatRgb:jr,toString:jr}));function Kr(){return`#${Ce(this.r)}${Ce(this.g)}${Ce(this.b)}`}function js(){return`#${Ce(this.r)}${Ce(this.g)}${Ce(this.b)}${Ce((isNaN(this.opacity)?1:this.opacity)*255)}`}function jr(){const t=On(this.opacity);return`${t===1?"rgb(":"rgba("}${Le(this.r)}, ${Le(this.g)}, ${Le(this.b)}${t===1?")":`, ${t})`}`}function On(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Le(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ce(t){return t=Le(t),(t<16?"0":"")+t.toString(16)}function Qr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Zt(t,e,n,r)}function ki(t){if(t instanceof Zt)return new Zt(t.h,t.s,t.l,t.opacity);if(t instanceof un||(t=Se(t)),!t)return new Zt;if(t instanceof Zt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,f=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=f<.5?o+i:2-o-i,a*=60):s=f>0&&f<1?0:a,new Zt(a,s,f,t.opacity)}function Qs(t,e,n,r){return arguments.length===1?ki(t):new Zt(t,e,n,r??1)}function Zt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}xr(Zt,Qs,Ii(un,{brighter(t){return t=t==null?Dn:Math.pow(Dn,t),new Zt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?nn:Math.pow(nn,t),new Zt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Pt(tr(t>=240?t-240:t+120,i,r),tr(t,i,r),tr(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Zt(Jr(this.h),bn(this.s),bn(this.l),On(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=On(this.opacity);return`${t===1?"hsl(":"hsla("}${Jr(this.h)}, ${bn(this.s)*100}%, ${bn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Jr(t){return t=(t||0)%360,t<0?t+360:t}function bn(t){return Math.max(0,Math.min(1,t||0))}function tr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const wr=t=>()=>t;function Js(t,e){return function(n){return t+n*e}}function tl(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function el(t){return(t=+t)==1?Ei:function(e,n){return n-e?tl(e,n,t):wr(isNaN(e)?n:e)}}function Ei(t,e){var n=e-t;return n?Js(t,n):wr(isNaN(t)?e:t)}const Rn=function t(e){var n=el(e);function r(i,o){var a=n((i=ar(i)).r,(o=ar(o)).r),s=n(i.g,o.g),f=n(i.b,o.b),l=Ei(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=f(c),i.opacity=l(c),i+""}}return r.gamma=t,r}(1);function nl(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function rl(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function il(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Bn(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function ol(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Qt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function al(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Bn(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var sr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,er=new RegExp(sr.source,"g");function sl(t){return function(){return t}}function ll(t){return function(e){return t(e)+""}}function zi(t,e){var n=sr.lastIndex=er.lastIndex=0,r,i,o,a=-1,s=[],f=[];for(t=t+"",e=e+"";(r=sr.exec(t))&&(i=er.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,f.push({i:a,x:Qt(r,i)})),n=er.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?f[0]?ll(f[0].x):sl(e):(e=f.length,function(l){for(var c=0,g;c<e;++c)s[(g=f[c]).i]=g.x(l);return s.join("")})}function Bn(t,e){var n=typeof e,r;return e==null||n==="boolean"?wr(e):(n==="number"?Qt:n==="string"?(r=Se(e))?(e=r,Rn):zi:e instanceof Se?Rn:e instanceof Date?ol:rl(e)?nl:Array.isArray(e)?il:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?al:Qt)(t,e)}var ti=180/Math.PI,lr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Pi(t,e,n,r,i,o){var a,s,f;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(f=t*n+e*r)&&(n-=t*f,r-=e*f),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,f/=s),t*r<e*n&&(t=-t,e=-e,f=-f,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*ti,skewX:Math.atan(f)*ti,scaleX:a,scaleY:s}}var Cn;function ul(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?lr:Pi(e.a,e.b,e.c,e.d,e.e,e.f)}function cl(t){return t==null||(Cn||(Cn=document.createElementNS("http://www.w3.org/2000/svg","g")),Cn.setAttribute("transform",t),!(t=Cn.transform.baseVal.consolidate()))?lr:(t=t.matrix,Pi(t.a,t.b,t.c,t.d,t.e,t.f))}function Di(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,c,g,h,p,b){if(l!==g||c!==h){var m=p.push("translate(",null,e,null,n);b.push({i:m-4,x:Qt(l,g)},{i:m-2,x:Qt(c,h)})}else(g||h)&&p.push("translate("+g+e+h+n)}function a(l,c,g,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:g.push(i(g)+"rotate(",null,r)-2,x:Qt(l,c)})):c&&g.push(i(g)+"rotate("+c+r)}function s(l,c,g,h){l!==c?h.push({i:g.push(i(g)+"skewX(",null,r)-2,x:Qt(l,c)}):c&&g.push(i(g)+"skewX("+c+r)}function f(l,c,g,h,p,b){if(l!==g||c!==h){var m=p.push(i(p)+"scale(",null,",",null,")");b.push({i:m-4,x:Qt(l,g)},{i:m-2,x:Qt(c,h)})}else(g!==1||h!==1)&&p.push(i(p)+"scale("+g+","+h+")")}return function(l,c){var g=[],h=[];return l=t(l),c=t(c),o(l.translateX,l.translateY,c.translateX,c.translateY,g,h),a(l.rotate,c.rotate,g,h),s(l.skewX,c.skewX,g,h),f(l.scaleX,l.scaleY,c.scaleX,c.scaleY,g,h),l=c=null,function(p){for(var b=-1,m=h.length,v;++b<m;)g[(v=h[b]).i]=v.x(p);return g.join("")}}}var fl=Di(ul,"px, ","px)","deg)"),hl=Di(cl,", ",")",")"),dl=1e-12;function ei(t){return((t=Math.exp(t))+1/t)/2}function pl(t){return((t=Math.exp(t))-1/t)/2}function gl(t){return((t=Math.exp(2*t))-1)/(t+1)}const yl=function t(e,n,r){function i(o,a){var s=o[0],f=o[1],l=o[2],c=a[0],g=a[1],h=a[2],p=c-s,b=g-f,m=p*p+b*b,v,_;if(m<dl)_=Math.log(h/l)/e,v=function(W){return[s+W*p,f+W*b,l*Math.exp(e*W*_)]};else{var T=Math.sqrt(m),L=(h*h-l*l+r*m)/(2*l*n*T),C=(h*h-l*l-r*m)/(2*h*n*T),P=Math.log(Math.sqrt(L*L+1)-L),H=Math.log(Math.sqrt(C*C+1)-C);_=(H-P)/e,v=function(W){var D=W*_,O=ei(P),E=l/(n*T)*(O*gl(e*D+P)-pl(P));return[s+E*p,f+E*b,l*O/ei(e*D+P)]}}return v.duration=_*1e3*e/Math.SQRT2,v}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,f=s*s;return t(a,s,f)},i}(Math.SQRT2,2,4);var Ee=0,je=0,Xe=0,Oi=1e3,Fn,Qe,Hn=0,Ae=0,Xn=0,on=typeof performance=="object"&&performance.now?performance:Date,Ri=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function br(){return Ae||(Ri(vl),Ae=on.now()+Xn)}function vl(){Ae=0}function qn(){this._call=this._time=this._next=null}qn.prototype=Cr.prototype={constructor:qn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?br():+n)+(e==null?0:+e),!this._next&&Qe!==this&&(Qe?Qe._next=this:Fn=this,Qe=this),this._call=t,this._time=n,ur()},stop:function(){this._call&&(this._call=null,this._time=1/0,ur())}};function Cr(t,e,n){var r=new qn;return r.restart(t,e,n),r}function ml(){br(),++Ee;for(var t=Fn,e;t;)(e=Ae-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ee}function ni(){Ae=(Hn=on.now())+Xn,Ee=je=0;try{ml()}finally{Ee=0,xl(),Ae=0}}function _l(){var t=on.now(),e=t-Hn;e>Oi&&(Xn-=e,Hn=t)}function xl(){for(var t,e=Fn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Fn=n);Qe=t,ur(r)}function ur(t){if(!Ee){je&&(je=clearTimeout(je));var e=t-Ae;e>24?(t<1/0&&(je=setTimeout(ni,t-on.now()-Xn)),Xe&&(Xe=clearInterval(Xe))):(Xe||(Hn=on.now(),Xe=setInterval(_l,Oi)),Ee=1,Ri(ni))}}function ri(t,e,n){var r=new qn;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var wl=Zn("start","end","cancel","interrupt"),bl=[],Bi=0,ii=1,cr=2,$n=3,oi=4,fr=5,Nn=6;function Wn(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Cl(t,n,{name:e,index:r,group:i,on:wl,tween:bl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Bi})}function Lr(t,e){var n=Wt(t,e);if(n.state>Bi)throw new Error("too late; already scheduled");return n}function ne(t,e){var n=Wt(t,e);if(n.state>$n)throw new Error("too late; already running");return n}function Wt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Cl(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Cr(o,0,n.time);function o(l){n.state=ii,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var c,g,h,p;if(n.state!==ii)return f();for(c in r)if(p=r[c],p.name===n.name){if(p.state===$n)return ri(a);p.state===oi?(p.state=Nn,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[c]):+c<e&&(p.state=Nn,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[c])}if(ri(function(){n.state===$n&&(n.state=oi,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=cr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===cr){for(n.state=$n,i=new Array(h=n.tween.length),c=0,g=-1;c<h;++c)(p=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++g]=p);i.length=g+1}}function s(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(f),n.state=fr,1),g=-1,h=i.length;++g<h;)i[g].call(t,c);n.state===fr&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=Nn,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function Tn(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>cr&&r.state<fr,r.state=Nn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function Ll(t){return this.each(function(){Tn(this,t)})}function Sl(t,e){var n,r;return function(){var i=ne(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Al(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=ne(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},f=0,l=i.length;f<l;++f)if(i[f].name===e){i[f]=s;break}f===l&&i.push(s)}o.tween=i}}function Ml(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Wt(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?Sl:Al)(n,t,e))}function Sr(t,e,n){var r=t._id;return t.each(function(){var i=ne(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Wt(i,r).value[e]}}function Fi(t,e){var n;return(typeof e=="number"?Qt:e instanceof Se?Rn:(n=Se(e))?(e=n,Rn):zi)(t,e)}function $l(t){return function(){this.removeAttribute(t)}}function Nl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Tl(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function Il(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function kl(t,e,n){var r,i,o;return function(){var a,s=n(this),f;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),f=s+"",a===f?null:a===r&&f===i?o:(i=f,o=e(r=a,s)))}}function El(t,e,n){var r,i,o;return function(){var a,s=n(this),f;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),f=s+"",a===f?null:a===r&&f===i?o:(i=f,o=e(r=a,s)))}}function zl(t,e){var n=Yn(t),r=n==="transform"?hl:Fi;return this.attrTween(t,typeof e=="function"?(n.local?El:kl)(n,r,Sr(this,"attr."+t,e)):e==null?(n.local?Nl:$l)(n):(n.local?Il:Tl)(n,r,e))}function Pl(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Dl(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ol(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Dl(t,o)),n}return i._value=e,i}function Rl(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Pl(t,o)),n}return i._value=e,i}function Bl(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Yn(t);return this.tween(n,(r.local?Ol:Rl)(r,e))}function Fl(t,e){return function(){Lr(this,t).delay=+e.apply(this,arguments)}}function Hl(t,e){return e=+e,function(){Lr(this,t).delay=e}}function ql(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Fl:Hl)(e,t)):Wt(this.node(),e).delay}function Vl(t,e){return function(){ne(this,t).duration=+e.apply(this,arguments)}}function Gl(t,e){return e=+e,function(){ne(this,t).duration=e}}function Ul(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Vl:Gl)(e,t)):Wt(this.node(),e).duration}function Zl(t,e){if(typeof e!="function")throw new Error;return function(){ne(this,t).ease=e}}function Yl(t){var e=this._id;return arguments.length?this.each(Zl(e,t)):Wt(this.node(),e).ease}function Xl(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ne(this,t).ease=n}}function Wl(t){if(typeof t!="function")throw new Error;return this.each(Xl(this._id,t))}function Kl(t){typeof t!="function"&&(t=wi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],f,l=0;l<a;++l)(f=o[l])&&t.call(f,f.__data__,l,o)&&s.push(f);return new le(r,this._parents,this._name,this._id)}function jl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var f=e[s],l=n[s],c=f.length,g=a[s]=new Array(c),h,p=0;p<c;++p)(h=f[p]||l[p])&&(g[p]=h);for(;s<r;++s)a[s]=e[s];return new le(a,this._parents,this._name,this._id)}function Ql(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Jl(t,e,n){var r,i,o=Ql(e)?Lr:ne;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function tu(t,e){var n=this._id;return arguments.length<2?Wt(this.node(),n).on.on(t):this.each(Jl(n,t,e))}function eu(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function nu(){return this.on("end.remove",eu(this._id))}function ru(t){var e=this._name,n=this._id;typeof t!="function"&&(t=mr(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],f=s.length,l=o[a]=new Array(f),c,g,h=0;h<f;++h)(c=s[h])&&(g=t.call(c,c.__data__,h,s))&&("__data__"in c&&(g.__data__=c.__data__),l[h]=g,Wn(l[h],e,n,h,l,Wt(c,n)));return new le(o,this._parents,e,n)}function iu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=xi(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var f=r[s],l=f.length,c,g=0;g<l;++g)if(c=f[g]){for(var h=t.call(c,c.__data__,g,f),p,b=Wt(c,n),m=0,v=h.length;m<v;++m)(p=h[m])&&Wn(p,e,n,m,h,b);o.push(h),a.push(c)}return new le(o,a,e,n)}var ou=ln.prototype.constructor;function au(){return new ou(this._groups,this._parents)}function su(t,e){var n,r,i;return function(){var o=ke(this,t),a=(this.style.removeProperty(t),ke(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function Hi(t){return function(){this.style.removeProperty(t)}}function lu(t,e,n){var r,i=n+"",o;return function(){var a=ke(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function uu(t,e,n){var r,i,o;return function(){var a=ke(this,t),s=n(this),f=s+"";return s==null&&(f=s=(this.style.removeProperty(t),ke(this,t))),a===f?null:a===r&&f===i?o:(i=f,o=e(r=a,s))}}function cu(t,e){var n,r,i,o="style."+e,a="end."+o,s;return function(){var f=ne(this,t),l=f.on,c=f.value[o]==null?s||(s=Hi(e)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(a,i=c),f.on=r}}function fu(t,e,n){var r=(t+="")=="transform"?fl:Fi;return e==null?this.styleTween(t,su(t,r)).on("end.style."+t,Hi(t)):typeof e=="function"?this.styleTween(t,uu(t,r,Sr(this,"style."+t,e))).each(cu(this._id,t)):this.styleTween(t,lu(t,r,e),n).on("end.style."+t,null)}function hu(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function du(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&hu(t,a,n)),r}return o._value=e,o}function pu(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,du(t,e,n??""))}function gu(t){return function(){this.textContent=t}}function yu(t){return function(){var e=t(this);this.textContent=e??""}}function vu(t){return this.tween("text",typeof t=="function"?yu(Sr(this,"text",t)):gu(t==null?"":t+""))}function mu(t){return function(e){this.textContent=t.call(this,e)}}function _u(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&mu(i)),e}return r._value=t,r}function xu(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,_u(t))}function wu(){for(var t=this._name,e=this._id,n=qi(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,f,l=0;l<s;++l)if(f=a[l]){var c=Wt(f,e);Wn(f,t,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new le(r,this._parents,t,n)}function bu(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},f={value:function(){--i===0&&o()}};n.each(function(){var l=ne(this,r),c=l.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(f)),l.on=e}),i===0&&o()})}var Cu=0;function le(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function qi(){return++Cu}var oe=ln.prototype;le.prototype={constructor:le,select:ru,selectAll:iu,selectChild:oe.selectChild,selectChildren:oe.selectChildren,filter:Kl,merge:jl,selection:au,transition:wu,call:oe.call,nodes:oe.nodes,node:oe.node,size:oe.size,empty:oe.empty,each:oe.each,on:tu,attr:zl,attrTween:Bl,style:fu,styleTween:pu,text:vu,textTween:xu,remove:nu,tween:Ml,delay:ql,duration:Ul,ease:Yl,easeVarying:Wl,end:bu,[Symbol.iterator]:oe[Symbol.iterator]};function Lu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Su={time:null,delay:0,duration:250,ease:Lu};function Au(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Mu(t){var e,n;t instanceof le?(e=t._id,t=t._name):(e=qi(),(n=Su).time=br(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,f,l=0;l<s;++l)(f=a[l])&&Wn(f,t,e,l,a,n||Au(f,e));return new le(r,this._parents,t,e)}ln.prototype.interrupt=Ll;ln.prototype.transition=Mu;const Ln=t=>()=>t;function $u(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function se(t,e,n){this.k=t,this.x=e,this.y=n}se.prototype={constructor:se,scale:function(t){return t===1?this:new se(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new se(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ar=new se(1,0,0);se.prototype;function nr(t){t.stopImmediatePropagation()}function We(t){t.preventDefault(),t.stopImmediatePropagation()}function Nu(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Tu(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ai(){return this.__zoom||Ar}function Iu(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ku(){return navigator.maxTouchPoints||"ontouchstart"in this}function Eu(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function zu(){var t=Nu,e=Tu,n=Eu,r=Iu,i=ku,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,f=yl,l=Zn("start","zoom","end"),c,g,h,p=500,b=150,m=0,v=10;function _(d){d.property("__zoom",ai).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",E).filter(i).on("touchstart.zoom",z).on("touchmove.zoom",G).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(d,$,x,A){var k=d.selection?d.selection():d;k.property("__zoom",ai),d!==k?P(d,$,x,A):k.interrupt().each(function(){H(this,arguments).event(A).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},_.scaleBy=function(d,$,x,A){_.scaleTo(d,function(){var k=this.__zoom.k,w=typeof $=="function"?$.apply(this,arguments):$;return k*w},x,A)},_.scaleTo=function(d,$,x,A){_.transform(d,function(){var k=e.apply(this,arguments),w=this.__zoom,S=x==null?C(k):typeof x=="function"?x.apply(this,arguments):x,M=w.invert(S),I=typeof $=="function"?$.apply(this,arguments):$;return n(L(T(w,I),S,M),k,a)},x,A)},_.translateBy=function(d,$,x,A){_.transform(d,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof x=="function"?x.apply(this,arguments):x),e.apply(this,arguments),a)},null,A)},_.translateTo=function(d,$,x,A,k){_.transform(d,function(){var w=e.apply(this,arguments),S=this.__zoom,M=A==null?C(w):typeof A=="function"?A.apply(this,arguments):A;return n(Ar.translate(M[0],M[1]).scale(S.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof x=="function"?-x.apply(this,arguments):-x),w,a)},A,k)};function T(d,$){return $=Math.max(o[0],Math.min(o[1],$)),$===d.k?d:new se($,d.x,d.y)}function L(d,$,x){var A=$[0]-x[0]*d.k,k=$[1]-x[1]*d.k;return A===d.x&&k===d.y?d:new se(d.k,A,k)}function C(d){return[(+d[0][0]+ +d[1][0])/2,(+d[0][1]+ +d[1][1])/2]}function P(d,$,x,A){d.on("start.zoom",function(){H(this,arguments).event(A).start()}).on("interrupt.zoom end.zoom",function(){H(this,arguments).event(A).end()}).tween("zoom",function(){var k=this,w=arguments,S=H(k,w).event(A),M=e.apply(k,w),I=x==null?C(M):typeof x=="function"?x.apply(k,w):x,B=Math.max(M[1][0]-M[0][0],M[1][1]-M[0][1]),U=k.__zoom,F=typeof $=="function"?$.apply(k,w):$,V=f(U.invert(I).concat(B/U.k),F.invert(I).concat(B/F.k));return function(q){if(q===1)q=F;else{var Y=V(q),Q=B/Y[2];q=new se(Q,I[0]-Y[0]*Q,I[1]-Y[1]*Q)}S.zoom(null,q)}})}function H(d,$,x){return!x&&d.__zooming||new W(d,$)}function W(d,$){this.that=d,this.args=$,this.active=0,this.sourceEvent=null,this.extent=e.apply(d,$),this.taps=0}W.prototype={event:function(d){return d&&(this.sourceEvent=d),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(d,$){return this.mouse&&d!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&d!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&d!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(d){var $=pe(this.that).datum();l.call(d,this.that,new $u(d,{sourceEvent:this.sourceEvent,target:_,type:d,transform:this.that.__zoom,dispatch:l}),$)}};function D(d,...$){if(!t.apply(this,arguments))return;var x=H(this,$).event(d),A=this.__zoom,k=Math.max(o[0],Math.min(o[1],A.k*Math.pow(2,r.apply(this,arguments)))),w=be(d);if(x.wheel)(x.mouse[0][0]!==w[0]||x.mouse[0][1]!==w[1])&&(x.mouse[1]=A.invert(x.mouse[0]=w)),clearTimeout(x.wheel);else{if(A.k===k)return;x.mouse=[w,A.invert(w)],Tn(this),x.start()}We(d),x.wheel=setTimeout(S,b),x.zoom("mouse",n(L(T(A,k),x.mouse[0],x.mouse[1]),x.extent,a));function S(){x.wheel=null,x.end()}}function O(d,...$){if(h||!t.apply(this,arguments))return;var x=d.currentTarget,A=H(this,$,!0).event(d),k=pe(d.view).on("mousemove.zoom",I,!0).on("mouseup.zoom",B,!0),w=be(d,x),S=d.clientX,M=d.clientY;Bs(d.view),nr(d),A.mouse=[w,this.__zoom.invert(w)],Tn(this),A.start();function I(U){if(We(U),!A.moved){var F=U.clientX-S,V=U.clientY-M;A.moved=F*F+V*V>m}A.event(U).zoom("mouse",n(L(A.that.__zoom,A.mouse[0]=be(U,x),A.mouse[1]),A.extent,a))}function B(U){k.on("mousemove.zoom mouseup.zoom",null),Fs(U.view,A.moved),We(U),A.event(U).end()}}function E(d,...$){if(t.apply(this,arguments)){var x=this.__zoom,A=be(d.changedTouches?d.changedTouches[0]:d,this),k=x.invert(A),w=x.k*(d.shiftKey?.5:2),S=n(L(T(x,w),A,k),e.apply(this,$),a);We(d),s>0?pe(this).transition().duration(s).call(P,S,A,d):pe(this).call(_.transform,S,A,d)}}function z(d,...$){if(t.apply(this,arguments)){var x=d.touches,A=x.length,k=H(this,$,d.changedTouches.length===A).event(d),w,S,M,I;for(nr(d),S=0;S<A;++S)M=x[S],I=be(M,this),I=[I,this.__zoom.invert(I),M.identifier],k.touch0?!k.touch1&&k.touch0[2]!==I[2]&&(k.touch1=I,k.taps=0):(k.touch0=I,w=!0,k.taps=1+!!c);c&&(c=clearTimeout(c)),w&&(k.taps<2&&(g=I[0],c=setTimeout(function(){c=null},p)),Tn(this),k.start())}}function G(d,...$){if(this.__zooming){var x=H(this,$).event(d),A=d.changedTouches,k=A.length,w,S,M,I;for(We(d),w=0;w<k;++w)S=A[w],M=be(S,this),x.touch0&&x.touch0[2]===S.identifier?x.touch0[0]=M:x.touch1&&x.touch1[2]===S.identifier&&(x.touch1[0]=M);if(S=x.that.__zoom,x.touch1){var B=x.touch0[0],U=x.touch0[1],F=x.touch1[0],V=x.touch1[1],q=(q=F[0]-B[0])*q+(q=F[1]-B[1])*q,Y=(Y=V[0]-U[0])*Y+(Y=V[1]-U[1])*Y;S=T(S,Math.sqrt(q/Y)),M=[(B[0]+F[0])/2,(B[1]+F[1])/2],I=[(U[0]+V[0])/2,(U[1]+V[1])/2]}else if(x.touch0)M=x.touch0[0],I=x.touch0[1];else return;x.zoom("touch",n(L(S,M,I),x.extent,a))}}function R(d,...$){if(this.__zooming){var x=H(this,$).event(d),A=d.changedTouches,k=A.length,w,S;for(nr(d),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),w=0;w<k;++w)S=A[w],x.touch0&&x.touch0[2]===S.identifier?delete x.touch0:x.touch1&&x.touch1[2]===S.identifier&&delete x.touch1;if(x.touch1&&!x.touch0&&(x.touch0=x.touch1,delete x.touch1),x.touch0)x.touch0[1]=this.__zoom.invert(x.touch0[0]);else if(x.end(),x.taps===2&&(S=be(S,this),Math.hypot(g[0]-S[0],g[1]-S[1])<v)){var M=pe(this).on("dblclick.zoom");M&&M.apply(this,arguments)}}}return _.wheelDelta=function(d){return arguments.length?(r=typeof d=="function"?d:Ln(+d),_):r},_.filter=function(d){return arguments.length?(t=typeof d=="function"?d:Ln(!!d),_):t},_.touchable=function(d){return arguments.length?(i=typeof d=="function"?d:Ln(!!d),_):i},_.extent=function(d){return arguments.length?(e=typeof d=="function"?d:Ln([[+d[0][0],+d[0][1]],[+d[1][0],+d[1][1]]]),_):e},_.scaleExtent=function(d){return arguments.length?(o[0]=+d[0],o[1]=+d[1],_):[o[0],o[1]]},_.translateExtent=function(d){return arguments.length?(a[0][0]=+d[0][0],a[1][0]=+d[1][0],a[0][1]=+d[0][1],a[1][1]=+d[1][1],_):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},_.constrain=function(d){return arguments.length?(n=d,_):n},_.duration=function(d){return arguments.length?(s=+d,_):s},_.interpolate=function(d){return arguments.length?(f=d,_):f},_.on=function(){var d=l.on.apply(l,arguments);return d===l?_:d},_.clickDistance=function(d){return arguments.length?(m=(d=+d)*d,_):Math.sqrt(m)},_.tapDistance=function(d){return arguments.length?(v=+d,_):v},_}const Oe=dr("layout",()=>{const t=lt({}),e=lt({x:0,y:0}),n=lt({x:0,y:0,k:1});return{nodes:t,offset:e,transform:n}});function Pu(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function i(){var o,a=n.length,s,f=0,l=0;for(o=0;o<a;++o)s=n[o],f+=s.x,l+=s.y;for(f=(f/a-t)*r,l=(l/a-e)*r,o=0;o<a;++o)s=n[o],s.x-=f,s.y-=l}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(t=+o,i):t},i.y=function(o){return arguments.length?(e=+o,i):e},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function Du(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Vi(this.cover(e,n),e,n,t)}function Vi(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o=t._root,a={data:r},s=t._x0,f=t._y0,l=t._x1,c=t._y1,g,h,p,b,m,v,_,T;if(!o)return t._root=a,t;for(;o.length;)if((m=e>=(g=(s+l)/2))?s=g:l=g,(v=n>=(h=(f+c)/2))?f=h:c=h,i=o,!(o=o[_=v<<1|m]))return i[_]=a,t;if(p=+t._x.call(null,o.data),b=+t._y.call(null,o.data),e===p&&n===b)return a.next=o,i?i[_]=a:t._root=a,t;do i=i?i[_]=new Array(4):t._root=new Array(4),(m=e>=(g=(s+l)/2))?s=g:l=g,(v=n>=(h=(f+c)/2))?f=h:c=h;while((_=v<<1|m)===(T=(b>=h)<<1|p>=g));return i[T]=o,i[_]=a,t}function Ou(t){var e,n,r=t.length,i,o,a=new Array(r),s=new Array(r),f=1/0,l=1/0,c=-1/0,g=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(a[n]=i,s[n]=o,i<f&&(f=i),i>c&&(c=i),o<l&&(l=o),o>g&&(g=o));if(f>c||l>g)return this;for(this.cover(f,l).cover(c,g),n=0;n<r;++n)Vi(this,a[n],s[n],t[n]);return this}function Ru(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a=i-n||1,s=this._root,f,l;n>t||t>=i||r>e||e>=o;)switch(l=(e<r)<<1|t<n,f=new Array(4),f[l]=s,s=f,a*=2,l){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Bu(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Fu(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Nt(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Hu(t,e,n){var r,i=this._x0,o=this._y0,a,s,f,l,c=this._x1,g=this._y1,h=[],p=this._root,b,m;for(p&&h.push(new Nt(p,i,o,c,g)),n==null?n=1/0:(i=t-n,o=e-n,c=t+n,g=e+n,n*=n);b=h.pop();)if(!(!(p=b.node)||(a=b.x0)>c||(s=b.y0)>g||(f=b.x1)<i||(l=b.y1)<o))if(p.length){var v=(a+f)/2,_=(s+l)/2;h.push(new Nt(p[3],v,_,f,l),new Nt(p[2],a,_,v,l),new Nt(p[1],v,s,f,_),new Nt(p[0],a,s,v,_)),(m=(e>=_)<<1|t>=v)&&(b=h[h.length-1],h[h.length-1]=h[h.length-1-m],h[h.length-1-m]=b)}else{var T=t-+this._x.call(null,p.data),L=e-+this._y.call(null,p.data),C=T*T+L*L;if(C<n){var P=Math.sqrt(n=C);i=t-P,o=e-P,c=t+P,g=e+P,r=p.data}}return r}function qu(t){if(isNaN(c=+this._x.call(null,t))||isNaN(g=+this._y.call(null,t)))return this;var e,n=this._root,r,i,o,a=this._x0,s=this._y0,f=this._x1,l=this._y1,c,g,h,p,b,m,v,_;if(!n)return this;if(n.length)for(;;){if((b=c>=(h=(a+f)/2))?a=h:f=h,(m=g>=(p=(s+l)/2))?s=p:l=p,e=n,!(n=n[v=m<<1|b]))return this;if(!n.length)break;(e[v+1&3]||e[v+2&3]||e[v+3&3])&&(r=e,_=v)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[v]=o:delete e[v],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[_]=n:this._root=n),this):(this._root=o,this)}function Vu(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Gu(){return this._root}function Uu(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Zu(t){var e=[],n,r=this._root,i,o,a,s,f;for(r&&e.push(new Nt(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,o=n.x0,a=n.y0,s=n.x1,f=n.y1)&&r.length){var l=(o+s)/2,c=(a+f)/2;(i=r[3])&&e.push(new Nt(i,l,c,s,f)),(i=r[2])&&e.push(new Nt(i,o,c,l,f)),(i=r[1])&&e.push(new Nt(i,l,a,s,c)),(i=r[0])&&e.push(new Nt(i,o,a,l,c))}return this}function Yu(t){var e=[],n=[],r;for(this._root&&e.push(new Nt(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,f=r.x1,l=r.y1,c=(a+f)/2,g=(s+l)/2;(o=i[0])&&e.push(new Nt(o,a,s,c,g)),(o=i[1])&&e.push(new Nt(o,c,s,f,g)),(o=i[2])&&e.push(new Nt(o,a,g,c,l)),(o=i[3])&&e.push(new Nt(o,c,g,f,l))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Xu(t){return t[0]}function Wu(t){return arguments.length?(this._x=t,this):this._x}function Ku(t){return t[1]}function ju(t){return arguments.length?(this._y=t,this):this._y}function Mr(t,e,n){var r=new $r(e??Xu,n??Ku,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function $r(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function si(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Tt=Mr.prototype=$r.prototype;Tt.copy=function(){var t=new $r(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=si(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=si(r));return t};Tt.add=Du;Tt.addAll=Ou;Tt.cover=Ru;Tt.data=Bu;Tt.extent=Fu;Tt.find=Hu;Tt.remove=qu;Tt.removeAll=Vu;Tt.root=Gu;Tt.size=Uu;Tt.visit=Zu;Tt.visitAfter=Yu;Tt.x=Wu;Tt.y=ju;function Xt(t){return function(){return t}}function ge(t){return(t()-.5)*1e-6}function Qu(t){return t.x+t.vx}function Ju(t){return t.y+t.vy}function tc(t){var e,n,r,i=1,o=1;typeof t!="function"&&(t=Xt(t==null?1:+t));function a(){for(var l,c=e.length,g,h,p,b,m,v,_=0;_<o;++_)for(g=Mr(e,Qu,Ju).visitAfter(s),l=0;l<c;++l)h=e[l],m=n[h.index],v=m*m,p=h.x+h.vx,b=h.y+h.vy,g.visit(T);function T(L,C,P,H,W){var D=L.data,O=L.r,E=m+O;if(D){if(D.index>h.index){var z=p-D.x-D.vx,G=b-D.y-D.vy,R=z*z+G*G;R<E*E&&(z===0&&(z=ge(r),R+=z*z),G===0&&(G=ge(r),R+=G*G),R=(E-(R=Math.sqrt(R)))/R*i,h.vx+=(z*=R)*(E=(O*=O)/(v+O)),h.vy+=(G*=R)*E,D.vx-=z*(E=1-E),D.vy-=G*E)}return}return C>p+E||H<p-E||P>b+E||W<b-E}}function s(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function f(){if(e){var l,c=e.length,g;for(n=new Array(c),l=0;l<c;++l)g=e[l],n[g.index]=+t(g,l,e)}}return a.initialize=function(l,c){e=l,r=c,f()},a.iterations=function(l){return arguments.length?(o=+l,a):o},a.strength=function(l){return arguments.length?(i=+l,a):i},a.radius=function(l){return arguments.length?(t=typeof l=="function"?l:Xt(+l),f(),a):t},a}function ec(t){return t.index}function li(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function nc(t){var e=ec,n=g,r,i=Xt(30),o,a,s,f,l,c=1;t==null&&(t=[]);function g(v){return 1/Math.min(s[v.source.index],s[v.target.index])}function h(v){for(var _=0,T=t.length;_<c;++_)for(var L=0,C,P,H,W,D,O,E;L<T;++L)C=t[L],P=C.source,H=C.target,W=H.x+H.vx-P.x-P.vx||ge(l),D=H.y+H.vy-P.y-P.vy||ge(l),O=Math.sqrt(W*W+D*D),O=(O-o[L])/O*v*r[L],W*=O,D*=O,H.vx-=W*(E=f[L]),H.vy-=D*E,P.vx+=W*(E=1-E),P.vy+=D*E}function p(){if(a){var v,_=a.length,T=t.length,L=new Map(a.map((P,H)=>[e(P,H,a),P])),C;for(v=0,s=new Array(_);v<T;++v)C=t[v],C.index=v,typeof C.source!="object"&&(C.source=li(L,C.source)),typeof C.target!="object"&&(C.target=li(L,C.target)),s[C.source.index]=(s[C.source.index]||0)+1,s[C.target.index]=(s[C.target.index]||0)+1;for(v=0,f=new Array(T);v<T;++v)C=t[v],f[v]=s[C.source.index]/(s[C.source.index]+s[C.target.index]);r=new Array(T),b(),o=new Array(T),m()}}function b(){if(a)for(var v=0,_=t.length;v<_;++v)r[v]=+n(t[v],v,t)}function m(){if(a)for(var v=0,_=t.length;v<_;++v)o[v]=+i(t[v],v,t)}return h.initialize=function(v,_){a=v,l=_,p()},h.links=function(v){return arguments.length?(t=v,p(),h):t},h.id=function(v){return arguments.length?(e=v,h):e},h.iterations=function(v){return arguments.length?(c=+v,h):c},h.strength=function(v){return arguments.length?(n=typeof v=="function"?v:Xt(+v),b(),h):n},h.distance=function(v){return arguments.length?(i=typeof v=="function"?v:Xt(+v),m(),h):i},h}const rc=1664525,ic=1013904223,ui=4294967296;function oc(){let t=1;return()=>(t=(rc*t+ic)%ui)/ui}function ac(t){return t.x}function sc(t){return t.y}var lc=10,uc=Math.PI*(3-Math.sqrt(5));function cc(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,f=Cr(g),l=Zn("tick","end"),c=oc();t==null&&(t=[]);function g(){h(),l.call("tick",e),n<r&&(f.stop(),l.call("end",e))}function h(m){var v,_=t.length,T;m===void 0&&(m=1);for(var L=0;L<m;++L)for(n+=(o-n)*i,s.forEach(function(C){C(n)}),v=0;v<_;++v)T=t[v],T.fx==null?T.x+=T.vx*=a:(T.x=T.fx,T.vx=0),T.fy==null?T.y+=T.vy*=a:(T.y=T.fy,T.vy=0);return e}function p(){for(var m=0,v=t.length,_;m<v;++m){if(_=t[m],_.index=m,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var T=lc*Math.sqrt(.5+m),L=m*uc;_.x=T*Math.cos(L),_.y=T*Math.sin(L)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function b(m){return m.initialize&&m.initialize(t,c),m}return p(),e={tick:h,restart:function(){return f.restart(g),e},stop:function(){return f.stop(),e},nodes:function(m){return arguments.length?(t=m,p(),s.forEach(b),e):t},alpha:function(m){return arguments.length?(n=+m,e):n},alphaMin:function(m){return arguments.length?(r=+m,e):r},alphaDecay:function(m){return arguments.length?(i=+m,e):+i},alphaTarget:function(m){return arguments.length?(o=+m,e):o},velocityDecay:function(m){return arguments.length?(a=1-m,e):1-a},randomSource:function(m){return arguments.length?(c=m,s.forEach(b),e):c},force:function(m,v){return arguments.length>1?(v==null?s.delete(m):s.set(m,b(v)),e):s.get(m)},find:function(m,v,_){var T=0,L=t.length,C,P,H,W,D;for(_==null?_=1/0:_*=_,T=0;T<L;++T)W=t[T],C=m-W.x,P=v-W.y,H=C*C+P*P,H<_&&(D=W,_=H);return D},on:function(m,v){return arguments.length>1?(l.on(m,v),e):l.on(m)}}}function fc(){var t,e,n,r,i=Xt(-30),o,a=1,s=1/0,f=.81;function l(p){var b,m=t.length,v=Mr(t,ac,sc).visitAfter(g);for(r=p,b=0;b<m;++b)e=t[b],v.visit(h)}function c(){if(t){var p,b=t.length,m;for(o=new Array(b),p=0;p<b;++p)m=t[p],o[m.index]=+i(m,p,t)}}function g(p){var b=0,m,v,_=0,T,L,C;if(p.length){for(T=L=C=0;C<4;++C)(m=p[C])&&(v=Math.abs(m.value))&&(b+=m.value,_+=v,T+=v*m.x,L+=v*m.y);p.x=T/_,p.y=L/_}else{m=p,m.x=m.data.x,m.y=m.data.y;do b+=o[m.data.index];while(m=m.next)}p.value=b}function h(p,b,m,v){if(!p.value)return!0;var _=p.x-e.x,T=p.y-e.y,L=v-b,C=_*_+T*T;if(L*L/f<C)return C<s&&(_===0&&(_=ge(n),C+=_*_),T===0&&(T=ge(n),C+=T*T),C<a&&(C=Math.sqrt(a*C)),e.vx+=_*p.value*r/C,e.vy+=T*p.value*r/C),!0;if(p.length||C>=s)return;(p.data!==e||p.next)&&(_===0&&(_=ge(n),C+=_*_),T===0&&(T=ge(n),C+=T*T),C<a&&(C=Math.sqrt(a*C)));do p.data!==e&&(L=o[p.data.index]*r/C,e.vx+=_*L,e.vy+=T*L);while(p=p.next)}return l.initialize=function(p,b){t=p,n=b,c()},l.strength=function(p){return arguments.length?(i=typeof p=="function"?p:Xt(+p),c(),l):i},l.distanceMin=function(p){return arguments.length?(a=p*p,l):Math.sqrt(a)},l.distanceMax=function(p){return arguments.length?(s=p*p,l):Math.sqrt(s)},l.theta=function(p){return arguments.length?(f=p*p,l):Math.sqrt(f)},l}function hc(t,e,n){var r,i=Xt(.1),o,a;typeof t!="function"&&(t=Xt(+t)),e==null&&(e=0),n==null&&(n=0);function s(l){for(var c=0,g=r.length;c<g;++c){var h=r[c],p=h.x-e||1e-6,b=h.y-n||1e-6,m=Math.sqrt(p*p+b*b),v=(a[c]-m)*o[c]*l/m;h.vx+=p*v,h.vy+=b*v}}function f(){if(r){var l,c=r.length;for(o=new Array(c),a=new Array(c),l=0;l<c;++l)a[l]=+t(r[l],l,r),o[l]=isNaN(a[l])?0:+i(r[l],l,r)}}return s.initialize=function(l){r=l,f()},s.strength=function(l){return arguments.length?(i=typeof l=="function"?l:Xt(+l),f(),s):i},s.radius=function(l){return arguments.length?(t=typeof l=="function"?l:Xt(+l),f(),s):t},s.x=function(l){return arguments.length?(e=+l,s):e},s.y=function(l){return arguments.length?(n=+l,s):n},s}const Ne=ue(),$e=Oe();function dc(t){var c,g;$e.offset.x+=((c=$e.nodes[t])==null?void 0:c.x)??0,$e.offset.y+=((g=$e.nodes[t])==null?void 0:g.y)??0;const n=Gi(t,1).flat(2),r=[...new Set(n.map(h=>h.id))].filter(h=>{var p;return["entity","predicate"].includes((p=Ne.data.nodes[h])==null?void 0:p.type)}),o=[...r.map(h=>{const p=n.filter(b=>b.id===h).map(({depth:b})=>b);return{id:h,depth:1-Math.max(...p)}}).map(({id:h,depth:p})=>({id:h,depth:p,...l(h)}))],a=[...Ne.data.edges.filter(h=>r.includes(h.nodes[0])&&r.includes(h.nodes[1])).map(h=>({source:h.nodes[0],target:h.nodes[1]}))],s=Ne.data.nodes[t].class;s!=null&&(o.push({id:s,depth:1,...l(s)}),a.push({source:t,target:s})),Ne.nodes.filter(h=>h.class===t).forEach(h=>{o.push({id:h.id,depth:1,...l(h.id)}),a.push({source:h.id,target:t})});const f=cc(o).force("link",nc(a).id(h=>h.id).distance(100)).force("collide",tc().radius(h=>{var p;return((p=Ne.data.nodes[h.id])==null?void 0:p.type)==="graph"?160:50})).force("charge",fc().strength(-5e3)).force("center",Pu(0,0)).force("radial",hc(h=>h.depth*550,0,0).strength(2));for(let h=0;h<1e3;h++)f.tick();return Object.fromEntries(o.filter(({proxy:h})=>!h).map(({id:h,x:p,y:b})=>[h,{x:p,y:b}]));function l(h){if(h===t)return{x:0,y:0};if($e.nodes[h]!=null)return $e.nodes[h];const p=Math.random()*Math.PI*2;return{x:Math.cos(p)*250,y:Math.sin(p)*250}}}function Gi(t,e=1){return[{id:t,depth:e},...Ne.data.edges.filter(n=>n.nodes.includes(t)).map(n=>{const r=n.nodes.find(i=>i!==t);return e===1?{id:r,depth:0}:Gi(r,e-1)})]}const Nr=dr("display",()=>{const t=ze(),e=ue(),n=K(()=>{var l,c;return((l=e.node)==null?void 0:l.marker)==null?[]:(c=e.node)==null?void 0:c.marker.filter(g=>g.time<=t.time).sort((g,h)=>g.time-h.time)}),r=K(()=>{var l,c;return(c=(l=e.node)==null?void 0:l.marker)==null?void 0:c.find(g=>g.time===t.time)}),i=K(()=>n.value.reduce((l,c)=>({...l,...c.states}),{states:{}})),o=K(()=>{var l;return(l=n.value.findLast(c=>c.bounds!=null))==null?void 0:l.bounds});function a(l){return l.includes("hide")?"hide":l.every(c=>c==="highlight")?"highlight":"default"}function s(l){const c=l.map(g=>e.data.nodes[g].inheritDisplay?f(g):i.value[g]);return a(c)}function f(l){const c=e.data.edges.filter(g=>g.nodes.includes(l)).map(g=>{const h=g.nodes.find(p=>p!==l);return i.value[h]});return a(c)}return{markers:n,exactMarker:r,states:i,bounds:o,inheritStateFromNodes:s,inheritStateFromNeighbor:f}}),pc=dr("connect",()=>{const t=ue(),e=lt(!1),n=lt({x:100,y:100}),r=lt(null),i=lt(null),o=lt(null),a=new AbortController;function s(l,c,g){e.value=!0,i.value=c,r.value=l,o.value=g,window.addEventListener("keydown",h=>{h.key==="Escape"&&(a.abort(),e.value=!1)},{signal:a.signal})}function f(l){a.abort(),e.value=!1,t.data.edges.push({nodes:[r.value,l],arrow:i.value,graph:o.value,id:crypto.randomUUID()})}return{connecting:e,offset:n,open:s,start:r,close:f}}),tn=Oe();function gc(t){var r;const e=document.createRange(),n=(r=t.value)==null?void 0:r.childNodes;return n==null?0:(e.setStartBefore(n[0]),e.setEndAfter(n[n.length-1]),`${e.getBoundingClientRect().width/tn.transform.k}px`)}function Ui(t,e,n,r=0,i=0){var h;const o=document.createRange();if(((h=t.value)==null?void 0:h.childNodes)==null)return{};let s=t.value.firstElementChild;for(let p=r;p>0;p--)s=s.nextElementSibling;let f=t.value.lastElementChild;for(let p=i;p>0;p--)f=f.previousElementSibling;o.setStartBefore(s),o.setEndAfter(f);const l=o.getBoundingClientRect(),c=t.value.getBoundingClientRect().width,g={...n,width:Math.min(l.width,c)/tn.transform.k,height:l.height/tn.transform.k};return tn.nodes[e]=g,g}function ci(t){if(t!=null)return t.getBoundingClientRect().width/tn.transform.k}const yc={class:"horizontal-slider"},vc=["disabled"],mc=["disabled"],_c=30,xc={__name:"HorizontalSlider",props:{itemWidth:{type:Number,default:250},gap:{type:Number,default:10},position:{type:Number,default:null},noArrows:Boolean},emits:["select-item","update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=lt(null),o=lt(0),a=lt(0),s=lt(0),f=lt(null),l=lt(null),c=new ResizeObserver(m=>{for(const v of m)v.contentRect&&(f.value=`${(window.innerWidth-800)/2-30}px`,l.value=`${Math.max((window.innerWidth-800)/2-10,30)}px`,Te(()=>{o.value=i.value.scrollWidth,a.value=i.value.offsetWidth}))}),g=K(()=>s.value>35&&!n.noArrows),h=K(()=>s.value<o.value-a.value-35&&!n.noArrows);function p(){s.value=i.value.scrollLeft??0,r("select-item",Math.round((s.value-_c)/(n.itemWidth+n.gap)))}const b=m=>{i.value.scrollBy({left:(n.itemWidth+n.gap)*m,behavior:"smooth"})};return Yt(()=>n.position,m=>{m!=null&&i.value.scrollTo({left:(n.itemWidth+n.gap)*m,behavior:"smooth"})}),Pe(()=>{n.position&&i.value.scrollTo({left:(n.itemWidth+n.gap)*n.position,behavior:"instant"}),c.observe(i.value)}),pr(()=>{c.unobserve(i.value)}),(m,v)=>(j(),ot("div",yc,[rt("button",{disabled:!g.value,tabindex:"-1",class:"arrow left",onClick:v[0]||(v[0]=_=>b(-1))}," ← ",8,vc),rt("button",{disabled:!h.value,tabindex:"-1",class:"arrow right",onClick:v[1]||(v[1]=_=>b(1))}," → ",8,mc),rt("div",{ref_key:"wrapper",ref:i,class:"wrapper",onScroll:p,style:{scrollPaddingInlineStart:"0px"}},[pi(m.$slots,"default",{},void 0,!0)],544)]))}},wc=Gt(xc,[["__scopeId","data-v-469e1bed"]]),bc={class:"icon",width:"21",height:"21",viewBox:"0 0 21 21",xmlns:"http://www.w3.org/2000/svg"};function Cc(t,e){return j(),ot("svg",bc,e[0]||(e[0]=[rt("path",{d:"M10.5,21 C16.2989899,21 21,16.2989899 21,10.5 C21,4.70101013 16.2989899,0 10.5,0 C4.70101013,0 0,4.70101013 0,10.5 C0,16.2989899 4.70101013,21 10.5,21 Z M10.5,14 C12.4329966,14 14,12.4329966 14,10.5 C14,8.56700338 12.4329966,7 10.5,7 C8.56700338,7 7,8.56700338 7,10.5 C7,12.4329966 8.56700338,14 10.5,14 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const Lc={name:"base-IconPlaying",render:Cc},Sc={__name:"IconPlaying",setup(t){return(e,n)=>(j(),Rt(tt(Lc)))}},Ac=Gt(Sc,[["__scopeId","data-v-aea62c91"]]),Mc=["src"],$c={key:1,class:"image-placeholder"},Nc={class:"icon"},Tc={__name:"GraphNodeGraph",props:{node:Object,id:String,position:Object},setup(t,{expose:e}){const n=t,r=an(),i=ze(),o=De(),a=lt(null),s=lt(null),f=K(()=>r.localize(n.node.label)),l=K(()=>r.getMediaUrl(n.node.image)),c=K(()=>({"--graph-accent":`var(--${n.node.color})`})),g=K(()=>i.graphId===n.id&&i.playing),h=K(()=>i.next===n.id),p=K(()=>{if(!h.value)return;const m=i.duration-i.time;if(!(m>5))return{"--autoplay":`${100-m*20}%`}});Pe(()=>{b()}),Yt(()=>o.lang,()=>Te(()=>b()));function b(m){Ui(s,n.id,n.position,null,m),console.log()}return e({el:s}),(m,v)=>(j(),ot("div",{class:"node-graph",ref_key:"el",ref:s,style:Jt({...c.value,...p.value})},[l.value?(j(),ot("img",{key:0,src:l.value,draggable:"false"},null,8,Mc)):(j(),ot("div",$c)),rt("div",Nc,[ct(gi,{name:"fade",mode:"out-in"},{default:mt(()=>[g.value?(j(),Rt(Ac,{key:1})):(j(),Rt(tt(jo),{key:0}))]),_:1})]),rt("div",{class:"text",ref_key:"textElement",ref:a},[rt("span",null,[rt("span",null,In(f.value),1)])],512)],4))}},Zi=Gt(Tc,[["__scopeId","data-v-487f4295"]]),Ic={key:0},kc={key:2,class:"description"},Ec={key:3,class:"urls"},zc=["href"],Pc={__name:"GraphNodeEntity",props:{node:Object,id:String,occurances:Array,position:Object},setup(t,{expose:e}){const n=sn(),r=t,i=ue(),o=De(),a=an(),s=lt(null),f=lt(null),l=lt(null),c=lt(null),g=lt(!1),h=lt(null),p=lt(null),b=lt(0),m=K(()=>{var D;return(D=i.data.nodes[r.node.class])==null?void 0:D.label}),v=K(()=>n.params.id===r.id),_=K(()=>i.storyId!=null&&n.params.type!=="graph"&&i.data.nodes[i.storyId].allocations[r.id]==null),T=K(()=>{if(v.value)return a.localize(r.node.description,!0)}),L=K(()=>{if(!(!v.value||r.node.url==null))return r.node.url.map(D=>({full:D,domain:new URL(D).hostname.replace(/^www\./,"")}))});Pe(()=>{C()}),Yt(v,D=>{D&&(g.value=!0,b.value=Math.max(r.occurances.findIndex(z=>z.id===i.storyId),0));const O=(ci(s.value.querySelector(".label"))-250)/2;h.value={margin:`0 ${-O}px 0 ${O}px`};const E=(ci(s.value.querySelector(".class"))-250)/2;p.value={margin:`0 ${-E}px 0 ${E}px`},Te(()=>{C(D?0:1),D||(g.value=!0,h.value=null,p.value=null)})}),Yt(()=>o.lang,()=>Te(()=>C())),Yt(()=>i.storyIdForce,D=>{if(D!=null&&v.value){const O=r.occurances.findIndex(E=>E.id===D);b.value=null,i.storyIdForce=null,Te(()=>b.value=O)}}),e({el:s});function C(D){const O=Ui(s,r.id,r.position,null,D);c.value=`${O.height}px`}function P(D){D.propertyName==="margin-left"&&(g.value=!1,h.value=null,p.value=null)}function H(D){i.storyId=r.occurances[D].id}function W(){if(n.name==="graph"&&n.params.type!=="graph"&&!v.value){const D=n.params.id,O=i.data.edges.filter(E=>E.nodes.includes(D)&&E.nodes.includes(r.id)&&E.graph!=null);if(O.length){if(O.find(E=>E.graph===i.storyId))return;i.storyIdForce=O[0].graph}}}return(D,O)=>{const E=qo("RouterLink");return j(),ot("div",{class:te(["entity",{detail:v.value,secondary:_.value}]),ref_key:"el",ref:s,style:Jt({width:l.value,height:c.value}),onMouseover:W},[rt("span",{class:te(["label",{"animate-text-align":g.value}]),style:Jt(h.value),onTransitionend:P},[ct(kn,{text:t.node.label},null,8,["text"])],38),m.value?(j(),ot("br",Ic)):ae("",!0),m.value?(j(),ot("span",{key:1,class:te(["class",{"animate-text-align":g.value}]),style:Jt(p.value)},[ct(kn,{text:m.value},null,8,["text"])],6)):ae("",!0),T.value?(j(),ot("div",kc,In(T.value),1)):ae("",!0),L.value&&!tt(o).exhibition?(j(),ot("div",Ec,[(j(!0),ot(En,null,zn(L.value,(z,G)=>(j(),ot("span",{key:G},[rt("a",{href:z.full},In(z.domain),9,zc),O[2]||(O[2]=Vo("  "))]))),128))])):ae("",!0),ct(gi,{name:"stories"},{default:mt(()=>[v.value?(j(),Rt(wc,{key:0,position:b.value,ref_key:"slider",ref:f,class:"occurances",onWheel:O[1]||(O[1]=ye(()=>{},["stop"])),"no-arrows":g.value,onSelectItem:H},{default:mt(()=>[(j(!0),ot(En,null,zn(t.occurances,z=>(j(),Rt(E,{class:"occurance",onClick:O[0]||(O[0]=ye(()=>{},["stop"])),key:z.id,to:{name:"graph",params:{type:"graph",id:z.id}}},{default:mt(()=>[ct(Zi,{id:z.id,node:z,class:"compact"},null,8,["id","node"])]),_:2},1032,["to"]))),128))]),_:1},8,["position","no-arrows"])):ae("",!0)]),_:1})],38)}}},Dc=Gt(Pc,[["__scopeId","data-v-24d78c97"]]),Oc={data(){return{count:0}},props:{node:Object},computed:{label(){return this.helperStore.localize(this.node.label??this.node.text)},...Go(an)}},Rc={class:"entity",ref:"el"},Bc={class:"text measure-width"};function Fc(t,e,n,r,i,o){return j(),ot("div",Rc,[rt("span",Bc,In(o.label),1)],512)}const Hc=Gt(Oc,[["render",Fc],["__scopeId","data-v-b64e33c2"]]),qc={class:"image"},Vc=["srcset"],Gc={__name:"GraphNodeImage",props:{node:Object},setup(t,{expose:e}){const n=t,r=an(),i=lt(null),o=K(()=>r.getMediaUrl(n.node.file));return e({el:i}),(a,s)=>(j(),ot("div",qc,[rt("img",{ref_key:"el",ref:i,srcset:`${o.value} 2x`,draggable:"false"},null,8,Vc)]))}},Uc=Gt(Gc,[["__scopeId","data-v-7cbb6b98"]]),Zc={__name:"GraphNodeNote",props:{node:Object,occurances:Array},setup(t,{expose:e}){const n=t,r=an(),i=lt(null),o=lt(null);K(()=>r.localize(n.node.text));const a=K(()=>{if(!(n.occurances.length!==1||n.occurances[0].color==null))return{"--graph-accent":`var(--${n.occurances[0].color})`}});return Pe(()=>{o.value=gc(i)}),e({el:i}),(s,f)=>(j(),ot("div",{class:"note",ref_key:"el",ref:i,style:Jt({...a.value,width:o.value})},null,4))}},Yc=Gt(Zc,[["__scopeId","data-v-4fff4b26"]]),fi={default:Hc,entity:Dc,graph:Zi,image:Uc,note:Yc};function Xc(t){return fi[t]??fi.default}var Wc=4,Kc=.001,jc=1e-7,Qc=10,Je=11,Sn=1/(Je-1),Jc=typeof Float32Array=="function";function Yi(t,e){return 1-3*e+3*t}function Xi(t,e){return 3*e-6*t}function Wi(t){return 3*t}function Vn(t,e,n){return((Yi(e,n)*t+Xi(e,n))*t+Wi(e))*t}function Ki(t,e,n){return 3*Yi(e,n)*t*t+2*Xi(e,n)*t+Wi(e)}function tf(t,e,n,r,i){var o,a,s=0;do a=e+(n-e)/2,o=Vn(a,r,i)-t,o>0?n=a:e=a;while(Math.abs(o)>jc&&++s<Qc);return a}function ef(t,e,n,r){for(var i=0;i<Wc;++i){var o=Ki(e,n,r);if(o===0)return e;var a=Vn(e,n,r)-t;e-=a/o}return e}function nf(t){return t}var rf=function(e,n,r,i){if(!(0<=e&&e<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===n&&r===i)return nf;for(var o=Jc?new Float32Array(Je):new Array(Je),a=0;a<Je;++a)o[a]=Vn(a*Sn,e,r);function s(f){for(var l=0,c=1,g=Je-1;c!==g&&o[c]<=f;++c)l+=Sn;--c;var h=(f-o[c])/(o[c+1]-o[c]),p=l+h*Sn,b=Ki(p,e,r);return b>=Kc?ef(f,p,e,r):b===0?p:tf(f,l,l+Sn,e,r)}return function(l){return l===0?0:l===1?1:Vn(s(l),n,i)}};const of=yi(rf);var Gn={exports:{}};Gn.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",i=1,o=2,a=9007199254740991,s="[object Arguments]",f="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",g="[object Date]",h="[object Error]",p="[object Function]",b="[object GeneratorFunction]",m="[object Map]",v="[object Number]",_="[object Null]",T="[object Object]",L="[object Promise]",C="[object Proxy]",P="[object RegExp]",H="[object Set]",W="[object String]",D="[object Symbol]",O="[object Undefined]",E="[object WeakMap]",z="[object ArrayBuffer]",G="[object DataView]",R="[object Float32Array]",d="[object Float64Array]",$="[object Int8Array]",x="[object Int16Array]",A="[object Int32Array]",k="[object Uint8Array]",w="[object Uint8ClampedArray]",S="[object Uint16Array]",M="[object Uint32Array]",I=/[\\^$.*+?()[\]{}|]/g,B=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,F={};F[R]=F[d]=F[$]=F[x]=F[A]=F[k]=F[w]=F[S]=F[M]=!0,F[s]=F[f]=F[z]=F[c]=F[G]=F[g]=F[h]=F[p]=F[m]=F[v]=F[T]=F[P]=F[H]=F[W]=F[E]=!1;var V=typeof Ke=="object"&&Ke&&Ke.Object===Object&&Ke,q=typeof self=="object"&&self&&self.Object===Object&&self,Y=V||q||Function("return this")(),Q=e&&!e.nodeType&&e,gt=Q&&!0&&t&&!t.nodeType&&t,at=gt&&gt.exports===Q,st=at&&V.process,it=function(){try{return st&&st.binding&&st.binding("util")}catch{}}(),nt=it&&it.isTypedArray;function X(u,y){for(var N=-1,Z=u==null?0:u.length,ft=0,et=[];++N<Z;){var yt=u[N];y(yt,N,u)&&(et[ft++]=yt)}return et}function ut(u,y){for(var N=-1,Z=y.length,ft=u.length;++N<Z;)u[ft+N]=y[N];return u}function J(u,y){for(var N=-1,Z=u==null?0:u.length;++N<Z;)if(y(u[N],N,u))return!0;return!1}function It(u,y){for(var N=-1,Z=Array(u);++N<u;)Z[N]=y(N);return Z}function kt(u){return function(y){return u(y)}}function vt(u,y){return u.has(y)}function St(u,y){return u==null?void 0:u[y]}function Mt(u){var y=-1,N=Array(u.size);return u.forEach(function(Z,ft){N[++y]=[ft,Z]}),N}function dt(u,y){return function(N){return u(y(N))}}function ht(u){var y=-1,N=Array(u.size);return u.forEach(function(Z){N[++y]=Z}),N}var Ct=Array.prototype,Kt=Function.prototype,Et=Object.prototype,_t=Y["__core-js_shared__"],Re=Kt.toString,Ft=Et.hasOwnProperty,cn=function(){var u=/[^.]+$/.exec(_t&&_t.keys&&_t.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),Be=Et.toString,fn=RegExp("^"+Re.call(Ft).replace(I,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wt=at?Y.Buffer:void 0,Fe=Y.Symbol,He=Y.Uint8Array,qe=Et.propertyIsEnumerable,hn=Ct.splice,jt=Fe?Fe.toStringTag:void 0,dn=Object.getOwnPropertySymbols,Kn=wt?wt.isBuffer:void 0,jn=dt(Object.keys,Object),Ve=Me(Y,"DataView"),ve=Me(Y,"Map"),xt=Me(Y,"Promise"),zt=Me(Y,"Set"),Ht=Me(Y,"WeakMap"),Dt=Me(Object,"create"),$t=xe(Ve),ce=xe(ve),pn=xe(xt),Ge=xe(zt),Ue=xe(Ht),Tr=Fe?Fe.prototype:void 0,Qn=Tr?Tr.valueOf:void 0;function me(u){var y=-1,N=u==null?0:u.length;for(this.clear();++y<N;){var Z=u[y];this.set(Z[0],Z[1])}}function Qi(){this.__data__=Dt?Dt(null):{},this.size=0}function Ji(u){var y=this.has(u)&&delete this.__data__[u];return this.size-=y?1:0,y}function to(u){var y=this.__data__;if(Dt){var N=y[u];return N===r?void 0:N}return Ft.call(y,u)?y[u]:void 0}function eo(u){var y=this.__data__;return Dt?y[u]!==void 0:Ft.call(y,u)}function no(u,y){var N=this.__data__;return this.size+=this.has(u)?0:1,N[u]=Dt&&y===void 0?r:y,this}me.prototype.clear=Qi,me.prototype.delete=Ji,me.prototype.get=to,me.prototype.has=eo,me.prototype.set=no;function re(u){var y=-1,N=u==null?0:u.length;for(this.clear();++y<N;){var Z=u[y];this.set(Z[0],Z[1])}}function ro(){this.__data__=[],this.size=0}function io(u){var y=this.__data__,N=yn(y,u);if(N<0)return!1;var Z=y.length-1;return N==Z?y.pop():hn.call(y,N,1),--this.size,!0}function oo(u){var y=this.__data__,N=yn(y,u);return N<0?void 0:y[N][1]}function ao(u){return yn(this.__data__,u)>-1}function so(u,y){var N=this.__data__,Z=yn(N,u);return Z<0?(++this.size,N.push([u,y])):N[Z][1]=y,this}re.prototype.clear=ro,re.prototype.delete=io,re.prototype.get=oo,re.prototype.has=ao,re.prototype.set=so;function _e(u){var y=-1,N=u==null?0:u.length;for(this.clear();++y<N;){var Z=u[y];this.set(Z[0],Z[1])}}function lo(){this.size=0,this.__data__={hash:new me,map:new(ve||re),string:new me}}function uo(u){var y=vn(this,u).delete(u);return this.size-=y?1:0,y}function co(u){return vn(this,u).get(u)}function fo(u){return vn(this,u).has(u)}function ho(u,y){var N=vn(this,u),Z=N.size;return N.set(u,y),this.size+=N.size==Z?0:1,this}_e.prototype.clear=lo,_e.prototype.delete=uo,_e.prototype.get=co,_e.prototype.has=fo,_e.prototype.set=ho;function gn(u){var y=-1,N=u==null?0:u.length;for(this.__data__=new _e;++y<N;)this.add(u[y])}function po(u){return this.__data__.set(u,r),this}function go(u){return this.__data__.has(u)}gn.prototype.add=gn.prototype.push=po,gn.prototype.has=go;function fe(u){var y=this.__data__=new re(u);this.size=y.size}function yo(){this.__data__=new re,this.size=0}function vo(u){var y=this.__data__,N=y.delete(u);return this.size=y.size,N}function mo(u){return this.__data__.get(u)}function _o(u){return this.__data__.has(u)}function xo(u,y){var N=this.__data__;if(N instanceof re){var Z=N.__data__;if(!ve||Z.length<n-1)return Z.push([u,y]),this.size=++N.size,this;N=this.__data__=new _e(Z)}return N.set(u,y),this.size=N.size,this}fe.prototype.clear=yo,fe.prototype.delete=vo,fe.prototype.get=mo,fe.prototype.has=_o,fe.prototype.set=xo;function wo(u,y){var N=mn(u),Z=!N&&Do(u),ft=!N&&!Z&&Jn(u),et=!N&&!Z&&!ft&&Br(u),yt=N||Z||ft||et,bt=yt?It(u.length,String):[],Lt=bt.length;for(var pt in u)Ft.call(u,pt)&&!(yt&&(pt=="length"||ft&&(pt=="offset"||pt=="parent")||et&&(pt=="buffer"||pt=="byteLength"||pt=="byteOffset")||Io(pt,Lt)))&&bt.push(pt);return bt}function yn(u,y){for(var N=u.length;N--;)if(Pr(u[N][0],y))return N;return-1}function bo(u,y,N){var Z=y(u);return mn(u)?Z:ut(Z,N(u))}function Ze(u){return u==null?u===void 0?O:_:jt&&jt in Object(u)?No(u):Po(u)}function Ir(u){return Ye(u)&&Ze(u)==s}function kr(u,y,N,Z,ft){return u===y?!0:u==null||y==null||!Ye(u)&&!Ye(y)?u!==u&&y!==y:Co(u,y,N,Z,kr,ft)}function Co(u,y,N,Z,ft,et){var yt=mn(u),bt=mn(y),Lt=yt?f:he(u),pt=bt?f:he(y);Lt=Lt==s?T:Lt,pt=pt==s?T:pt;var Ot=Lt==T,Ut=pt==T,At=Lt==pt;if(At&&Jn(u)){if(!Jn(y))return!1;yt=!0,Ot=!1}if(At&&!Ot)return et||(et=new fe),yt||Br(u)?Er(u,y,N,Z,ft,et):Mo(u,y,Lt,N,Z,ft,et);if(!(N&i)){var qt=Ot&&Ft.call(u,"__wrapped__"),Vt=Ut&&Ft.call(y,"__wrapped__");if(qt||Vt){var de=qt?u.value():u,ie=Vt?y.value():y;return et||(et=new fe),ft(de,ie,N,Z,et)}}return At?(et||(et=new fe),$o(u,y,N,Z,ft,et)):!1}function Lo(u){if(!Rr(u)||Eo(u))return!1;var y=Dr(u)?fn:B;return y.test(xe(u))}function So(u){return Ye(u)&&Or(u.length)&&!!F[Ze(u)]}function Ao(u){if(!zo(u))return jn(u);var y=[];for(var N in Object(u))Ft.call(u,N)&&N!="constructor"&&y.push(N);return y}function Er(u,y,N,Z,ft,et){var yt=N&i,bt=u.length,Lt=y.length;if(bt!=Lt&&!(yt&&Lt>bt))return!1;var pt=et.get(u);if(pt&&et.get(y))return pt==y;var Ot=-1,Ut=!0,At=N&o?new gn:void 0;for(et.set(u,y),et.set(y,u);++Ot<bt;){var qt=u[Ot],Vt=y[Ot];if(Z)var de=yt?Z(Vt,qt,Ot,y,u,et):Z(qt,Vt,Ot,u,y,et);if(de!==void 0){if(de)continue;Ut=!1;break}if(At){if(!J(y,function(ie,we){if(!vt(At,we)&&(qt===ie||ft(qt,ie,N,Z,et)))return At.push(we)})){Ut=!1;break}}else if(!(qt===Vt||ft(qt,Vt,N,Z,et))){Ut=!1;break}}return et.delete(u),et.delete(y),Ut}function Mo(u,y,N,Z,ft,et,yt){switch(N){case G:if(u.byteLength!=y.byteLength||u.byteOffset!=y.byteOffset)return!1;u=u.buffer,y=y.buffer;case z:return!(u.byteLength!=y.byteLength||!et(new He(u),new He(y)));case c:case g:case v:return Pr(+u,+y);case h:return u.name==y.name&&u.message==y.message;case P:case W:return u==y+"";case m:var bt=Mt;case H:var Lt=Z&i;if(bt||(bt=ht),u.size!=y.size&&!Lt)return!1;var pt=yt.get(u);if(pt)return pt==y;Z|=o,yt.set(u,y);var Ot=Er(bt(u),bt(y),Z,ft,et,yt);return yt.delete(u),Ot;case D:if(Qn)return Qn.call(u)==Qn.call(y)}return!1}function $o(u,y,N,Z,ft,et){var yt=N&i,bt=zr(u),Lt=bt.length,pt=zr(y),Ot=pt.length;if(Lt!=Ot&&!yt)return!1;for(var Ut=Lt;Ut--;){var At=bt[Ut];if(!(yt?At in y:Ft.call(y,At)))return!1}var qt=et.get(u);if(qt&&et.get(y))return qt==y;var Vt=!0;et.set(u,y),et.set(y,u);for(var de=yt;++Ut<Lt;){At=bt[Ut];var ie=u[At],we=y[At];if(Z)var Fr=yt?Z(we,ie,At,y,u,et):Z(ie,we,At,u,y,et);if(!(Fr===void 0?ie===we||ft(ie,we,N,Z,et):Fr)){Vt=!1;break}de||(de=At=="constructor")}if(Vt&&!de){var _n=u.constructor,xn=y.constructor;_n!=xn&&"constructor"in u&&"constructor"in y&&!(typeof _n=="function"&&_n instanceof _n&&typeof xn=="function"&&xn instanceof xn)&&(Vt=!1)}return et.delete(u),et.delete(y),Vt}function zr(u){return bo(u,Bo,To)}function vn(u,y){var N=u.__data__;return ko(y)?N[typeof y=="string"?"string":"hash"]:N.map}function Me(u,y){var N=St(u,y);return Lo(N)?N:void 0}function No(u){var y=Ft.call(u,jt),N=u[jt];try{u[jt]=void 0;var Z=!0}catch{}var ft=Be.call(u);return Z&&(y?u[jt]=N:delete u[jt]),ft}var To=dn?function(u){return u==null?[]:(u=Object(u),X(dn(u),function(y){return qe.call(u,y)}))}:Fo,he=Ze;(Ve&&he(new Ve(new ArrayBuffer(1)))!=G||ve&&he(new ve)!=m||xt&&he(xt.resolve())!=L||zt&&he(new zt)!=H||Ht&&he(new Ht)!=E)&&(he=function(u){var y=Ze(u),N=y==T?u.constructor:void 0,Z=N?xe(N):"";if(Z)switch(Z){case $t:return G;case ce:return m;case pn:return L;case Ge:return H;case Ue:return E}return y});function Io(u,y){return y=y??a,!!y&&(typeof u=="number"||U.test(u))&&u>-1&&u%1==0&&u<y}function ko(u){var y=typeof u;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?u!=="__proto__":u===null}function Eo(u){return!!cn&&cn in u}function zo(u){var y=u&&u.constructor,N=typeof y=="function"&&y.prototype||Et;return u===N}function Po(u){return Be.call(u)}function xe(u){if(u!=null){try{return Re.call(u)}catch{}try{return u+""}catch{}}return""}function Pr(u,y){return u===y||u!==u&&y!==y}var Do=Ir(function(){return arguments}())?Ir:function(u){return Ye(u)&&Ft.call(u,"callee")&&!qe.call(u,"callee")},mn=Array.isArray;function Oo(u){return u!=null&&Or(u.length)&&!Dr(u)}var Jn=Kn||Ho;function Ro(u,y){return kr(u,y)}function Dr(u){if(!Rr(u))return!1;var y=Ze(u);return y==p||y==b||y==l||y==C}function Or(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=a}function Rr(u){var y=typeof u;return u!=null&&(y=="object"||y=="function")}function Ye(u){return u!=null&&typeof u=="object"}var Br=nt?kt(nt):So;function Bo(u){return Oo(u)?wo(u):Ao(u)}function Fo(){return[]}function Ho(){return!1}t.exports=Ro})(Gn,Gn.exports);var af=Gn.exports;const sf=yi(af),en=+getComputedStyle(document.documentElement).getPropertyValue("--transition").replace(/(.+)ms/,(t,e)=>e).replace(/(.+)s/,(t,e)=>e*1e3),hr=+getComputedStyle(document.documentElement).getPropertyValue("--spacing").replace(/px$/,""),lf={__name:"BaseInterpolate",props:{props:Object,duration:{type:Number,default:en},delay:{type:Number,default:0}},setup(t){const e=t,n=lt(e.props);let r=null;const i=of(.25,.1,.25,1);let o=Bn(null,e.props);Yt(()=>e.props,(s,f)=>{sf(s,f)||(o=Bn(n.value,e.props),r=null,requestAnimationFrame(a))},{deep:!1});function a(s){if(e.duration===0)return n.value={...e.props};r===null&&(r=s);const f=Math.max(Math.min((s-r-e.delay)/e.duration,1),0);n.value={...o(i(f))},f<1&&requestAnimationFrame(a)}return(s,f)=>pi(s.$slots,"default",Uo(Zo(n.value)))}},uf={class:"node-wrapper"},cf={__name:"GraphNode",props:{id:String,view:String,position:Object,graph:[String,Boolean]},setup(t){const e=t,n=vi();sn();const r=ue(),i=Oe(),o=Nr(),a=gr(),s=ze(),f=De(),l=Un(),c=mi(),g=pc(),h=yr(),p=lt(null),b=K(()=>r.data.nodes[e.id]),m=K(()=>({transform:`translate(${e.position.x+i.offset.x}px, ${e.position.y+i.offset.y}px) translate(-50%, -50%)`})),v=K(()=>Xc(b.value.type)),_=K(()=>p.value.el??p.value.$el),T=K(()=>r.graphs.filter(z=>Object.prototype.hasOwnProperty.call(z.allocations??{},e.id))),L=K(()=>b.value.inheritDisplay?o.inheritStateFromNeighbor(e.id):o.states[e.id]),C=K(()=>{var z,G,R,d;return(d=(R=(G=(z=r.data.nodes)==null?void 0:z[e.graph])==null?void 0:G.allocations)==null?void 0:R[e.id])==null?void 0:d.locked}),P=new ResizeObserver(z=>{for(const G of z)G.contentRect});function H(z){!f.edit||z.metaKey?n.push({name:"graph",params:{type:b.value.type,id:e.id}}):g.connecting?g.close(e.id):h.mode==="add-edge"?g.open(e.id,"→",e.graph):h.mode==="display-blur"?h.setDisplay(e.id,"hide",e.graph):h.mode==="display-default"?h.setDisplay(e.id,"default",e.graph):h.mode==="display-highlight"?h.setDisplay(e.id,"highlight",e.graph):h.mode==="display-unset"&&h.setDisplay(e.id,null,e.graph)}function W(){f.edit&&c.open(e.id,"node")}function D(z){if(!f.edit||e.view!=="diagram"||z.button!==0||C.value)return;z.stopPropagation();const G={x:z.x,y:z.y},R={x:r.data.nodes[e.graph].allocations[e.id].x,y:r.data.nodes[e.graph].allocations[e.id].y},d=new AbortController;window.addEventListener("mousemove",x=>{const A={x:(x.x-G.x)/i.transform.k,y:(x.y-G.y)/i.transform.k},k=x.shiftKey?.5:20,w=Math.round((R.x+A.x)/k)*k,S=Math.round((R.y+A.y)/k)*k;r.data.nodes[e.graph].allocations[e.id].x=w,r.data.nodes[e.graph].allocations[e.id].y=S},{signal:d.signal}),window.addEventListener("mouseup",()=>{$()},{once:!0,signal:d.signal}),window.addEventListener("keydown",x=>{x.key==="Escape"&&$()},{signal:d.signal});function $(){d.abort()}}function O(z,G){return z?[G]:[]}function E(z){f.edit&&(z.preventDefault(),z.stopPropagation(),l.open(vr,[...O(e.view==="diagram",{label:"delete",action:()=>{r.deleteNode(e.id,e.graph)}}),{label:"edit",action:()=>{c.open(e.id,"node")}},...O(e.view==="diagram",{label:"→",action:()=>{e.view==="diagram"&&g.open(e.id,"→",e.graph)}}),...O(e.view==="diagram",{label:C.value?"unlock":"lock",action:()=>{r.data.nodes[e.graph].allocations[e.id].locked=!C.value}}),{label:"log",action:()=>{console.log(e.id,r.data.nodes[e.graph].allocations[e.id])}}],{x:z.x,y:z.y}))}return Yt(()=>[e.position.y,e.position.x],()=>{i.nodes[e.id]={...i.nodes[e.id],x:e.position.x,y:e.position.y}}),Pe(()=>{P.observe(_.value)}),pr(()=>{_.value!=null&&P.unobserve(_.value),delete i.nodes[e.id]}),(z,G)=>{var R,d;return j(),ot("div",uf,[rt("div",{style:Jt(m.value)},[(j(),Rt(Yo(v.value),{ref_key:"componentRef",ref:p,id:t.id,class:te(["node",[L.value,t.view,`mode-${tt(h).mode}`,{"user-active":!tt(a).inactivityShort||!tt(s).playing,edit:tt(f).edit,locked:C.value,exact:(d=(R=tt(o).exactMarker)==null?void 0:R.states)==null?void 0:d.hasOwnProperty(t.id)}]]),"no-style":m.value,node:b.value,occurances:T.value,position:t.position,onClick:H,onDblclick:ye(W,["stop"]),onMousedown:D,onContextmenu:E},null,40,["id","class","no-style","node","occurances","position"]))],4)])}}},ff=Gt(cf,[["__scopeId","data-v-3ae91c1f"]]);function hi(t,e,n,r,i,o,a,s,f){const l=i+a,c=o+s,g=i+f,h=o+f,p=i+a-f,b=o+s-f,m=[[i,b,i,h,i,o],[g,o,p,o,l,o],[l,h,l,b,l,c],[p,c,g,c,i,c]],v=[[g,h,Math.PI,Math.PI*1.5],[p,h,Math.PI*1.5,Math.PI*2],[p,b,0,Math.PI*.5],[g,b,Math.PI*.5,Math.PI]];let _=[];return m.forEach((T,L)=>{const[C,P,H,W]=T,[D,O,E,z]=v[L];gf(D,O,f,t,e,n,r).filter(R=>{const d=df(pf(D,O,R[0],R[1]));return d>E&&d<z}).forEach(R=>_.push({point:R,anchor:L*2+1}));const G=hf(t,e,n,r,C,P,H,W);G&&_.push({point:G,anchor:L*2})}),_}function hf(t,e,n,r,i,o,a,s){const f=(s-o)*(n-t)-(a-i)*(r-e),l=(a-i)*(e-o)-(s-o)*(t-i),c=(n-t)*(e-o)-(r-e)*(t-i);if(f===0)return void 0;const g=l/f,h=c/f;if(g>=0&&g<=1&&h>=0&&h<=1)return[t+g*(n-t),e+g*(r-e)]}function df(t){return t-Math.PI*2*Math.floor(t/(Math.PI*2))}function pf(t,e,n,r){return Math.atan2(r-e,n-t)}function gf(t,e,n,r,i,o,a){var s,f,l,c,g,h,p,b,m=[o-r,a-i],v=[r-t,i-e];return s=m[0]*v[0]+m[1]*v[1],f=2*(m[0]*m[0]+m[1]*m[1]),s*=-2,l=Math.sqrt(s*s-2*f*(v[0]*v[0]+v[1]*v[1]-n*n)),isNaN(l)?[]:(c=(s-l)/f,g=(s+l)/f,p=[],b=[],h=[],c<=1&&c>=0&&(p[0]=r+m[0]*c,p[1]=i+m[1]*c,h[0]=p),g<=1&&g>=0&&(b[0]=r+m[0]*g,b[1]=i+m[1]*g,h[h.length]=b),h)}var ji={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.pathDataLength=n()})(Ke,function(){var e={};const{PI:n,sin:r,cos:i,acos:o,abs:a,sqrt:s,log:f,tan:l}=Math,c={wa12:[[.24914704581340288,.12523340851146894],[.23349253653835458,.3678314989981802],[.20316742672306584,.5873179542866175],[.16007832854334633,.7699026741943047],[.10693932599531818,.9041172563704748],[.04717533638650846,.9815606342467192]],wa24:[[.1279381953467522,.0640568928626056],[.1258374563468283,.1911188674736163],[.1216704729278034,.3150426796961634],[.1155056680537256,.4337935076260451],[.1074442701159656,.5454214713888396],[.0976186521041139,.6480936519369755],[.0861901615319533,.7401241915785544],[.0733464814110803,.820001985973903],[.0592985849154368,.8864155270044011],[.0442774388174198,.9382745520027328],[.0285313886289337,.9747285559713095],[.0123412297999872,.9951872199970213]]};function g(L,C=.5){const P=(O,E,z)=>({x:(E.x-O.x)*z+O.x,y:(E.y-O.y)*z+O.y}),H=(O,E,z,G,R)=>{let d=1-R;return{x:d**3*O.x+3*d**2*R*E.x+3*d*R**2*z.x+R**3*G.x,y:d**3*O.y+3*d**2*R*E.y+3*d*R**2*z.y+R**3*G.y}},W=(O,E,z,G)=>{let R=1-G;return{x:R*R*O.x+2*R*G*E.x+G**2*z.x,y:R*R*O.y+2*R*G*E.y+G**2*z.y}};let D;return L.length===4?D=H(L[0],L[1],L[2],L[3],C):L.length===3?D=W(L[0],L[1],L[2],C):D=P(L[0],L[1],C),D}function h(L,C){this.totalLength=L||0,this.segments=C||[]}h.prototype.getPointAtLength=function(L=0){let{segments:C,totalLength:P}=this,H=!1,W={x:0,y:0},D=0;if(L===0)return C[0].points[0];if(+L.toFixed(3)==+P.toFixed(3)){let{points:O}=C[C.length-1];return W=O[O.length-1],W}for(let O=0;O<C.length&&!H;O++){let E=C[O],{type:z,lengths:G,points:R,total:d}=E,$=G[G.length-1],x=1/(G.length-1);if($>L){H=!0;let A=!1,k;switch(z){case"L":k=$-L,D=1-1/d*k,W=g(R,D);break;case"A":k=$-L,D=1-1/d*k;let{cx:w,cy:S,deltaAngle:M}=E.points[1],I=-M*D,B=Math.cos(I),U=Math.sin(I);p0=E.points[0],W={x:B*(p0.x-w)+U*(p0.y-S)+w,y:B*(p0.y-S)-U*(p0.x-w)+S};break;case"C":case"Q":let F=v([R[0],R[1]])+v([R[1],R[2]]),V=z==="C"?v([R[2],R[3]]):0,q=v([R[0],R[R.length-1]]);if(F+V===q)k=$-L,D=1-1/d*k,W=D<=1?g([R[0],R[2]],D):R[R.length-1];else for(let Y=0;Y<G.length&&!A;Y++){let Q=G[Y],gt=Y>0?G[Y-1]:G[Y];if(Q>L){let at=x*Y,st=Q-gt,it=Q-L,nt=1/st*it;D=at-x*nt,A=!0,W=g(R,D)}}break}W.index=E.index,W.t=D}}return W};function p(L,C="medium",P=!1){const H=A=>{let k=0;for(let w=0;w<A.length;w++){let S=A[w].x,M=A[w===A.length-1?0:w+1].y,I=A[w===A.length-1?0:w+1].x,B=A[w].y;k+=S*M*.5-I*B*.5}return Math.abs(k)<.1};let W=C==="high"?4:C==="medium"?2:1,D=C==="high",O=C==="medium"?24:12,E=[12,24,36,48,60,64,72,96],z=C==="low"?10:12,G=C==="low"?16:C==="medium"?24:36,R=Array.isArray(L)?L:_(L,{arcAccuracy:W}),d=0,$=R[0],x={totalLength:0,segments:[]};for(let A=1;A<R.length;A++){let w=R[A-1].values,S=w.length,M={x:w[S-2],y:w[S-1]},I=R[A],{type:B,values:U}=I,F=U.length,V={x:U[F-2],y:U[F-1]},q,Y,Q,gt,at={lengths:[],points:[],index:A,total:0,type:B};switch(B){case"M":$=R[A],q=0;break;case"Z":case"z":case"L":B.toLowerCase()==="z"&&(V={x:$.values[0],y:$.values[1]},at.type="L"),q=v([M,V]),at.points.push(M,V);break;case"A":V={x:I.values[5],y:I.values[6]};let st=I.values[3],it=I.values[4],nt=T(M.x,M.y,I.values[0],I.values[1],I.values[2],st,it,V.x,V.y),{cx:X,cy:ut,rx:J,ry:It,startAngle:kt,deltaAngle:vt}=nt;q=2*Math.PI*J*(1/360*Math.abs(vt*180/n)),at.points=[M,{startAngle:kt,deltaAngle:vt,cx:X,cy:ut},V];break;case"C":case"Q":at.lengths.push(d),Y={x:U[0],y:U[1]},Q=B==="C"?{x:U[2],y:U[3]}:Y;let St=B==="C"?[M,Y,Q,V]:[M,Y,V],Mt=B==="Q"?z:G,dt=H(St);if(dt){St=[M,V],q=v(St),at.type="L",at.points.push(M,V);break}else if(q=D?v(St,1,E[0]):v(St,1,O),B==="C"&&D){let ht,Ct=!1,Kt=.05,Et=0;for(let _t=1;_t<E.length&&!Ct;_t++)lgNew=E[_t],ht=v(St,1,lgNew),Et=a(ht-q),Et<Kt||_t===E.length-1?(O=E[_t-1],Ct=!0):q=ht}if(!P&&!dt){for(let ht=1;ht<Mt;ht++)gt=1/Mt*ht,at.lengths.push(v(St,gt,O)+d);at.points=St}break;default:q=0;break}P||(at.lengths.push(q+d),at.total=q),d+=q,B!=="M"&&x.segments.push(at),x.totalLength=d}return P?d:new h(x.totalLength,x.segments)}function b(L,C=0){let P=_(L);return m(P,C)}function m(L,C=0){return p(L,C,!0)}function v(L,C=1,P=0){const H=(E,z)=>s((z.x-E.x)*(z.x-E.x)+(z.y-E.y)*(z.y-E.y)),W=(E,z,G,R,d,$)=>{if(d===0)return 0;const x=(M,I=-1,B=1)=>{let U=[],F,V,q,Y,Q,gt,at,st;const it=M+1>>1;q=.5*(B+I),Y=.5*(B-I);for(let nt=it-1;nt>=0;nt--){V=i(n*(nt+.75)/(M+.5));do{st=1,at=0;for(let X=0;X<M;X++)gt=at,at=st,st=((2*X+1)*V*at-X*gt)/(X+1);Q=M*(V*st-at)/(V*V-1),F=V,V=F-st/Q}while(a(V-F)>1e-14);U.push([2*Y/((1-V*V)*Q*Q),q+Y*V])}return U},A=(M,I,B,U,F)=>{let V=-3*I+9*B-9*U+3*F,q=M*V+6*I-12*B+6*U;return M*q-3*I+3*B};d=d>1?1:d<0?0:d;let k=d/2;c[$]||(c[$]=x($));const w=c[$];let S=0;for(let M=0,I=w.length;M<I;M++){let[B,U]=[w[M][0],w[M][1]],F=k*U,V=F+k,q=-F+k,Y=A(q,E.x,z.x,G.x,R.x),Q=A(q,E.y,z.y,G.y,R.y),gt=Y*Y+Q*Q,at=A(V,E.x,z.x,G.x,R.x),st=A(V,E.y,z.y,G.y,R.y),it=at*at+st*st;S+=B*s(gt)+B*s(it)}return k*S},D=(E,z,G,R,d=!1)=>{if(R===0)return 0;if(d){let Y=H(E,z)+H(z,G),Q=H(E,G);if(Y===Q)return Q}let $,x,A,k,w,S,M,I,B;I=z.x*2,B=z.y*2,k=E.x-I+G.x,M=E.y-B+G.y,w=I-2*E.x,S=B-2*E.y,$=4*(k*k+M*M),x=4*(k*w+M*S),A=w*w+S*S;const U=x/(2*$),F=A/$,V=R+U,q=F-U**2;return s($)/2*(V*s(V**2+q)-U*s(U**2+q)+q*f((V+s(V**2+q))/(U+s(U**2+q))))};let O;return L.length===4?O=W(L[0],L[1],L[2],L[3],C,P):L.length===3?O=D(L[0],L[1],L[2],C):O=H(L[0],L[1]),O}function _(L,C={}){L=L.replace(/[\n\r\t|,]/g," ").trim().replace(/(\d)-/g,"$1 -").replace(/(\.)(?=(\d+\.\d+)+)(\d+)/g,"$1$3 ");let P=[],H=/([mlcqazvhst])([^mlcqazvhst]*)/gi,W=L.match(H),D={m:2,a:7,c:6,h:1,l:2,q:4,s:4,t:2,v:1,z:0};C={toAbsolute:!0,toLonghands:!0,arcToCubic:!1,arcAccuracy:4,...C};let{toAbsolute:O,toLonghands:E,arcToCubic:z,arcAccuracy:G}=C,R=/[a]/gi.test(L),d=E?/[vhst]/gi.test(L):!1,$=O?/[lcqamts]/g.test(L.substring(1,L.length-1)):!1,x,A,k,w,S;for(let I=0;I<W.length;I++){let B=W[I],U=B.substring(0,1),F=U.toLowerCase(),V=U.toUpperCase(),q=U===F,Y=D[F],Q=B.substring(1,B.length).trim().split(" ").filter(Boolean);if(F==="a"&&Q.length!=D.a){let it=0,nt=[];for(let X=0;X<Q.length;X++){let ut=Q[X];if(it>=Y&&(it=0),(it===3||it===4)&&ut.length>1){let J=it===3?ut.substring(0,1):"",It=it===3?ut.substring(1,2):ut.substring(0,1),kt=it===3?ut.substring(2):ut.substring(1),vt=[J,It,kt].filter(Boolean);nt.push(vt),it+=vt.length}else nt.push(ut),it++}Q=nt.flat().filter(Boolean)}Q=Q.map(Number);let gt=Q.length>Y,at=gt?Q.slice(0,Y):Q,st=[{type:U,values:at}];if(gt){let it=F==="m"?q?"l":"L":U;for(let nt=Y;nt<Q.length;nt+=Y){let X=Q.slice(nt,nt+Y);st.push({type:it,values:X})}}if(!$&&!d&&!R)st.forEach(it=>{P.push(it)});else{I===0&&(x=Q[0],A=Q[1],k=x,w=A,S={x:Q[0],y:Q[1]});let it=st[0].type;V=it.toUpperCase(),q=!!(it.toLowerCase()===it&&P.length);for(let nt=0;nt<st.length;nt++){let X=st[nt],ut=X.type,J=X.values,It=J.length,vt=(st[nt-1]?st[nt-1]:I>0&&P[P.length-1]?P[P.length-1]:st[nt]).values,St=vt.length;if(q=st.length>1?ut.toLowerCase()===ut&&P.length:q,q)switch(X.type=st.length>1?ut.toUpperCase():V,F){case"a":X.values=[J[0],J[1],J[2],J[3],J[4],J[5]+x,J[6]+A];break;case"h":case"v":X.values=ut==="h"?[J[0]+x]:[J[0]+A];break;case"m":case"l":case"t":ut==="m"&&(S={x:J[0]+x,y:J[1]+A}),X.values=[J[0]+x,J[1]+A];break;case"c":X.values=[J[0]+x,J[1]+A,J[2]+x,J[3]+A,J[4]+x,J[5]+A];break;case"q":case"s":X.values=[J[0]+x,J[1]+A,J[2]+x,J[3]+A];break;case"z":case"Z":k=S.x,w=S.y;break}else x=0,A=0;if(d){let dt,ht,Ct,Kt,Et,_t;X.type==="H"||X.type==="V"?(X.values=X.type==="H"?[X.values[0],w]:[k,X.values[0]],X.type="L"):(X.type==="T"||X.type==="S")&&([dt,ht]=[vt[0],vt[1]],[Et,_t]=St>2?[vt[2],vt[3]]:[vt[0],vt[1]],Ct=X.type==="T"?k*2-dt:k*2-Et,Kt=X.type==="T"?w*2-ht:w*2-_t,X.values=[Ct,Kt,X.values].flat(),X.type=X.type==="T"?"Q":"C")}let Mt=!1;R&&X.type==="A"?(p0={x:k,y:w},F==="a"&&(Mt=X.values[0]!==X.values[1],Mt||z?M(p0,X.values,G).forEach(ht=>{P.push(ht)}):P.push(X))):P.push(X),k=It>1?J[It-2]+x:F==="h"?J[0]+x:k,w=It>1?J[It-1]+A:F==="v"?J[0]+A:w,x=k,A=w}}}return P[0].type="M",P;function M(I,B,U=1){const F=n*2;let[V,q,Y,Q,gt,at,st]=B;if(V===0||q===0)return[];let it=Y?Y*F/360:0,nt=it?r(it):0,X=it?i(it):1,ut=X*(I.x-at)/2+nt*(I.y-st)/2,J=-nt*(I.x-at)/2+X*(I.y-st)/2;if(ut===0&&J===0)return[];V=a(V),q=a(q);let It=ut*ut/(V*V)+J*J/(q*q);if(It>1){let xt=s(It);V*=xt,q*=xt}let kt=V*V,vt=V===q?kt:q*q,St=ut*ut,Mt=J*J,dt=kt*vt-kt*Mt-vt*St;dt<=0?dt=0:(dt/=kt*Mt+vt*St,dt=s(dt)*(Q===gt?-1:1));let ht=dt?dt*V/q*J:0,Ct=dt?dt*-q/V*ut:0,Kt=X*ht-nt*Ct+(I.x+at)/2,Et=nt*ht+X*Ct+(I.y+st)/2,_t=(ut-ht)/V,Re=(J-Ct)/q,Ft=(-ut-ht)/V,cn=(-J-Ct)/q;const Be=(xt,zt,Ht,Dt)=>{let $t=+(xt*Ht+zt*Dt).toFixed(9);return $t===1||$t===-1?$t===1?0:n:($t=$t>1?1:$t<-1?-1:$t,(xt*Dt-zt*Ht<0?-1:1)*o($t))};let fn=Be(1,0,_t,Re),wt=Be(_t,Re,Ft,cn);gt===0&&wt>0?wt-=n*2:gt===1&&wt<0&&(wt+=n*2);let He=+(a(wt)/(F/4)).toFixed(0)*U;wt/=He;let qe=[];const hn=1.5707963267948966,jt=.551785;let dn=wt===hn?jt:wt===-hn?-jt:4/3*l(wt/4),Kn=wt?i(wt):1,jn=wt?r(wt):0,Ve="C";const ve=(xt,zt,Ht,Dt,$t)=>{let ce=xt!=zt?i(xt):Dt,pn=xt!=zt?r(xt):$t,Ge=i(xt+zt),Ue=r(xt+zt);return[{x:ce-pn*Ht,y:pn+ce*Ht},{x:Ge+Ue*Ht,y:Ue-Ge*Ht},{x:Ge,y:Ue}]};for(let xt=0;xt<He;xt++){let zt={type:Ve,values:[]};ve(fn,wt,dn,Kn,jn).forEach(Dt=>{let $t=Dt.x*V,ce=Dt.y*q;zt.values.push(X*$t-nt*ce+Kt,nt*$t+X*ce+Et)}),qe.push(zt),fn+=wt}return qe}}function T(L,C,P,H,W,D,O,E,z){const G=(Mt,dt,ht,Ct)=>{let Kt=Mt*ht+dt*Ct,Et=Math.sqrt((Mt*Mt+dt*dt)*(ht*ht+Ct*Ct)),_t=Math.acos(Kt/Et);return Mt*Ct-dt*ht<0&&(_t=-_t),_t};let R=+W*Math.PI/180,d,$,x,A,k,S=Math.PI*2;if(P<0&&(P=-P),H<0&&(H=-H),P==0||H==0)throw Error("rx and ry can not be 0");let M=Math.sin(R),I=Math.cos(R),B=(L-E)/2,U=(C-z)/2,F=(L+E)/2,V=(C+z)/2,q=I*B+M*U,Y=I*U-M*B,Q=q*q/(P*P)+Y*Y/(H*H);Q>1&&(P=P*Math.sqrt(Q),H=H*Math.sqrt(Q));let gt=P*H,at=P*Y,st=H*q,it=at*at+st*st;it||console.log("start point can not be same as end point");let nt=Math.sqrt(Math.abs((gt*gt-it)/it));D==O&&(nt=-nt);let X=nt*at/H,ut=-nt*st/P;d=I*X-M*ut+F,$=M*X+I*ut+V;let J=(q-X)/P,It=(q+X)/P,kt=(Y-ut)/H,vt=(Y+ut)/H;return x=G(1,0,J,kt),A=G(J,kt,-It,-vt),A>S?A-=S:A<0&&(A+=S),(O==!1||O==0)&&(A-=S),k=x+A,k>S?k-=S:k<0&&(k+=S),{cx:d,cy:$,rx:P,ry:H,startAngle:x,deltaAngle:A,endAngle:k,clockwise:O==!0||O==1}}return e.getPathLengthLookup=p,e.getPathLengthFromD=b,e.getPathDataLength=m,e.getLength=v,e.parsePathDataNormalized=_,e.svgArcToCenterParam=T,e})})(ji);var yf=ji.exports;const vf=["id"],mf=["id"],_f=["d"],xf=["d","marker-end","marker-start"],wf=["x","y"],bf=["x","y"],Cf={__name:"GraphEdge",props:{edge:Object,view:String},setup(t){const e=Oe(),n=Nr(),r=gr(),i=ze(),o=ue(),a=De(),s=mi(),f=Un(),l=sn(),c=t,g=K(()=>l.params.type!=="graph"),h=K(()=>g.value&&c.edge.graph!==o.storyId),p=K(()=>e.nodes[c.edge.nodes[0]]),b=K(()=>e.nodes[c.edge.nodes[1]]),m=K(()=>g.value&&l.params.id===c.edge.nodes[0]),v=K(()=>g.value&&l.params.id===c.edge.nodes[1]),_=K(()=>{var $;const d=($=o.data.nodes[c.edge.graph])==null?void 0:$.color;return{"--graph-accent":d?`var(--${d})`:null}}),T=K(()=>n.inheritStateFromNodes(c.edge.nodes)),L=K(()=>{if(p.value==null||b.value==null)return;const d=hr,$=hr,x=p.value.width+d+d*m.value,A=p.value.height+d+d*m.value*2,k=b.value.width+d+d*v.value,w=b.value.height+d+d*v.value*2,S=hi(p.value.x,p.value.y,b.value.x,b.value.y,p.value.x-x/2,p.value.y-A/2,x,A,Math.min($,A/2-.1))[0],M=hi(p.value.x,p.value.y,b.value.x,b.value.y,b.value.x-k/2,b.value.y-w/2,k,w,Math.min($,w/2-.1))[0];if(S==null||M==null)return;const I={x:S.point[0]+e.offset.x,y:S.point[1]+e.offset.y},B={x:M.point[0]+e.offset.x,y:M.point[1]+e.offset.y},U={x:(I.x+B.x)/2,y:(I.y+B.y)/2};if(g.value)return[I,U,U,B];const F=[{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}];return[I,{x:I.x+F[S.anchor].x*100,y:I.y+F[S.anchor].y*100},{x:B.x+F[M.anchor].x*100,y:B.y+F[M.anchor].y*100},B]}),C=K(()=>{if(L.value!=null)return`M${L.value.map((d,$)=>`${$===1?"C":""}${d.x},${d.y}`).join(" ")}`}),P=K(()=>{if(C.value==null)return[];let d=yf.getPathLengthLookup(C.value),$=d.totalLength;return d.getPointAtLength($/2)}),H=K(()=>`${c.edge.nodes.join("-")}-${c.edge.graph}`),W=K(()=>`url('#marker-${H.value}')`),D=K(()=>`url('#marker-${H.value}-alt')`),O=K(()=>(c.edge.arrow==="→"||c.edge.arrow==="↔")&&W.value),E=K(()=>(c.edge.arrow==="←"||c.edge.arrow==="↔")&&D.value);function z(d){if(!d.metaKey)return;d.stopPropagation(),d.preventDefault();const $=[null,"→","←","↔"],x=Math.max($.indexOf(c.edge.arrow),0);o.data.edges.find(A=>A.id===c.edge.id).arrow=$[(x+1)%$.length]}function G(d){!a.edit||d.metaKey||s.open(c.edge.id,"edge")}function R(d){a.edit&&(d.preventDefault(),d.stopPropagation(),f.open(vr,[{label:"delete",action:()=>{o.data.edges=o.data.edges.filter($=>$.id!==c.edge.id)}},{label:"edit",action:()=>{s.open(c.edge.id,"edge")}}],{x:d.x,y:d.y}))}return(d,$)=>(j(),ot("g",{class:te(["edge",[T.value,t.view,{"user-active":!tt(r).inactivityShort||!tt(i).playing,secondary:h.value}]]),style:Jt(_.value)},[rt("defs",null,[rt("marker",{id:`marker-${H.value}`,markerWidth:"10",markerHeight:"20",refX:"10",refY:"10",orient:"auto"},$[0]||($[0]=[rt("path",{d:"M2,6.5 L10,10 L2,13.5"},null,-1)]),8,vf),rt("marker",{id:`marker-${H.value}-alt`,markerWidth:"10",markerHeight:"20",refX:"00",refY:"10",orient:"auto"},$[1]||($[1]=[rt("path",{d:"M8,6.5 L0,10 L8,13.5"},null,-1)]),8,mf)]),ct(lf,{props:{d:C.value,...P.value},delay:0,duration:tt(a).edit?0:tt(en)},{default:mt(x=>[tt(a).edit?(j(),ot("path",{key:0,class:"edit",d:x.d,onDblclick:ye(G,["stop"]),onContextmenu:R,onClick:z},null,40,_f)):ae("",!0),rt("path",{d:x.d,"marker-end":O.value,"marker-start":E.value},null,8,xf),rt("text",{class:te(["shadow",{edit:tt(a).edit}]),x:x.x,y:x.y,onDblclick:ye(G,["stop"]),onContextmenu:R,onClick:z},[ct(kn,{text:t.edge.label},null,8,["text"])],42,wf),rt("text",{x:x.x,y:x.y},[ct(kn,{text:t.edge.label},null,8,["text"])],8,bf)]),_:1},8,["props","duration"])],6))}},Lf=Gt(Cf,[["__scopeId","data-v-e1216fd6"]]),An={__name:"ContextMenuSearch",props:{context:{type:Object,default:()=>({nodeType:"entity"})}},setup(t){const e=ue(),n=Un(),r=Oe();function i(o){e.data.nodes[e.nodeId].allocations==null&&(e.data.nodes[e.nodeId].allocations={}),e.data.nodes[e.nodeId].allocations[o]={x:(n.offset.x-r.transform.x)/r.transform.k,y:(n.offset.y-r.transform.y)/r.transform.k}}return(o,a)=>(j(),Rt(Xo,{onSelectItem:i,context:t.context},null,8,["context"]))}},Sf=["d"],Af={__name:"TheGraph",setup(t){const e=sn(),n=vi(),r=ue();Wo();const i=Nr(),o=gr(),a=ze(),s=Oe(),f=De(),l=Un(),c=yr(),g=lt([]),h=lt(null),p=lt(null),b=lt(null),m=lt(null),v=K(()=>e.params.id),_=lt(r.data.nodes[v.value]),T=K(()=>e.params.type==="graph"?"diagram":"network"),L=K(()=>`translate(${s.transform.x}px, ${s.transform.y}px) scale(${s.transform.k})`),C=K(()=>{if(g.value==null)return;if(i.bounds!=null)return{x1:i.bounds.x1+s.offset.x,y1:i.bounds.y1+s.offset.y,x2:i.bounds.x2+s.offset.x,y2:i.bounds.y2+s.offset.y};const w=Object.values(g.value),S=w.map(({x:U})=>U),M=w.map(({y:U})=>U),I=200,B=100;return{x1:Math.min(...S)-I+s.offset.x,y1:Math.min(...M)-B+s.offset.y,x2:Math.max(...S)+I+s.offset.x,y2:Math.max(...M)+B+s.offset.y}}),P=K(()=>{const w=Object.keys(g.value??{}),S=r.data.edges.filter(M=>w.includes(M.nodes[0])&&w.includes(M.nodes[1])&&(M.graph===v.value||_.value.type!=="graph"));if(T.value==="network"){const M=r.data.nodes[v.value].class;M!=null&&S.push({id:`class-${[v.value,M].join("-")}`,nodes:[v.value,M],arrow:"→"})}return r.nodes.filter(M=>M.class===v.value).forEach(M=>{S.push({id:`class-${[M.id,v.value].join("-")}`,nodes:[M.id,v.value],arrow:"→"})}),S}),H=K(()=>Object.keys(g.value??{}).sort()),W=K(()=>{if(_.value.color!=null)return{"--graph-accent":`var(--${_.value.color})`}}),D=K(()=>{var B;if((((B=i.exactMarker)==null?void 0:B.bounds)==null&&m.value)==null)return;const{x1:w,y1:S,x2:M,y2:I}=m.value||i.exactMarker.bounds;return`M${w+s.offset.x},${S+s.offset.y} L${M+s.offset.x},${S+s.offset.y} L${M+s.offset.x},${I+s.offset.y} L${w+s.offset.x},${I+s.offset.y} Z`});Yt([v,()=>r.data],([w],[S])=>{_.value=r.data.nodes[w],O(en,S)}),Yt(C,()=>{o.inactivityShort&&z(C.value,en)}),Yt(()=>o.inactivityShort,()=>{a.playing&&z(C.value,en)}),Yt(()=>o.inactivityLong,()=>{a.playing&&e.name==="graph"&&e.params.type!=="graph"&&a.graphId!=null&&n.push({name:"graph",params:{type:"graph",id:a.graphId}})}),Pe(()=>{p.value=pe(h.value),b.value=zu().scaleExtent([.1,1]).on("zoom",w=>{s.transform=w.transform}).filter(w=>{if(c.mode!=="display-frame")return Te(()=>o.registerActivity()),w.button===0&&!l.show}),p.value.call(b.value),O(0),G.observe(h.value)}),pr(()=>{h.value!=null&&G.unobserve(h.value)});function O(w,S){if(_.value.type==="graph"){if(g.value=_.value.allocations,S!=null){const M=r.data.nodes[S].type==="graph"?E(r.data.nodes[S].allocations):{x:0,y:0},I=r.data.nodes[S].type==="graph"||g.value[S]==null?E(g.value):g.value[S];s.offset.x=s.offset.x+M.x-I.x,s.offset.y=s.offset.y+M.y-I.y}z(C.value,w)}else g.value=dc(v.value),z(C.value,w,s.offset)}function E(w){const S=Object.values(w),M=S.map(({x:q})=>q),I=S.map(({y:q})=>q),B=Math.min(...M),U=Math.max(...M),F=Math.min(...I),V=Math.max(...I);return{x:(B+U)/2,y:(F+V)/2}}function z(w,S=0,M){if(w==null)return;const I={x:w.x2-w.x1,y:w.y2-w.y1},B=h.value.getBoundingClientRect(),U=B.width/I.x,F=(B.height-hr*2.7)/I.y,V=Math.min(U,F),q=w.x1+I.x/2,Y=w.y1+I.y/2;p.value.transition().duration(S).call(b.value.transform,Ar.translate(B.width/2,B.height/2).scale(V).translate(-q,-Y))}const G=new ResizeObserver(w=>{for(const S of w)S.contentRect&&z(C.value,0)});function R(w){!f.edit||T.value!=="diagram"||(w.preventDefault(),l.open(vr,[{label:"add",action:S=>{S.stopPropagation(),l.open(An)}},{label:"log",action:()=>{console.log(s.transform,l.offset)}}],{x:w.x,y:w.y}))}function d(w){if(!(!f.edit||T.value!=="diagram"))switch(["add-entity","add-story","add-image"].includes(c.mode)&&w.stopPropagation(),c.mode){case"add-entity":l.open(An,{nodeType:"entity"},{x:w.x,y:w.y}),c.resetMode();break;case"add-story":l.open(An,{nodeType:"graph"},{x:w.x,y:w.y}),c.resetMode();break;case"add-image":l.open(An,{nodeType:"image"},{x:w.x,y:w.y}),c.resetMode();break}}function $(w){if(c.mode==="display-frame"){w.preventDefault(),w.stopPropagation();const S=k(w);m.value={x1:S.x-s.offset.x,y1:S.y-s.offset.y,x2:S.x-s.offset.x,y2:S.y-s.offset.y};const M=new AbortController,I=function(){console.log("reset"),M.abort(),m.value=null};window.addEventListener("keydown",B=>{B.key==="Escape"&&I()},{signal:M.signal}),window.addEventListener("mousemove",B=>{const{x:U,y:F}=k(B);m.value.x2=U-s.offset.x,m.value.y2=F-s.offset.y},{signal:M.signal}),window.addEventListener("mouseup",()=>{c.setBounds(m.value,v.value),I(),c.resetMode()},{signal:M.signal})}}function x(w){if(w.preventDefault(),!f.edit||T.value!=="diagram")return;const S=qr(w.dataTransfer.getData("text/uri-list")),M=r.nodes.find(B=>B.file===qr(S));if(M!=null)return A(M.id,w.x,w.y);if(/(.png|.jpe?g|.gif|.webp)$/i.test(S)){const B=crypto.randomUUID(),U={type:"image",file:S,label:{universal:S.replace(/[^:]*:\/?\/?/,"").replace(/\.[^.]+$/,"")}};r.data.nodes[B]=U,A(B,w.x,w.y)}}function A(w,S,M){r.data.nodes[r.nodeId].allocations[w]=k({x:S,y:M})}function k(w){return{x:(w.x-s.transform.x)/s.transform.k,y:(w.y-s.transform.y)/s.transform.k}}return(w,S)=>(j(),ot("main",{class:te(["graph",[`mode-${tt(c).mode}`,{initializing:tt(e).meta.initializeView}]]),ref_key:"zoomElement",ref:h,style:Jt(W.value),onContextmenu:R,onClick:d,onMousedown:$,onDrop:x,onDragover:S[0]||(S[0]=ye(()=>{},["prevent"])),onDragenter:S[1]||(S[1]=ye(()=>{},["prevent"]))},[rt("div",{class:"nodes",style:Jt({transform:L.value})},[ct(Hr,{name:"nodes"},{default:mt(()=>[(j(!0),ot(En,null,zn(H.value,M=>(j(),Rt(ff,{key:M,id:M,position:g.value[M],view:T.value,graph:T.value==="diagram"&&v.value},null,8,["id","position","view","graph"]))),128))]),_:1})],4),(j(),ot("svg",null,[rt("g",{style:Jt({transform:L.value})},[ct(Hr,{name:"edges"},{default:mt(()=>[(j(!0),ot(En,null,zn(P.value,M=>(j(),Rt(Lf,{key:M.id,edge:M,view:T.value},null,8,["edge","view"]))),128))]),_:1}),tt(f).edit&&D.value?(j(),ot("path",{key:0,d:D.value,class:"display-bounds"},null,8,Sf)):ae("",!0)],4)]))],38))}},Mf=Gt(Af,[["__scopeId","data-v-d94af5a4"]]),$f={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Nf(t,e){return j(),ot("svg",$f,e[0]||(e[0]=[rt("path",{d:"M18.3994816,13.8517704 L28.7074921,22.4660712 C29.1312774,22.8202243 29.1877255,23.450868 28.8335723,23.8746534 C28.6860759,24.0511499 28.4822444,24.1714042 28.2564291,24.2151501 L25.5073341,24.7477155 C24.9651298,24.8527535 24.6107365,25.377447 24.7157744,25.9196512 C24.7313245,25.9999207 24.7566603,26.0779801 24.7912143,26.1520815 L26.5743353,29.9759967 C26.8077409,30.4765367 26.5911857,31.0715171 26.0906457,31.3049227 L25.184338,31.727541 C24.683798,31.9609466 24.0888175,31.7443914 23.8554119,31.2438515 L22.072291,27.4199363 C21.8388853,26.9193963 21.2439049,26.7028411 20.7433649,26.9362467 C20.6692636,26.9708008 20.5996796,27.0143123 20.5361713,27.0658068 L18.3611183,28.8294093 C17.9321324,29.1772448 17.3023942,29.1114594 16.9545587,28.6824734 C16.8096934,28.5038109 16.7308474,28.2806704 16.7313064,28.0506573 L16.7582326,14.6170974 C16.7593395,14.0648137 17.2079512,13.6179967 17.7602349,13.6191016 C17.9939596,13.6195721 18.220137,13.7018939 18.3994816,13.8517704 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const Tf={name:"base-CursorDefault",render:Nf},If={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function kf(t,e){return j(),ot("svg",If,e[0]||(e[0]=[rt("path",{d:"M32,15 C33.1045695,15 34,15.8954305 34,17 L34,28 C34,29.1045695 33.1045695,30 32,30 L13,30 C11.8954305,30 11,29.1045695 11,28 L11,17 C11,15.8954305 11.8954305,15 13,15 L32,15 Z M32,16 L13,16 C12.4477153,16 12,16.4477153 12,17 L12,28 C12,28.5522847 12.4477153,29 13,29 L32,29 C32.5522847,29 33,28.5522847 33,28 L33,17 C33,16.4477153 32.5522847,16 32,16 Z M23,25 C23.5522847,25 24,25.4477153 24,26 L24,27 C24,27.5522847 23.5522847,28 23,28 L14,28 C13.4477153,28 13,27.5522847 13,27 L13,26 C13,25.4477153 13.4477153,25 14,25 L23,25 Z M31,17 C31.5522847,17 32,17.4477153 32,18 L32,23 C32,23.5522847 31.5522847,24 31,24 L14,24 C13.4477153,24 13,23.5522847 13,23 L13,18 C13,17.4477153 13.4477153,17 14,17 L31,17 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const Ef={name:"base-AddEntity",render:kf},zf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Pf(t,e){return j(),ot("svg",zf,e[0]||(e[0]=[rt("path",{d:"M32,15 C33.1045695,15 34,15.8954305 34,17 L34,28 C34,29.1045695 33.1045695,30 32,30 L13,30 C11.8954305,30 11,29.1045695 11,28 L11,17 C11,15.8954305 11.8954305,15 13,15 L32,15 Z M32,16 L13,16 C12.4477153,16 12,16.4477153 12,17 L12,28 C12,28.5522847 12.4477153,29 13,29 L32,29 C32.5522847,29 33,28.5522847 33,28 L33,17 C33,16.4477153 32.5522847,16 32,16 Z M20.1483417,19.765467 C20.4377927,19.2951091 21.0537395,19.1484551 21.5240974,19.4379061 L25.1160552,21.6483417 C25.2493757,21.730385 25.3615728,21.8425821 25.4436161,21.9759026 C25.7330671,22.4462605 25.5864131,23.0622073 25.1160552,23.3516583 L21.5240974,25.5620939 C21.3664897,25.6590832 21.1850598,25.7104356 21,25.7104356 C20.4477153,25.7104356 20,25.2627203 20,24.7104356 L20,20.2895644 C20,20.1045046 20.0513523,19.9230747 20.1483417,19.765467 Z",fill:"currentColor"},null,-1)]))}const Df={name:"base-AddStory",render:Pf},Of={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Rf(t,e){return j(),ot("svg",Of,e[0]||(e[0]=[rt("path",{d:"M32,15 C33.1045695,15 34,15.8954305 34,17 L34,28 C34,29.1045695 33.1045695,30 32,30 L13,30 C11.8954305,30 11,29.1045695 11,28 L11,17 C11,15.8954305 11.8954305,15 13,15 L32,15 Z M32,16 L13,16 C12.4477153,16 12,16.4477153 12,17 L12,28 C12,28.5522847 12.4477153,29 13,29 L32,29 C32.5522847,29 33,28.5522847 33,28 L33,17 C33,16.4477153 32.5522847,16 32,16 Z M26,22 C27.8346354,21.3884549 29.6692708,21.6183815 31.5040033,22.6896136 C31.8106661,22.8685631 31.9994458,23.1967019 32,23.5517578 L32,27 C32,27.5522847 31.5522847,28 31,28 L14,28 C13.4477153,28 13,27.5522847 13,27 L13,25.9687057 L13.0105961,25.8251331 C13.0818756,25.3451379 13.503213,24.9842004 14,25 L14.4403514,25.0105801 C20.8078896,25.11322 23.2067448,22.9310851 26,22 Z M16.75,18.5 C17.7164983,18.5 18.5,19.2835017 18.5,20.25 C18.5,21.2164983 17.7164983,22 16.75,22 C15.7835017,22 15,21.2164983 15,20.25 C15,19.2835017 15.7835017,18.5 16.75,18.5 Z",fill:"currentColor"},null,-1)]))}const Bf={name:"base-AddImage",render:Rf},Ff={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Hf(t,e){return j(),ot("svg",Ff,e[0]||(e[0]=[rt("path",{d:"M31.0395445,14.6621019 C31.0865261,14.8343676 31.0865261,15.0160709 31.0395445,15.1883367 L29.2261258,21.8375386 C29.0808101,22.3703629 28.531069,22.6845007 27.9982446,22.539185 C27.8303497,22.4933955 27.6773109,22.4045836 27.5542552,22.281528 L25.844,20.5709684 L15.7071068,30.7071068 C15.3165825,31.0976311 14.6834175,31.0976311 14.2928932,30.7071068 C13.9023689,30.3165825 13.9023689,29.6834175 14.2928932,29.2928932 L24.429,19.1559684 L22.718472,17.4457448 C22.3279477,17.0552205 22.3279477,16.4220555 22.718472,16.0315312 C22.8415277,15.9084756 22.9945665,15.8196637 23.1624614,15.7738742 L29.8116633,13.9604555 C30.3444877,13.8151397 30.8942288,14.1292775 31.0395445,14.6621019 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const qf={name:"base-AddLink",render:Hf},Vf={class:"icon",width:"45",height:"3",viewBox:"0 0 45 3",xmlns:"http://www.w3.org/2000/svg"};function Gf(t,e){return j(),ot("svg",Vf,e[0]||(e[0]=[rt("path",{d:"M36.5,1 C36.7761424,1 37,1.22385763 37,1.5 C37,1.77614237 36.7761424,2 36.5,2 L8.5,2 C8.22385763,2 8,1.77614237 8,1.5 C8,1.22385763 8.22385763,1 8.5,1 L36.5,1 Z",fill:"currentColor",opacity:".25"},null,-1)]))}const di={name:"base-SeperatorHorizontal",render:Gf},Uf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"},Zf=["id"],Yf=["filter"];function Xf(t,e){return j(),ot("svg",Uf,[rt("defs",null,[rt("filter",{x:"-34.9%",y:"-34.9%",width:"169.8%",height:"169.8%",filterUnits:"objectBoundingBox",id:t.idMap.a},e[0]||(e[0]=[rt("feGaussianBlur",{stdDeviation:"2",in:"SourceGraphic"},null,-1)]),8,Zf)]),rt("path",{d:"M22.7071068,15.7071068 L29.2928932,22.2928932 C29.6834175,22.6834175 29.6834175,23.3165825 29.2928932,23.7071068 L22.7071068,30.2928932 C22.3165825,30.6834175 21.6834175,30.6834175 21.2928932,30.2928932 L14.7071068,23.7071068 C14.3165825,23.3165825 14.3165825,22.6834175 14.7071068,22.2928932 L21.2928932,15.7071068 C21.6834175,15.3165825 22.3165825,15.3165825 22.7071068,15.7071068 Z",fill:"currentColor",filter:"url(#"+t.idMap.a+")","fill-rule":"evenodd",opacity:".832"},null,8,Yf)])}const Wf={name:"base-DisplayBlur",render:Xf,data(){return{idMap:{a:"uicons-"+Math.random().toString(36).substr(2,10)}}}},Kf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function jf(t,e){return j(),ot("svg",Kf,e[0]||(e[0]=[rt("path",{d:"M17.1464466,27.1464466 L17.8535534,27.8535534 L15.3535534,30.3535534 L14.6464466,29.6464466 L17.1464466,27.1464466 Z M27.8535534,27.1464466 L30.3535534,29.6464466 L29.6464466,30.3535534 L27.1464466,27.8535534 L27.8535534,27.1464466 Z M23.2071068,15.2071068 L29.7928932,21.7928932 C30.1834175,22.1834175 30.1834175,22.8165825 29.7928932,23.2071068 L23.2071068,29.7928932 C22.8165825,30.1834175 22.1834175,30.1834175 21.7928932,29.7928932 L15.2071068,23.2071068 C14.8165825,22.8165825 14.8165825,22.1834175 15.2071068,21.7928932 L21.7928932,15.2071068 C22.1834175,14.8165825 22.8165825,14.8165825 23.2071068,15.2071068 Z M29.6464466,14.6464466 L30.3535534,15.3535534 L27.8535534,17.8535534 L27.1464466,17.1464466 L29.6464466,14.6464466 Z M15.3535534,14.6464466 L17.8535534,17.1464466 L17.1464466,17.8535534 L14.6464466,15.3535534 L15.3535534,14.6464466 Z M20.7868105,14.1744381 L19.8208847,14.4332571 L18.9058212,11.0181936 L19.871747,10.7593745 L20.7868105,14.1744381 Z M26.0941788,33.9818064 L25.128253,34.2406255 L24.2131895,30.8255619 L25.1791153,30.5667429 L26.0941788,33.9818064 Z M25.1791153,14.4332571 L24.2131895,14.1744381 L25.128253,10.7593745 L26.0941788,11.0181936 L25.1791153,14.4332571 Z M19.871747,34.2406255 L18.9058212,33.9818064 L19.8208847,30.5667429 L20.7868105,30.8255619 L19.871747,34.2406255 Z M30.8255619,20.7868105 L30.5667429,19.8208847 L33.9818064,18.9058212 L34.2406255,19.871747 L30.8255619,20.7868105 Z M11.0181936,26.0941788 L10.7593745,25.128253 L14.1744381,24.2131895 L14.4332571,25.1791153 L11.0181936,26.0941788 Z M30.5667429,25.1791153 L30.8255619,24.2131895 L34.2406255,25.128253 L33.9818064,26.0941788 L30.5667429,25.1791153 Z M10.7593745,19.871747 L11.0181936,18.9058212 L14.4332571,19.8208847 L14.1744381,20.7868105 L10.7593745,19.871747 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const Qf={name:"base-DisplayHighlight",render:jf},Jf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function th(t,e){return j(),ot("svg",Jf,e[0]||(e[0]=[rt("path",{d:"M30.2071068,14.7928932 C30.5976311,15.1834175 30.5976311,15.8165825 30.2071068,16.2071068 L16.2071068,30.2071068 C15.8165825,30.5976311 15.1834175,30.5976311 14.7928932,30.2071068 C14.4023689,29.8165825 14.4023689,29.1834175 14.7928932,28.7928932 L28.7928932,14.7928932 C29.1834175,14.4023689 29.8165825,14.4023689 30.2071068,14.7928932 Z M27.9142136,19.9142136 L29.7928932,21.7928932 C30.1834175,22.1834175 30.1834175,22.8165825 29.7928932,23.2071068 L23.2071068,29.7928932 C22.8165825,30.1834175 22.1834175,30.1834175 21.7928932,29.7928932 L19.9142136,27.9142136 L27.9142136,19.9142136 Z M23.2071068,15.2071068 L25.0862136,17.0862136 L17.0862136,25.0862136 L15.2071068,23.2071068 C14.8165825,22.8165825 14.8165825,22.1834175 15.2071068,21.7928932 L21.7928932,15.2071068 C22.1834175,14.8165825 22.8165825,14.8165825 23.2071068,15.2071068 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const eh={name:"base-DisplayUnset",render:th},nh={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function rh(t,e){return j(),ot("svg",nh,e[0]||(e[0]=[rt("path",{d:"M15,30 L30,30 L30,29 L15,29 L15,30 Z M23,15 L23,25.292 L26.6464466,21.6464466 L27.3535534,22.3535534 L22.5,27.2071068 L17.6464466,22.3535534 L18.3535534,21.6464466 L22,25.292 L22,15 L23,15 Z",fill:"currentColor"},null,-1)]))}const ih={name:"base-Export",render:rh},oh={class:"toolbar"},ah={__name:"TheToolbar",setup(t){const e=yr(),n=ue();return(r,i)=>(j(),ot("section",oh,[ct(Ko,{modelValue:tt(e).mode,"onUpdate:modelValue":i[0]||(i[0]=o=>tt(e).mode=o),options:[{value:"default",slot:"default",tooltip:"Select"},{value:"add-entity",slot:"add-entity",tooltip:"add entity"},{value:"add-story",slot:"add-story",tooltip:"add story"},{value:"add-image",slot:"add-image",tooltip:"add image"},{value:"add-edge",slot:"add-edge",tooltip:"add edge"},{disabled:!0,slot:"seperator"},{value:"display-blur",slot:"display-blur",tooltip:"blur"},{value:"display-default",slot:"display-default",tooltip:"default"},{value:"display-highlight",slot:"display-highlight",tooltip:"highlight"},{value:"display-unset",slot:"display-unset",tooltip:"unset"},{value:"display-frame",slot:"display-frame",tooltip:"frame"},{disabled:!0,slot:"seperator2"},{value:"download",slot:"download",tooltip:"download data",action:tt(n).exportProject}]},{default:mt(()=>[ct(tt(Tf))]),"add-entity":mt(()=>[ct(tt(Ef))]),"add-story":mt(()=>[ct(tt(Df))]),"add-image":mt(()=>[ct(tt(Bf))]),"add-edge":mt(()=>[ct(tt(qf))]),seperator:mt(()=>[ct(tt(di))]),"display-blur":mt(()=>[ct(tt(Wf))]),"display-default":mt(()=>[ct(tt(Qo))]),"display-highlight":mt(()=>[ct(tt(Qf))]),"display-unset":mt(()=>[ct(tt(eh))]),"display-frame":mt(()=>[ct(tt(Jo))]),seperator2:mt(()=>[ct(tt(di))]),download:mt(()=>[ct(tt(ih))]),_:1},8,["modelValue","options"])]))}},sh=Gt(ah,[["__scopeId","data-v-f9fd2ea6"]]),lh={class:"interface-layer fullscreen"},uh={__name:"GraphView",setup(t){const e=ze(),n=De();sn();const r=K(()=>!e.showVideo||!n.pictureInPicture||n.pictureInPictureVideo);return(i,o)=>(j(),ot("div",{class:te(["graph-view",{"split-screen":tt(e).showVideo&&!tt(n).pictureInPicture,"pip-graph":tt(e).showVideo&&tt(n).pictureInPicture&&!tt(n).pictureInPictureVideo}]),onWheel:o[1]||(o[1]=ye(()=>{},["prevent"]))},[tt(e).showVideo?(j(),Rt(ea,{key:0,class:te(["video",{fullscreen:!r.value}])},null,8,["class"])):ae("",!0),ct(Mf,{class:te(["graph",{fullscreen:r.value}])},null,8,["class"]),rt("div",{class:"toggle-pip",onClick:o[0]||(o[0]=a=>tt(n).pictureInPictureVideo=!tt(n).pictureInPictureVideo)}),rt("div",lh,[ct(na),ct(ta),tt(n).edit?(j(),Rt(sh,{key:0})):ae("",!0),tt(n).edit?(j(),Rt(Vr,{key:2,style:{bottom:"70px"}})):(j(),Rt(Vr,{key:1}))])],34))}},ph=Gt(uh,[["__scopeId","data-v-5ae87187"]]);export{ph as default};
