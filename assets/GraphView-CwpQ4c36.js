import{o as K,c as ot,e as tt,_ as qt,q as ze,b as ie,m as lt,f as J,h as Tt,i as yt,d as ct,y as Nt,L as qr,x as Ft,z as pr,A as Pe,B as Q,C as ke,D as Xt,E as De,G as gr,k as gi,H as ln,u as Oe,T as yi,t as In,I as ne,J as Vo,j as En,n as Qt,F as rn,r as zn,s as Go,K as Zo,M as vi,N as Qe,O as Uo,P as Yo,Q as mi,R as yr,S as Zn,p as _i,U as vr,l as Wo,V as Xo,a as Ko,W as Vr,X as Gr,Y as Qo}from"./index-CqB-x2Ep.js";import{I as jo,C as mr,D as Jo,b as ta,a as ea,T as na}from"./TheControls-D1Dv6-uL.js";import{T as ra}from"./TheVideo-B--QkkfI.js";import{m as ia,T as oa}from"./TheHeader-BkJT-m4x.js";const aa={class:"icon",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"};function sa(t,e){return K(),ot("svg",aa,e[0]||(e[0]=[tt("g",{fill:"none","fill-rule":"evenodd"},[tt("polygon",{fill:"currentColor",points:"7.5 13.3038184 7.5 14.8038184 12.5 14.8038184 12.5 13.3038184 10.75 13.3038184 10.75 8.30381839 8 8.30381839 8 9.80381839 9.25 9.80381839 9.25 13.3038184"}),tt("path",{d:"M10,0 C15.5228475,0 20,4.4771525 20,10 C20,15.5228475 15.5228475,20 10,20 C4.4771525,20 0,15.5228475 0,10 C0,4.4771525 4.4771525,0 10,0 Z M10,2 C5.581722,2 2,5.581722 2,10 C2,14.418278 5.581722,18 10,18 C14.418278,18 18,14.418278 18,10 C18,5.581722 14.418278,2 10,2 Z",fill:"currentColor","fill-rule":"nonzero"}),tt("circle",{fill:"currentColor",cx:"10",cy:"5.692",r:"1.209"})],-1)]))}const la={name:"base-About",render:sa},ua={class:"icon",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"};function ca(t,e){return K(),ot("svg",ua,e[0]||(e[0]=[tt("g",{fill:"none","fill-rule":"evenodd","stroke-linecap":"round"},[tt("line",{x1:"2",y1:"2",x2:"18",y2:"18",stroke:"#000000","stroke-width":"2"}),tt("line",{x1:"18",y1:"2",x2:"2",y2:"18",stroke:"#000000","stroke-width":"2"})],-1)]))}const fa={name:"base-Close",render:ca},ha={class:"about"},da=["innerHTML"],pa={__name:"TheAbout",setup(t){const e=ze(),n=ie(),r=lt(!1);function i(){r.value=!r.value,r.value&&window.addEventListener("click",()=>{r.value=!1},{once:!0})}return(o,a)=>(K(),ot("div",ha,[J(e).name==="graph"?(K(),Tt(qr,{key:0,horizontal:"",class:"item"},{default:yt(()=>[ct(jo,{"disable-padding":"",onClick:Nt(i,["stop"]),active:r.value},{default:yt(()=>[r.value?(K(),Tt(J(fa),{key:1})):(K(),Tt(J(la),{key:0}))]),_:1},8,["active"])]),_:1})):Ft("",!0),r.value?(K(),Tt(qr,{key:1,onClick:a[0]||(a[0]=Nt(()=>{},["stop"]))},{default:yt(()=>[tt("div",{class:"text",innerHTML:J(ia).parse(J(n).about)},null,8,da)]),_:1})):Ft("",!0)]))}},ga=qt(pa,[["__scopeId","data-v-5b4388ec"]]),ya={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function va(t,e){return K(),ot("svg",ya,e[0]||(e[0]=[tt("path",{d:"M17,15.7895644 L17,29.2104356 C17,29.7627203 17.4477153,30.2104356 18,30.2104356 C18.1850598,30.2104356 18.3664897,30.1590832 18.5240974,30.0620939 L29.4285552,23.3516583 C29.8989131,23.0622073 30.0455671,22.4462605 29.7561161,21.9759026 C29.6740728,21.8425821 29.5618757,21.730385 29.4285552,21.6483417 L18.5240974,14.9379061 C18.0537395,14.6484551 17.4377927,14.7951091 17.1483417,15.265467 C17.0513523,15.4230747 17,15.6045046 17,15.7895644 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const ma={name:"base-ControlsPlay",render:va};var _a={value:()=>{}};function Un(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new $n(n)}function $n(t){this._=t}function xa(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}$n.prototype=Un.prototype={constructor:$n,on:function(t,e){var n=this._,r=xa(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=wa(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=Zr(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Zr(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new $n(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function wa(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Zr(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=_a,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ir="http://www.w3.org/1999/xhtml";const Ur={svg:"http://www.w3.org/2000/svg",xhtml:ir,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ur.hasOwnProperty(e)?{space:Ur[e],local:t}:t}function ba(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ir&&e.documentElement.namespaceURI===ir?e.createElement(t):e.createElementNS(n,t)}}function Ca(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function xi(t){var e=Yn(t);return(e.local?Ca:ba)(e)}function La(){}function _r(t){return t==null?La:function(){return this.querySelector(t)}}function Ma(t){typeof t!="function"&&(t=_r(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=new Array(a),f,l,u=0;u<a;++u)(f=o[u])&&(l=t.call(f,f.__data__,u,o))&&("__data__"in f&&(l.__data__=f.__data__),s[u]=l);return new Ht(r,this._parents)}function Aa(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Sa(){return[]}function wi(t){return t==null?Sa:function(){return this.querySelectorAll(t)}}function $a(t){return function(){return Aa(t.apply(this,arguments))}}function Na(t){typeof t=="function"?t=$a(t):t=wi(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],s=a.length,f,l=0;l<s;++l)(f=a[l])&&(r.push(t.call(f,f.__data__,l,a)),i.push(f));return new Ht(r,i)}function bi(t){return function(){return this.matches(t)}}function Ci(t){return function(e){return e.matches(t)}}var ka=Array.prototype.find;function Ta(t){return function(){return ka.call(this.children,t)}}function Ia(){return this.firstElementChild}function Ea(t){return this.select(t==null?Ia:Ta(typeof t=="function"?t:Ci(t)))}var za=Array.prototype.filter;function Pa(){return Array.from(this.children)}function Da(t){return function(){return za.call(this.children,t)}}function Oa(t){return this.selectAll(t==null?Pa:Da(typeof t=="function"?t:Ci(t)))}function Ra(t){typeof t!="function"&&(t=bi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],f,l=0;l<a;++l)(f=o[l])&&t.call(f,f.__data__,l,o)&&s.push(f);return new Ht(r,this._parents)}function Li(t){return new Array(t.length)}function Ba(){return new Ht(this._enter||this._groups.map(Li),this._parents)}function Pn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Pn.prototype={constructor:Pn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Fa(t){return function(){return t}}function Ha(t,e,n,r,i,o){for(var a=0,s,f=e.length,l=o.length;a<l;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new Pn(t,o[a]);for(;a<f;++a)(s=e[a])&&(i[a]=s)}function qa(t,e,n,r,i,o,a){var s,f,l=new Map,u=e.length,p=o.length,h=new Array(u),d;for(s=0;s<u;++s)(f=e[s])&&(h[s]=d=a.call(f,f.__data__,s,e)+"",l.has(d)?i[s]=f:l.set(d,f));for(s=0;s<p;++s)d=a.call(t,o[s],s,o)+"",(f=l.get(d))?(r[s]=f,f.__data__=o[s],l.delete(d)):n[s]=new Pn(t,o[s]);for(s=0;s<u;++s)(f=e[s])&&l.get(h[s])===f&&(i[s]=f)}function Va(t){return t.__data__}function Ga(t,e){if(!arguments.length)return Array.from(this,Va);var n=e?qa:Ha,r=this._parents,i=this._groups;typeof t!="function"&&(t=Fa(t));for(var o=i.length,a=new Array(o),s=new Array(o),f=new Array(o),l=0;l<o;++l){var u=r[l],p=i[l],h=p.length,d=Za(t.call(u,u&&u.__data__,l,r)),C=d.length,m=s[l]=new Array(C),v=a[l]=new Array(C),w=f[l]=new Array(h);n(u,p,m,v,w,d,e);for(var k=0,S=0,A,P;k<C;++k)if(A=m[k]){for(k>=S&&(S=k+1);!(P=v[S])&&++S<C;);A._next=P||null}}return a=new Ht(a,r),a._enter=s,a._exit=f,a}function Za(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ua(){return new Ht(this._exit||this._groups.map(Li),this._parents)}function Ya(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Wa(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),f=0;f<a;++f)for(var l=n[f],u=r[f],p=l.length,h=s[f]=new Array(p),d,C=0;C<p;++C)(d=l[C]||u[C])&&(h[C]=d);for(;f<i;++f)s[f]=n[f];return new Ht(s,this._parents)}function Xa(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Ka(t){t||(t=Qa);function e(p,h){return p&&h?t(p.__data__,h.__data__):!p-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,f=i[o]=new Array(s),l,u=0;u<s;++u)(l=a[u])&&(f[u]=l);f.sort(e)}return new Ht(i,this._parents).order()}function Qa(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ja(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ja(){return Array.from(this)}function ts(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function es(){let t=0;for(const e of this)++t;return t}function ns(){return!this.node()}function rs(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function is(t){return function(){this.removeAttribute(t)}}function os(t){return function(){this.removeAttributeNS(t.space,t.local)}}function as(t,e){return function(){this.setAttribute(t,e)}}function ss(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ls(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function us(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function cs(t,e){var n=Yn(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?os:is:typeof e=="function"?n.local?us:ls:n.local?ss:as)(n,e))}function Mi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function fs(t){return function(){this.style.removeProperty(t)}}function hs(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ds(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ps(t,e,n){return arguments.length>1?this.each((e==null?fs:typeof e=="function"?ds:hs)(t,e,n??"")):Ie(this.node(),t)}function Ie(t,e){return t.style.getPropertyValue(e)||Mi(t).getComputedStyle(t,null).getPropertyValue(e)}function gs(t){return function(){delete this[t]}}function ys(t,e){return function(){this[t]=e}}function vs(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ms(t,e){return arguments.length>1?this.each((e==null?gs:typeof e=="function"?vs:ys)(t,e)):this.node()[t]}function Ai(t){return t.trim().split(/^|\s+/)}function xr(t){return t.classList||new Si(t)}function Si(t){this._node=t,this._names=Ai(t.getAttribute("class")||"")}Si.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function $i(t,e){for(var n=xr(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Ni(t,e){for(var n=xr(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function _s(t){return function(){$i(this,t)}}function xs(t){return function(){Ni(this,t)}}function ws(t,e){return function(){(e.apply(this,arguments)?$i:Ni)(this,t)}}function bs(t,e){var n=Ai(t+"");if(arguments.length<2){for(var r=xr(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?ws:e?_s:xs)(n,e))}function Cs(){this.textContent=""}function Ls(t){return function(){this.textContent=t}}function Ms(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function As(t){return arguments.length?this.each(t==null?Cs:(typeof t=="function"?Ms:Ls)(t)):this.node().textContent}function Ss(){this.innerHTML=""}function $s(t){return function(){this.innerHTML=t}}function Ns(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function ks(t){return arguments.length?this.each(t==null?Ss:(typeof t=="function"?Ns:$s)(t)):this.node().innerHTML}function Ts(){this.nextSibling&&this.parentNode.appendChild(this)}function Is(){return this.each(Ts)}function Es(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zs(){return this.each(Es)}function Ps(t){var e=typeof t=="function"?t:xi(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ds(){return null}function Os(t,e){var n=typeof t=="function"?t:xi(t),r=e==null?Ds:typeof e=="function"?e:_r(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Rs(){var t=this.parentNode;t&&t.removeChild(this)}function Bs(){return this.each(Rs)}function Fs(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Hs(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function qs(t){return this.select(t?Hs:Fs)}function Vs(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Gs(t){return function(e){t.call(this,e,this.__data__)}}function Zs(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Us(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function Ys(t,e,n){return function(){var r=this.__on,i,o=Gs(e);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Ws(t,e,n){var r=Zs(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var f=0,l=s.length,u;f<l;++f)for(i=0,u=s[f];i<o;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(s=e?Ys:Us,i=0;i<o;++i)this.each(s(r[i],e,n));return this}function ki(t,e,n){var r=Mi(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Xs(t,e){return function(){return ki(this,t,e)}}function Ks(t,e){return function(){return ki(this,t,e.apply(this,arguments))}}function Qs(t,e){return this.each((typeof e=="function"?Ks:Xs)(t,e))}function*js(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Ti=[null];function Ht(t,e){this._groups=t,this._parents=e}function un(){return new Ht([[document.documentElement]],Ti)}function Js(){return this}Ht.prototype=un.prototype={constructor:Ht,select:Ma,selectAll:Na,selectChild:Ea,selectChildren:Oa,filter:Ra,data:Ga,enter:Ba,exit:Ua,join:Ya,merge:Wa,selection:Js,order:Xa,sort:Ka,call:ja,nodes:Ja,node:ts,size:es,empty:ns,each:rs,attr:cs,style:ps,property:ms,classed:bs,text:As,html:ks,raise:Is,lower:zs,append:Ps,insert:Os,remove:Bs,clone:qs,datum:Vs,on:Ws,dispatch:Qs,[Symbol.iterator]:js};function ge(t){return typeof t=="string"?new Ht([[document.querySelector(t)]],[document.documentElement]):new Ht([[t]],Ti)}function tl(t){let e;for(;e=t.sourceEvent;)t=e;return t}function be(t,e){if(t=tl(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const or={capture:!0,passive:!1};function ar(t){t.preventDefault(),t.stopImmediatePropagation()}function el(t){var e=t.document.documentElement,n=ge(t).on("dragstart.drag",ar,or);"onselectstart"in e?n.on("selectstart.drag",ar,or):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function nl(t,e){var n=t.document.documentElement,r=ge(t).on("dragstart.drag",null);e&&(r.on("click.drag",ar,or),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function wr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ii(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function cn(){}var on=.7,Dn=1/on,Te="\\s*([+-]?\\d+)\\s*",an="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",re="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rl=/^#([0-9a-f]{3,8})$/,il=new RegExp(`^rgb\\(${Te},${Te},${Te}\\)$`),ol=new RegExp(`^rgb\\(${re},${re},${re}\\)$`),al=new RegExp(`^rgba\\(${Te},${Te},${Te},${an}\\)$`),sl=new RegExp(`^rgba\\(${re},${re},${re},${an}\\)$`),ll=new RegExp(`^hsl\\(${an},${re},${re}\\)$`),ul=new RegExp(`^hsla\\(${an},${re},${re},${an}\\)$`),Yr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wr(cn,Me,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Wr,formatHex:Wr,formatHex8:cl,formatHsl:fl,formatRgb:Xr,toString:Xr});function Wr(){return this.rgb().formatHex()}function cl(){return this.rgb().formatHex8()}function fl(){return Ei(this).formatHsl()}function Xr(){return this.rgb().formatRgb()}function Me(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=rl.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Kr(e):n===3?new Ot(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?bn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?bn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=il.exec(t))?new Ot(e[1],e[2],e[3],1):(e=ol.exec(t))?new Ot(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=al.exec(t))?bn(e[1],e[2],e[3],e[4]):(e=sl.exec(t))?bn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ll.exec(t))?Jr(e[1],e[2]/100,e[3]/100,1):(e=ul.exec(t))?Jr(e[1],e[2]/100,e[3]/100,e[4]):Yr.hasOwnProperty(t)?Kr(Yr[t]):t==="transparent"?new Ot(NaN,NaN,NaN,0):null}function Kr(t){return new Ot(t>>16&255,t>>8&255,t&255,1)}function bn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ot(t,e,n,r)}function hl(t){return t instanceof cn||(t=Me(t)),t?(t=t.rgb(),new Ot(t.r,t.g,t.b,t.opacity)):new Ot}function sr(t,e,n,r){return arguments.length===1?hl(t):new Ot(t,e,n,r??1)}function Ot(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}wr(Ot,sr,Ii(cn,{brighter(t){return t=t==null?Dn:Math.pow(Dn,t),new Ot(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?on:Math.pow(on,t),new Ot(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ot(Le(this.r),Le(this.g),Le(this.b),On(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qr,formatHex:Qr,formatHex8:dl,formatRgb:jr,toString:jr}));function Qr(){return`#${Ce(this.r)}${Ce(this.g)}${Ce(this.b)}`}function dl(){return`#${Ce(this.r)}${Ce(this.g)}${Ce(this.b)}${Ce((isNaN(this.opacity)?1:this.opacity)*255)}`}function jr(){const t=On(this.opacity);return`${t===1?"rgb(":"rgba("}${Le(this.r)}, ${Le(this.g)}, ${Le(this.b)}${t===1?")":`, ${t})`}`}function On(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Le(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ce(t){return t=Le(t),(t<16?"0":"")+t.toString(16)}function Jr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Wt(t,e,n,r)}function Ei(t){if(t instanceof Wt)return new Wt(t.h,t.s,t.l,t.opacity);if(t instanceof cn||(t=Me(t)),!t)return new Wt;if(t instanceof Wt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,f=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=f<.5?o+i:2-o-i,a*=60):s=f>0&&f<1?0:a,new Wt(a,s,f,t.opacity)}function pl(t,e,n,r){return arguments.length===1?Ei(t):new Wt(t,e,n,r??1)}function Wt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}wr(Wt,pl,Ii(cn,{brighter(t){return t=t==null?Dn:Math.pow(Dn,t),new Wt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?on:Math.pow(on,t),new Wt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ot(tr(t>=240?t-240:t+120,i,r),tr(t,i,r),tr(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Wt(ti(this.h),Cn(this.s),Cn(this.l),On(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=On(this.opacity);return`${t===1?"hsl(":"hsla("}${ti(this.h)}, ${Cn(this.s)*100}%, ${Cn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ti(t){return t=(t||0)%360,t<0?t+360:t}function Cn(t){return Math.max(0,Math.min(1,t||0))}function tr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const br=t=>()=>t;function gl(t,e){return function(n){return t+n*e}}function yl(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function vl(t){return(t=+t)==1?zi:function(e,n){return n-e?yl(e,n,t):br(isNaN(e)?n:e)}}function zi(t,e){var n=e-t;return n?gl(t,n):br(isNaN(t)?e:t)}const Rn=function t(e){var n=vl(e);function r(i,o){var a=n((i=sr(i)).r,(o=sr(o)).r),s=n(i.g,o.g),f=n(i.b,o.b),l=zi(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=f(u),i.opacity=l(u),i+""}}return r.gamma=t,r}(1);function ml(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function _l(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function xl(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Bn(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function wl(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ee(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function bl(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Bn(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var lr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,er=new RegExp(lr.source,"g");function Cl(t){return function(){return t}}function Ll(t){return function(e){return t(e)+""}}function Pi(t,e){var n=lr.lastIndex=er.lastIndex=0,r,i,o,a=-1,s=[],f=[];for(t=t+"",e=e+"";(r=lr.exec(t))&&(i=er.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,f.push({i:a,x:ee(r,i)})),n=er.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?f[0]?Ll(f[0].x):Cl(e):(e=f.length,function(l){for(var u=0,p;u<e;++u)s[(p=f[u]).i]=p.x(l);return s.join("")})}function Bn(t,e){var n=typeof e,r;return e==null||n==="boolean"?br(e):(n==="number"?ee:n==="string"?(r=Me(e))?(e=r,Rn):Pi:e instanceof Me?Rn:e instanceof Date?wl:_l(e)?ml:Array.isArray(e)?xl:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?bl:ee)(t,e)}var ei=180/Math.PI,ur={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Di(t,e,n,r,i,o){var a,s,f;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(f=t*n+e*r)&&(n-=t*f,r-=e*f),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,f/=s),t*r<e*n&&(t=-t,e=-e,f=-f,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*ei,skewX:Math.atan(f)*ei,scaleX:a,scaleY:s}}var Ln;function Ml(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ur:Di(e.a,e.b,e.c,e.d,e.e,e.f)}function Al(t){return t==null||(Ln||(Ln=document.createElementNS("http://www.w3.org/2000/svg","g")),Ln.setAttribute("transform",t),!(t=Ln.transform.baseVal.consolidate()))?ur:(t=t.matrix,Di(t.a,t.b,t.c,t.d,t.e,t.f))}function Oi(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,p,h,d,C){if(l!==p||u!==h){var m=d.push("translate(",null,e,null,n);C.push({i:m-4,x:ee(l,p)},{i:m-2,x:ee(u,h)})}else(p||h)&&d.push("translate("+p+e+h+n)}function a(l,u,p,h){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),h.push({i:p.push(i(p)+"rotate(",null,r)-2,x:ee(l,u)})):u&&p.push(i(p)+"rotate("+u+r)}function s(l,u,p,h){l!==u?h.push({i:p.push(i(p)+"skewX(",null,r)-2,x:ee(l,u)}):u&&p.push(i(p)+"skewX("+u+r)}function f(l,u,p,h,d,C){if(l!==p||u!==h){var m=d.push(i(d)+"scale(",null,",",null,")");C.push({i:m-4,x:ee(l,p)},{i:m-2,x:ee(u,h)})}else(p!==1||h!==1)&&d.push(i(d)+"scale("+p+","+h+")")}return function(l,u){var p=[],h=[];return l=t(l),u=t(u),o(l.translateX,l.translateY,u.translateX,u.translateY,p,h),a(l.rotate,u.rotate,p,h),s(l.skewX,u.skewX,p,h),f(l.scaleX,l.scaleY,u.scaleX,u.scaleY,p,h),l=u=null,function(d){for(var C=-1,m=h.length,v;++C<m;)p[(v=h[C]).i]=v.x(d);return p.join("")}}}var Sl=Oi(Ml,"px, ","px)","deg)"),$l=Oi(Al,", ",")",")"),Nl=1e-12;function ni(t){return((t=Math.exp(t))+1/t)/2}function kl(t){return((t=Math.exp(t))-1/t)/2}function Tl(t){return((t=Math.exp(2*t))-1)/(t+1)}const Il=function t(e,n,r){function i(o,a){var s=o[0],f=o[1],l=o[2],u=a[0],p=a[1],h=a[2],d=u-s,C=p-f,m=d*d+C*C,v,w;if(m<Nl)w=Math.log(h/l)/e,v=function(X){return[s+X*d,f+X*C,l*Math.exp(e*X*w)]};else{var k=Math.sqrt(m),S=(h*h-l*l+r*m)/(2*l*n*k),A=(h*h-l*l-r*m)/(2*h*n*k),P=Math.log(Math.sqrt(S*S+1)-S),V=Math.log(Math.sqrt(A*A+1)-A);w=(V-P)/e,v=function(X){var E=X*w,R=ni(P),I=l/(n*k)*(R*Tl(e*E+P)-kl(P));return[s+I*d,f+I*C,l*R/ni(e*E+P)]}}return v.duration=w*1e3*e/Math.SQRT2,v}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,f=s*s;return t(a,s,f)},i}(Math.SQRT2,2,4);var Ee=0,je=0,Xe=0,Ri=1e3,Fn,Je,Hn=0,Ae=0,Wn=0,sn=typeof performance=="object"&&performance.now?performance:Date,Bi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Cr(){return Ae||(Bi(El),Ae=sn.now()+Wn)}function El(){Ae=0}function qn(){this._call=this._time=this._next=null}qn.prototype=Lr.prototype={constructor:qn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Cr():+n)+(e==null?0:+e),!this._next&&Je!==this&&(Je?Je._next=this:Fn=this,Je=this),this._call=t,this._time=n,cr()},stop:function(){this._call&&(this._call=null,this._time=1/0,cr())}};function Lr(t,e,n){var r=new qn;return r.restart(t,e,n),r}function zl(){Cr(),++Ee;for(var t=Fn,e;t;)(e=Ae-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ee}function ri(){Ae=(Hn=sn.now())+Wn,Ee=je=0;try{zl()}finally{Ee=0,Dl(),Ae=0}}function Pl(){var t=sn.now(),e=t-Hn;e>Ri&&(Wn-=e,Hn=t)}function Dl(){for(var t,e=Fn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Fn=n);Je=t,cr(r)}function cr(t){if(!Ee){je&&(je=clearTimeout(je));var e=t-Ae;e>24?(t<1/0&&(je=setTimeout(ri,t-sn.now()-Wn)),Xe&&(Xe=clearInterval(Xe))):(Xe||(Hn=sn.now(),Xe=setInterval(Pl,Ri)),Ee=1,Bi(ri))}}function ii(t,e,n){var r=new qn;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Ol=Un("start","end","cancel","interrupt"),Rl=[],Fi=0,oi=1,fr=2,Nn=3,ai=4,hr=5,kn=6;function Xn(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Bl(t,n,{name:e,index:r,group:i,on:Ol,tween:Rl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Fi})}function Mr(t,e){var n=jt(t,e);if(n.state>Fi)throw new Error("too late; already scheduled");return n}function oe(t,e){var n=jt(t,e);if(n.state>Nn)throw new Error("too late; already running");return n}function jt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Bl(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Lr(o,0,n.time);function o(l){n.state=oi,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var u,p,h,d;if(n.state!==oi)return f();for(u in r)if(d=r[u],d.name===n.name){if(d.state===Nn)return ii(a);d.state===ai?(d.state=kn,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<e&&(d.state=kn,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[u])}if(ii(function(){n.state===Nn&&(n.state=ai,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=fr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===fr){for(n.state=Nn,i=new Array(h=n.tween.length),u=0,p=-1;u<h;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++p]=d);i.length=p+1}}function s(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(f),n.state=hr,1),p=-1,h=i.length;++p<h;)i[p].call(t,u);n.state===hr&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=kn,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function Tn(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>fr&&r.state<hr,r.state=kn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function Fl(t){return this.each(function(){Tn(this,t)})}function Hl(t,e){var n,r;return function(){var i=oe(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function ql(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=oe(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},f=0,l=i.length;f<l;++f)if(i[f].name===e){i[f]=s;break}f===l&&i.push(s)}o.tween=i}}function Vl(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=jt(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?Hl:ql)(n,t,e))}function Ar(t,e,n){var r=t._id;return t.each(function(){var i=oe(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return jt(i,r).value[e]}}function Hi(t,e){var n;return(typeof e=="number"?ee:e instanceof Me?Rn:(n=Me(e))?(e=n,Rn):Pi)(t,e)}function Gl(t){return function(){this.removeAttribute(t)}}function Zl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ul(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function Yl(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function Wl(t,e,n){var r,i,o;return function(){var a,s=n(this),f;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),f=s+"",a===f?null:a===r&&f===i?o:(i=f,o=e(r=a,s)))}}function Xl(t,e,n){var r,i,o;return function(){var a,s=n(this),f;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),f=s+"",a===f?null:a===r&&f===i?o:(i=f,o=e(r=a,s)))}}function Kl(t,e){var n=Yn(t),r=n==="transform"?$l:Hi;return this.attrTween(t,typeof e=="function"?(n.local?Xl:Wl)(n,r,Ar(this,"attr."+t,e)):e==null?(n.local?Zl:Gl)(n):(n.local?Yl:Ul)(n,r,e))}function Ql(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function jl(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Jl(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&jl(t,o)),n}return i._value=e,i}function tu(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Ql(t,o)),n}return i._value=e,i}function eu(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Yn(t);return this.tween(n,(r.local?Jl:tu)(r,e))}function nu(t,e){return function(){Mr(this,t).delay=+e.apply(this,arguments)}}function ru(t,e){return e=+e,function(){Mr(this,t).delay=e}}function iu(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?nu:ru)(e,t)):jt(this.node(),e).delay}function ou(t,e){return function(){oe(this,t).duration=+e.apply(this,arguments)}}function au(t,e){return e=+e,function(){oe(this,t).duration=e}}function su(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ou:au)(e,t)):jt(this.node(),e).duration}function lu(t,e){if(typeof e!="function")throw new Error;return function(){oe(this,t).ease=e}}function uu(t){var e=this._id;return arguments.length?this.each(lu(e,t)):jt(this.node(),e).ease}function cu(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;oe(this,t).ease=n}}function fu(t){if(typeof t!="function")throw new Error;return this.each(cu(this._id,t))}function hu(t){typeof t!="function"&&(t=bi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],f,l=0;l<a;++l)(f=o[l])&&t.call(f,f.__data__,l,o)&&s.push(f);return new ce(r,this._parents,this._name,this._id)}function du(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var f=e[s],l=n[s],u=f.length,p=a[s]=new Array(u),h,d=0;d<u;++d)(h=f[d]||l[d])&&(p[d]=h);for(;s<r;++s)a[s]=e[s];return new ce(a,this._parents,this._name,this._id)}function pu(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function gu(t,e,n){var r,i,o=pu(e)?Mr:oe;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function yu(t,e){var n=this._id;return arguments.length<2?jt(this.node(),n).on.on(t):this.each(gu(n,t,e))}function vu(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function mu(){return this.on("end.remove",vu(this._id))}function _u(t){var e=this._name,n=this._id;typeof t!="function"&&(t=_r(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],f=s.length,l=o[a]=new Array(f),u,p,h=0;h<f;++h)(u=s[h])&&(p=t.call(u,u.__data__,h,s))&&("__data__"in u&&(p.__data__=u.__data__),l[h]=p,Xn(l[h],e,n,h,l,jt(u,n)));return new ce(o,this._parents,e,n)}function xu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=wi(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var f=r[s],l=f.length,u,p=0;p<l;++p)if(u=f[p]){for(var h=t.call(u,u.__data__,p,f),d,C=jt(u,n),m=0,v=h.length;m<v;++m)(d=h[m])&&Xn(d,e,n,m,h,C);o.push(h),a.push(u)}return new ce(o,a,e,n)}var wu=un.prototype.constructor;function bu(){return new wu(this._groups,this._parents)}function Cu(t,e){var n,r,i;return function(){var o=Ie(this,t),a=(this.style.removeProperty(t),Ie(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function qi(t){return function(){this.style.removeProperty(t)}}function Lu(t,e,n){var r,i=n+"",o;return function(){var a=Ie(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function Mu(t,e,n){var r,i,o;return function(){var a=Ie(this,t),s=n(this),f=s+"";return s==null&&(f=s=(this.style.removeProperty(t),Ie(this,t))),a===f?null:a===r&&f===i?o:(i=f,o=e(r=a,s))}}function Au(t,e){var n,r,i,o="style."+e,a="end."+o,s;return function(){var f=oe(this,t),l=f.on,u=f.value[o]==null?s||(s=qi(e)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(a,i=u),f.on=r}}function Su(t,e,n){var r=(t+="")=="transform"?Sl:Hi;return e==null?this.styleTween(t,Cu(t,r)).on("end.style."+t,qi(t)):typeof e=="function"?this.styleTween(t,Mu(t,r,Ar(this,"style."+t,e))).each(Au(this._id,t)):this.styleTween(t,Lu(t,r,e),n).on("end.style."+t,null)}function $u(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Nu(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&$u(t,a,n)),r}return o._value=e,o}function ku(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Nu(t,e,n??""))}function Tu(t){return function(){this.textContent=t}}function Iu(t){return function(){var e=t(this);this.textContent=e??""}}function Eu(t){return this.tween("text",typeof t=="function"?Iu(Ar(this,"text",t)):Tu(t==null?"":t+""))}function zu(t){return function(e){this.textContent=t.call(this,e)}}function Pu(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&zu(i)),e}return r._value=t,r}function Du(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Pu(t))}function Ou(){for(var t=this._name,e=this._id,n=Vi(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,f,l=0;l<s;++l)if(f=a[l]){var u=jt(f,e);Xn(f,t,n,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ce(r,this._parents,t,n)}function Ru(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},f={value:function(){--i===0&&o()}};n.each(function(){var l=oe(this,r),u=l.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(f)),l.on=e}),i===0&&o()})}var Bu=0;function ce(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Vi(){return++Bu}var le=un.prototype;ce.prototype={constructor:ce,select:_u,selectAll:xu,selectChild:le.selectChild,selectChildren:le.selectChildren,filter:hu,merge:du,selection:bu,transition:Ou,call:le.call,nodes:le.nodes,node:le.node,size:le.size,empty:le.empty,each:le.each,on:yu,attr:Kl,attrTween:eu,style:Su,styleTween:ku,text:Eu,textTween:Du,remove:mu,tween:Vl,delay:iu,duration:su,ease:uu,easeVarying:fu,end:Ru,[Symbol.iterator]:le[Symbol.iterator]};function Fu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Hu={time:null,delay:0,duration:250,ease:Fu};function qu(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Vu(t){var e,n;t instanceof ce?(e=t._id,t=t._name):(e=Vi(),(n=Hu).time=Cr(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,f,l=0;l<s;++l)(f=a[l])&&Xn(f,t,e,l,a,n||qu(f,e));return new ce(r,this._parents,t,e)}un.prototype.interrupt=Fl;un.prototype.transition=Vu;const Mn=t=>()=>t;function Gu(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ue(t,e,n){this.k=t,this.x=e,this.y=n}ue.prototype={constructor:ue,scale:function(t){return t===1?this:new ue(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ue(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Sr=new ue(1,0,0);ue.prototype;function nr(t){t.stopImmediatePropagation()}function Ke(t){t.preventDefault(),t.stopImmediatePropagation()}function Zu(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Uu(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function si(){return this.__zoom||Sr}function Yu(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Wu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xu(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Ku(){var t=Zu,e=Uu,n=Xu,r=Yu,i=Wu,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,f=Il,l=Un("start","zoom","end"),u,p,h,d=500,C=150,m=0,v=10;function w(g){g.property("__zoom",si).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",I).filter(i).on("touchstart.zoom",D).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(g,z,b,x){var M=g.selection?g.selection():g;M.property("__zoom",si),g!==M?P(g,z,b,x):M.interrupt().each(function(){V(this,arguments).event(x).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},w.scaleBy=function(g,z,b,x){w.scaleTo(g,function(){var M=this.__zoom.k,_=typeof z=="function"?z.apply(this,arguments):z;return M*_},b,x)},w.scaleTo=function(g,z,b,x){w.transform(g,function(){var M=e.apply(this,arguments),_=this.__zoom,L=b==null?A(M):typeof b=="function"?b.apply(this,arguments):b,N=_.invert(L),T=typeof z=="function"?z.apply(this,arguments):z;return n(S(k(_,T),L,N),M,a)},b,x)},w.translateBy=function(g,z,b,x){w.transform(g,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof b=="function"?b.apply(this,arguments):b),e.apply(this,arguments),a)},null,x)},w.translateTo=function(g,z,b,x,M){w.transform(g,function(){var _=e.apply(this,arguments),L=this.__zoom,N=x==null?A(_):typeof x=="function"?x.apply(this,arguments):x;return n(Sr.translate(N[0],N[1]).scale(L.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof b=="function"?-b.apply(this,arguments):-b),_,a)},x,M)};function k(g,z){return z=Math.max(o[0],Math.min(o[1],z)),z===g.k?g:new ue(z,g.x,g.y)}function S(g,z,b){var x=z[0]-b[0]*g.k,M=z[1]-b[1]*g.k;return x===g.x&&M===g.y?g:new ue(g.k,x,M)}function A(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function P(g,z,b,x){g.on("start.zoom",function(){V(this,arguments).event(x).start()}).on("interrupt.zoom end.zoom",function(){V(this,arguments).event(x).end()}).tween("zoom",function(){var M=this,_=arguments,L=V(M,_).event(x),N=e.apply(M,_),T=b==null?A(N):typeof b=="function"?b.apply(M,_):b,q=Math.max(N[1][0]-N[0][0],N[1][1]-N[0][1]),G=M.__zoom,F=typeof z=="function"?z.apply(M,_):z,H=f(G.invert(T).concat(q/G.k),F.invert(T).concat(q/F.k));return function(O){if(O===1)O=F;else{var Z=H(O),j=q/Z[2];O=new ue(j,T[0]-Z[0]*j,T[1]-Z[1]*j)}L.zoom(null,O)}})}function V(g,z,b){return!b&&g.__zooming||new X(g,z)}function X(g,z){this.that=g,this.args=z,this.active=0,this.sourceEvent=null,this.extent=e.apply(g,z),this.taps=0}X.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,z){return this.mouse&&g!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var z=ge(this.that).datum();l.call(g,this.that,new Gu(g,{sourceEvent:this.sourceEvent,target:w,type:g,transform:this.that.__zoom,dispatch:l}),z)}};function E(g,...z){if(!t.apply(this,arguments))return;var b=V(this,z).event(g),x=this.__zoom,M=Math.max(o[0],Math.min(o[1],x.k*Math.pow(2,r.apply(this,arguments)))),_=be(g);if(b.wheel)(b.mouse[0][0]!==_[0]||b.mouse[0][1]!==_[1])&&(b.mouse[1]=x.invert(b.mouse[0]=_)),clearTimeout(b.wheel);else{if(x.k===M)return;b.mouse=[_,x.invert(_)],Tn(this),b.start()}Ke(g),b.wheel=setTimeout(L,C),b.zoom("mouse",n(S(k(x,M),b.mouse[0],b.mouse[1]),b.extent,a));function L(){b.wheel=null,b.end()}}function R(g,...z){if(h||!t.apply(this,arguments))return;var b=g.currentTarget,x=V(this,z,!0).event(g),M=ge(g.view).on("mousemove.zoom",T,!0).on("mouseup.zoom",q,!0),_=be(g,b),L=g.clientX,N=g.clientY;el(g.view),nr(g),x.mouse=[_,this.__zoom.invert(_)],Tn(this),x.start();function T(G){if(Ke(G),!x.moved){var F=G.clientX-L,H=G.clientY-N;x.moved=F*F+H*H>m}x.event(G).zoom("mouse",n(S(x.that.__zoom,x.mouse[0]=be(G,b),x.mouse[1]),x.extent,a))}function q(G){M.on("mousemove.zoom mouseup.zoom",null),nl(G.view,x.moved),Ke(G),x.event(G).end()}}function I(g,...z){if(t.apply(this,arguments)){var b=this.__zoom,x=be(g.changedTouches?g.changedTouches[0]:g,this),M=b.invert(x),_=b.k*(g.shiftKey?.5:2),L=n(S(k(b,_),x,M),e.apply(this,z),a);Ke(g),s>0?ge(this).transition().duration(s).call(P,L,x,g):ge(this).call(w.transform,L,x,g)}}function D(g,...z){if(t.apply(this,arguments)){var b=g.touches,x=b.length,M=V(this,z,g.changedTouches.length===x).event(g),_,L,N,T;for(nr(g),L=0;L<x;++L)N=b[L],T=be(N,this),T=[T,this.__zoom.invert(T),N.identifier],M.touch0?!M.touch1&&M.touch0[2]!==T[2]&&(M.touch1=T,M.taps=0):(M.touch0=T,_=!0,M.taps=1+!!u);u&&(u=clearTimeout(u)),_&&(M.taps<2&&(p=T[0],u=setTimeout(function(){u=null},d)),Tn(this),M.start())}}function U(g,...z){if(this.__zooming){var b=V(this,z).event(g),x=g.changedTouches,M=x.length,_,L,N,T;for(Ke(g),_=0;_<M;++_)L=x[_],N=be(L,this),b.touch0&&b.touch0[2]===L.identifier?b.touch0[0]=N:b.touch1&&b.touch1[2]===L.identifier&&(b.touch1[0]=N);if(L=b.that.__zoom,b.touch1){var q=b.touch0[0],G=b.touch0[1],F=b.touch1[0],H=b.touch1[1],O=(O=F[0]-q[0])*O+(O=F[1]-q[1])*O,Z=(Z=H[0]-G[0])*Z+(Z=H[1]-G[1])*Z;L=k(L,Math.sqrt(O/Z)),N=[(q[0]+F[0])/2,(q[1]+F[1])/2],T=[(G[0]+H[0])/2,(G[1]+H[1])/2]}else if(b.touch0)N=b.touch0[0],T=b.touch0[1];else return;b.zoom("touch",n(S(L,N,T),b.extent,a))}}function B(g,...z){if(this.__zooming){var b=V(this,z).event(g),x=g.changedTouches,M=x.length,_,L;for(nr(g),h&&clearTimeout(h),h=setTimeout(function(){h=null},d),_=0;_<M;++_)L=x[_],b.touch0&&b.touch0[2]===L.identifier?delete b.touch0:b.touch1&&b.touch1[2]===L.identifier&&delete b.touch1;if(b.touch1&&!b.touch0&&(b.touch0=b.touch1,delete b.touch1),b.touch0)b.touch0[1]=this.__zoom.invert(b.touch0[0]);else if(b.end(),b.taps===2&&(L=be(L,this),Math.hypot(p[0]-L[0],p[1]-L[1])<v)){var N=ge(this).on("dblclick.zoom");N&&N.apply(this,arguments)}}}return w.wheelDelta=function(g){return arguments.length?(r=typeof g=="function"?g:Mn(+g),w):r},w.filter=function(g){return arguments.length?(t=typeof g=="function"?g:Mn(!!g),w):t},w.touchable=function(g){return arguments.length?(i=typeof g=="function"?g:Mn(!!g),w):i},w.extent=function(g){return arguments.length?(e=typeof g=="function"?g:Mn([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),w):e},w.scaleExtent=function(g){return arguments.length?(o[0]=+g[0],o[1]=+g[1],w):[o[0],o[1]]},w.translateExtent=function(g){return arguments.length?(a[0][0]=+g[0][0],a[1][0]=+g[1][0],a[0][1]=+g[0][1],a[1][1]=+g[1][1],w):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},w.constrain=function(g){return arguments.length?(n=g,w):n},w.duration=function(g){return arguments.length?(s=+g,w):s},w.interpolate=function(g){return arguments.length?(f=g,w):f},w.on=function(){var g=l.on.apply(l,arguments);return g===l?w:g},w.clickDistance=function(g){return arguments.length?(m=(g=+g)*g,w):Math.sqrt(m)},w.tapDistance=function(g){return arguments.length?(v=+g,w):v},w}const Re=pr("layout",()=>{const t=lt({}),e=lt({x:0,y:0}),n=lt({x:0,y:0,k:1});return{nodes:t,offset:e,transform:n}});function Qu(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function i(){var o,a=n.length,s,f=0,l=0;for(o=0;o<a;++o)s=n[o],f+=s.x,l+=s.y;for(f=(f/a-t)*r,l=(l/a-e)*r,o=0;o<a;++o)s=n[o],s.x-=f,s.y-=l}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(t=+o,i):t},i.y=function(o){return arguments.length?(e=+o,i):e},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function ju(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Gi(this.cover(e,n),e,n,t)}function Gi(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o=t._root,a={data:r},s=t._x0,f=t._y0,l=t._x1,u=t._y1,p,h,d,C,m,v,w,k;if(!o)return t._root=a,t;for(;o.length;)if((m=e>=(p=(s+l)/2))?s=p:l=p,(v=n>=(h=(f+u)/2))?f=h:u=h,i=o,!(o=o[w=v<<1|m]))return i[w]=a,t;if(d=+t._x.call(null,o.data),C=+t._y.call(null,o.data),e===d&&n===C)return a.next=o,i?i[w]=a:t._root=a,t;do i=i?i[w]=new Array(4):t._root=new Array(4),(m=e>=(p=(s+l)/2))?s=p:l=p,(v=n>=(h=(f+u)/2))?f=h:u=h;while((w=v<<1|m)===(k=(C>=h)<<1|d>=p));return i[k]=o,i[w]=a,t}function Ju(t){var e,n,r=t.length,i,o,a=new Array(r),s=new Array(r),f=1/0,l=1/0,u=-1/0,p=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(a[n]=i,s[n]=o,i<f&&(f=i),i>u&&(u=i),o<l&&(l=o),o>p&&(p=o));if(f>u||l>p)return this;for(this.cover(f,l).cover(u,p),n=0;n<r;++n)Gi(this,a[n],s[n],t[n]);return this}function tc(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a=i-n||1,s=this._root,f,l;n>t||t>=i||r>e||e>=o;)switch(l=(e<r)<<1|t<n,f=new Array(4),f[l]=s,s=f,a*=2,l){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function ec(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function nc(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function kt(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function rc(t,e,n){var r,i=this._x0,o=this._y0,a,s,f,l,u=this._x1,p=this._y1,h=[],d=this._root,C,m;for(d&&h.push(new kt(d,i,o,u,p)),n==null?n=1/0:(i=t-n,o=e-n,u=t+n,p=e+n,n*=n);C=h.pop();)if(!(!(d=C.node)||(a=C.x0)>u||(s=C.y0)>p||(f=C.x1)<i||(l=C.y1)<o))if(d.length){var v=(a+f)/2,w=(s+l)/2;h.push(new kt(d[3],v,w,f,l),new kt(d[2],a,w,v,l),new kt(d[1],v,s,f,w),new kt(d[0],a,s,v,w)),(m=(e>=w)<<1|t>=v)&&(C=h[h.length-1],h[h.length-1]=h[h.length-1-m],h[h.length-1-m]=C)}else{var k=t-+this._x.call(null,d.data),S=e-+this._y.call(null,d.data),A=k*k+S*S;if(A<n){var P=Math.sqrt(n=A);i=t-P,o=e-P,u=t+P,p=e+P,r=d.data}}return r}function ic(t){if(isNaN(u=+this._x.call(null,t))||isNaN(p=+this._y.call(null,t)))return this;var e,n=this._root,r,i,o,a=this._x0,s=this._y0,f=this._x1,l=this._y1,u,p,h,d,C,m,v,w;if(!n)return this;if(n.length)for(;;){if((C=u>=(h=(a+f)/2))?a=h:f=h,(m=p>=(d=(s+l)/2))?s=d:l=d,e=n,!(n=n[v=m<<1|C]))return this;if(!n.length)break;(e[v+1&3]||e[v+2&3]||e[v+3&3])&&(r=e,w=v)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[v]=o:delete e[v],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[w]=n:this._root=n),this):(this._root=o,this)}function oc(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function ac(){return this._root}function sc(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function lc(t){var e=[],n,r=this._root,i,o,a,s,f;for(r&&e.push(new kt(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,o=n.x0,a=n.y0,s=n.x1,f=n.y1)&&r.length){var l=(o+s)/2,u=(a+f)/2;(i=r[3])&&e.push(new kt(i,l,u,s,f)),(i=r[2])&&e.push(new kt(i,o,u,l,f)),(i=r[1])&&e.push(new kt(i,l,a,s,u)),(i=r[0])&&e.push(new kt(i,o,a,l,u))}return this}function uc(t){var e=[],n=[],r;for(this._root&&e.push(new kt(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,f=r.x1,l=r.y1,u=(a+f)/2,p=(s+l)/2;(o=i[0])&&e.push(new kt(o,a,s,u,p)),(o=i[1])&&e.push(new kt(o,u,s,f,p)),(o=i[2])&&e.push(new kt(o,a,p,u,l)),(o=i[3])&&e.push(new kt(o,u,p,f,l))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function cc(t){return t[0]}function fc(t){return arguments.length?(this._x=t,this):this._x}function hc(t){return t[1]}function dc(t){return arguments.length?(this._y=t,this):this._y}function $r(t,e,n){var r=new Nr(e??cc,n??hc,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function Nr(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function li(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var It=$r.prototype=Nr.prototype;It.copy=function(){var t=new Nr(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=li(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=li(r));return t};It.add=ju;It.addAll=Ju;It.cover=tc;It.data=ec;It.extent=nc;It.find=rc;It.remove=ic;It.removeAll=oc;It.root=ac;It.size=sc;It.visit=lc;It.visitAfter=uc;It.x=fc;It.y=dc;function Kt(t){return function(){return t}}function ye(t){return(t()-.5)*1e-6}function pc(t){return t.x+t.vx}function gc(t){return t.y+t.vy}function yc(t){var e,n,r,i=1,o=1;typeof t!="function"&&(t=Kt(t==null?1:+t));function a(){for(var l,u=e.length,p,h,d,C,m,v,w=0;w<o;++w)for(p=$r(e,pc,gc).visitAfter(s),l=0;l<u;++l)h=e[l],m=n[h.index],v=m*m,d=h.x+h.vx,C=h.y+h.vy,p.visit(k);function k(S,A,P,V,X){var E=S.data,R=S.r,I=m+R;if(E){if(E.index>h.index){var D=d-E.x-E.vx,U=C-E.y-E.vy,B=D*D+U*U;B<I*I&&(D===0&&(D=ye(r),B+=D*D),U===0&&(U=ye(r),B+=U*U),B=(I-(B=Math.sqrt(B)))/B*i,h.vx+=(D*=B)*(I=(R*=R)/(v+R)),h.vy+=(U*=B)*I,E.vx-=D*(I=1-I),E.vy-=U*I)}return}return A>d+I||V<d-I||P>C+I||X<C-I}}function s(l){if(l.data)return l.r=n[l.data.index];for(var u=l.r=0;u<4;++u)l[u]&&l[u].r>l.r&&(l.r=l[u].r)}function f(){if(e){var l,u=e.length,p;for(n=new Array(u),l=0;l<u;++l)p=e[l],n[p.index]=+t(p,l,e)}}return a.initialize=function(l,u){e=l,r=u,f()},a.iterations=function(l){return arguments.length?(o=+l,a):o},a.strength=function(l){return arguments.length?(i=+l,a):i},a.radius=function(l){return arguments.length?(t=typeof l=="function"?l:Kt(+l),f(),a):t},a}function vc(t){return t.index}function ui(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function mc(t){var e=vc,n=p,r,i=Kt(30),o,a,s,f,l,u=1;t==null&&(t=[]);function p(v){return 1/Math.min(s[v.source.index],s[v.target.index])}function h(v){for(var w=0,k=t.length;w<u;++w)for(var S=0,A,P,V,X,E,R,I;S<k;++S)A=t[S],P=A.source,V=A.target,X=V.x+V.vx-P.x-P.vx||ye(l),E=V.y+V.vy-P.y-P.vy||ye(l),R=Math.sqrt(X*X+E*E),R=(R-o[S])/R*v*r[S],X*=R,E*=R,V.vx-=X*(I=f[S]),V.vy-=E*I,P.vx+=X*(I=1-I),P.vy+=E*I}function d(){if(a){var v,w=a.length,k=t.length,S=new Map(a.map((P,V)=>[e(P,V,a),P])),A;for(v=0,s=new Array(w);v<k;++v)A=t[v],A.index=v,typeof A.source!="object"&&(A.source=ui(S,A.source)),typeof A.target!="object"&&(A.target=ui(S,A.target)),s[A.source.index]=(s[A.source.index]||0)+1,s[A.target.index]=(s[A.target.index]||0)+1;for(v=0,f=new Array(k);v<k;++v)A=t[v],f[v]=s[A.source.index]/(s[A.source.index]+s[A.target.index]);r=new Array(k),C(),o=new Array(k),m()}}function C(){if(a)for(var v=0,w=t.length;v<w;++v)r[v]=+n(t[v],v,t)}function m(){if(a)for(var v=0,w=t.length;v<w;++v)o[v]=+i(t[v],v,t)}return h.initialize=function(v,w){a=v,l=w,d()},h.links=function(v){return arguments.length?(t=v,d(),h):t},h.id=function(v){return arguments.length?(e=v,h):e},h.iterations=function(v){return arguments.length?(u=+v,h):u},h.strength=function(v){return arguments.length?(n=typeof v=="function"?v:Kt(+v),C(),h):n},h.distance=function(v){return arguments.length?(i=typeof v=="function"?v:Kt(+v),m(),h):i},h}const _c=1664525,xc=1013904223,ci=4294967296;function wc(){let t=1;return()=>(t=(_c*t+xc)%ci)/ci}function bc(t){return t.x}function Cc(t){return t.y}var Lc=10,Mc=Math.PI*(3-Math.sqrt(5));function Ac(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,f=Lr(p),l=Un("tick","end"),u=wc();t==null&&(t=[]);function p(){h(),l.call("tick",e),n<r&&(f.stop(),l.call("end",e))}function h(m){var v,w=t.length,k;m===void 0&&(m=1);for(var S=0;S<m;++S)for(n+=(o-n)*i,s.forEach(function(A){A(n)}),v=0;v<w;++v)k=t[v],k.fx==null?k.x+=k.vx*=a:(k.x=k.fx,k.vx=0),k.fy==null?k.y+=k.vy*=a:(k.y=k.fy,k.vy=0);return e}function d(){for(var m=0,v=t.length,w;m<v;++m){if(w=t[m],w.index=m,w.fx!=null&&(w.x=w.fx),w.fy!=null&&(w.y=w.fy),isNaN(w.x)||isNaN(w.y)){var k=Lc*Math.sqrt(.5+m),S=m*Mc;w.x=k*Math.cos(S),w.y=k*Math.sin(S)}(isNaN(w.vx)||isNaN(w.vy))&&(w.vx=w.vy=0)}}function C(m){return m.initialize&&m.initialize(t,u),m}return d(),e={tick:h,restart:function(){return f.restart(p),e},stop:function(){return f.stop(),e},nodes:function(m){return arguments.length?(t=m,d(),s.forEach(C),e):t},alpha:function(m){return arguments.length?(n=+m,e):n},alphaMin:function(m){return arguments.length?(r=+m,e):r},alphaDecay:function(m){return arguments.length?(i=+m,e):+i},alphaTarget:function(m){return arguments.length?(o=+m,e):o},velocityDecay:function(m){return arguments.length?(a=1-m,e):1-a},randomSource:function(m){return arguments.length?(u=m,s.forEach(C),e):u},force:function(m,v){return arguments.length>1?(v==null?s.delete(m):s.set(m,C(v)),e):s.get(m)},find:function(m,v,w){var k=0,S=t.length,A,P,V,X,E;for(w==null?w=1/0:w*=w,k=0;k<S;++k)X=t[k],A=m-X.x,P=v-X.y,V=A*A+P*P,V<w&&(E=X,w=V);return E},on:function(m,v){return arguments.length>1?(l.on(m,v),e):l.on(m)}}}function Sc(){var t,e,n,r,i=Kt(-30),o,a=1,s=1/0,f=.81;function l(d){var C,m=t.length,v=$r(t,bc,Cc).visitAfter(p);for(r=d,C=0;C<m;++C)e=t[C],v.visit(h)}function u(){if(t){var d,C=t.length,m;for(o=new Array(C),d=0;d<C;++d)m=t[d],o[m.index]=+i(m,d,t)}}function p(d){var C=0,m,v,w=0,k,S,A;if(d.length){for(k=S=A=0;A<4;++A)(m=d[A])&&(v=Math.abs(m.value))&&(C+=m.value,w+=v,k+=v*m.x,S+=v*m.y);d.x=k/w,d.y=S/w}else{m=d,m.x=m.data.x,m.y=m.data.y;do C+=o[m.data.index];while(m=m.next)}d.value=C}function h(d,C,m,v){if(!d.value)return!0;var w=d.x-e.x,k=d.y-e.y,S=v-C,A=w*w+k*k;if(S*S/f<A)return A<s&&(w===0&&(w=ye(n),A+=w*w),k===0&&(k=ye(n),A+=k*k),A<a&&(A=Math.sqrt(a*A)),e.vx+=w*d.value*r/A,e.vy+=k*d.value*r/A),!0;if(d.length||A>=s)return;(d.data!==e||d.next)&&(w===0&&(w=ye(n),A+=w*w),k===0&&(k=ye(n),A+=k*k),A<a&&(A=Math.sqrt(a*A)));do d.data!==e&&(S=o[d.data.index]*r/A,e.vx+=w*S,e.vy+=k*S);while(d=d.next)}return l.initialize=function(d,C){t=d,n=C,u()},l.strength=function(d){return arguments.length?(i=typeof d=="function"?d:Kt(+d),u(),l):i},l.distanceMin=function(d){return arguments.length?(a=d*d,l):Math.sqrt(a)},l.distanceMax=function(d){return arguments.length?(s=d*d,l):Math.sqrt(s)},l.theta=function(d){return arguments.length?(f=d*d,l):Math.sqrt(f)},l}function $c(t,e,n){var r,i=Kt(.1),o,a;typeof t!="function"&&(t=Kt(+t)),e==null&&(e=0),n==null&&(n=0);function s(l){for(var u=0,p=r.length;u<p;++u){var h=r[u],d=h.x-e||1e-6,C=h.y-n||1e-6,m=Math.sqrt(d*d+C*C),v=(a[u]-m)*o[u]*l/m;h.vx+=d*v,h.vy+=C*v}}function f(){if(r){var l,u=r.length;for(o=new Array(u),a=new Array(u),l=0;l<u;++l)a[l]=+t(r[l],l,r),o[l]=isNaN(a[l])?0:+i(r[l],l,r)}}return s.initialize=function(l){r=l,f()},s.strength=function(l){return arguments.length?(i=typeof l=="function"?l:Kt(+l),f(),s):i},s.radius=function(l){return arguments.length?(t=typeof l=="function"?l:Kt(+l),f(),s):t},s.x=function(l){return arguments.length?(e=+l,s):e},s.y=function(l){return arguments.length?(n=+l,s):n},s}const Ne=ie(),$e=Re();function Nc(t){var u,p;$e.offset.x+=((u=$e.nodes[t])==null?void 0:u.x)??0,$e.offset.y+=((p=$e.nodes[t])==null?void 0:p.y)??0;const n=Zi(t,1).flat(2),r=[...new Set(n.map(h=>h.id))].filter(h=>{var d;return["entity","predicate"].includes((d=Ne.data.nodes[h])==null?void 0:d.type)}),o=[...r.map(h=>{const d=n.filter(C=>C.id===h).map(({depth:C})=>C);return{id:h,depth:1-Math.max(...d)}}).map(({id:h,depth:d})=>({id:h,depth:d,...l(h)}))],a=[...Ne.data.edges.filter(h=>r.includes(h.nodes[0])&&r.includes(h.nodes[1])).map(h=>({source:h.nodes[0],target:h.nodes[1]}))],s=Ne.data.nodes[t].class;s!=null&&(o.push({id:s,depth:1,...l(s)}),a.push({source:t,target:s})),Ne.nodes.filter(h=>h.class===t).forEach(h=>{o.push({id:h.id,depth:1,...l(h.id)}),a.push({source:h.id,target:t})});const f=Ac(o).force("link",mc(a).id(h=>h.id).distance(100)).force("collide",yc().radius(h=>{var d;return((d=Ne.data.nodes[h.id])==null?void 0:d.type)==="graph"?160:50})).force("charge",Sc().strength(-5e3)).force("center",Qu(0,0)).force("radial",$c(h=>h.depth*550,0,0).strength(2));for(let h=0;h<1e3;h++)f.tick();return Object.fromEntries(o.filter(({proxy:h})=>!h).map(({id:h,x:d,y:C})=>[h,{x:d,y:C}]));function l(h){if(h===t)return{x:0,y:0};if($e.nodes[h]!=null)return $e.nodes[h];const d=Math.random()*Math.PI*2;return{x:Math.cos(d)*250,y:Math.sin(d)*250}}}function Zi(t,e=1){return[{id:t,depth:e},...Ne.data.edges.filter(n=>n.nodes.includes(t)).map(n=>{const r=n.nodes.find(i=>i!==t);return e===1?{id:r,depth:0}:Zi(r,e-1)})]}const kr=pr("display",()=>{const t=Pe(),e=ie(),n=Q(()=>{var l,u;return((l=e.node)==null?void 0:l.marker)==null?[]:(u=e.node)==null?void 0:u.marker.filter(p=>p.time<=t.time).sort((p,h)=>p.time-h.time)}),r=Q(()=>{var l,u;return(u=(l=e.node)==null?void 0:l.marker)==null?void 0:u.find(p=>p.time===t.time)}),i=Q(()=>n.value.reduce((l,u)=>({...l,...u.states}),{states:{}})),o=Q(()=>{var l;return(l=n.value.findLast(u=>u.bounds!=null))==null?void 0:l.bounds});function a(l){return l.includes("hide")?"hide":l.every(u=>u==="highlight")?"highlight":"default"}function s(l){const u=l.map(p=>e.data.nodes[p].inheritDisplay?f(p):i.value[p]);return a(u)}function f(l){const u=e.data.edges.filter(p=>p.nodes.includes(l)).map(p=>{const h=p.nodes.find(d=>d!==l);return i.value[h]});return a(u)}return{markers:n,exactMarker:r,states:i,bounds:o,inheritStateFromNodes:s,inheritStateFromNeighbor:f}}),kc=pr("connect",()=>{const t=ie(),e=lt(!1),n=lt({x:100,y:100}),r=lt(null),i=lt(null),o=lt(null),a=new AbortController;function s(l,u,p){e.value=!0,i.value=u,r.value=l,o.value=p,window.addEventListener("keydown",h=>{h.key==="Escape"&&(a.abort(),e.value=!1)},{signal:a.signal})}function f(l){a.abort(),e.value=!1,t.data.edges.push({nodes:[r.value,l],arrow:i.value,graph:o.value,id:crypto.randomUUID()})}return{connecting:e,offset:n,open:s,start:r,close:f}}),en=Re();function Tc(t){var r;const e=document.createRange(),n=(r=t.value)==null?void 0:r.childNodes;return n==null?0:(e.setStartBefore(n[0]),e.setEndAfter(n[n.length-1]),`${e.getBoundingClientRect().width/en.transform.k}px`)}function Ui(t,e,n,r=0,i=0){var h;const o=document.createRange();if(((h=t.value)==null?void 0:h.childNodes)==null)return{};let s=t.value.firstElementChild;for(let d=r;d>0;d--)s=s.nextElementSibling;let f=t.value.lastElementChild;for(let d=i;d>0;d--)f=f.previousElementSibling;o.setStartBefore(s),o.setEndAfter(f);const l=o.getBoundingClientRect(),u=t.value.getBoundingClientRect().width,p={...n,width:Math.min(l.width,u)/en.transform.k,height:l.height/en.transform.k};return en.nodes[e]=p,p}function fi(t){if(t!=null)return t.getBoundingClientRect().width/en.transform.k}const Ic={class:"horizontal-slider"},Ec=["disabled"],zc=["disabled"],Pc=30,Dc={__name:"HorizontalSlider",props:{itemWidth:{type:Number,default:250},gap:{type:Number,default:10},position:{type:Number,default:null},noArrows:Boolean},emits:["select-item","update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=lt(null),o=lt(0),a=lt(0),s=lt(0),f=lt(null),l=lt(null),u=new ResizeObserver(m=>{for(const v of m)v.contentRect&&(f.value=`${(window.innerWidth-800)/2-30}px`,l.value=`${Math.max((window.innerWidth-800)/2-10,30)}px`,ke(()=>{o.value=i.value.scrollWidth,a.value=i.value.offsetWidth}))}),p=Q(()=>s.value>35&&!n.noArrows),h=Q(()=>s.value<o.value-a.value-35&&!n.noArrows);function d(){var m;s.value=((m=i.value)==null?void 0:m.scrollLeft)??0,r("select-item",Math.round((s.value-Pc)/(n.itemWidth+n.gap)))}const C=m=>{i.value.scrollBy({left:(n.itemWidth+n.gap)*m,behavior:"smooth"})};return Xt(()=>n.position,m=>{m!=null&&i.value.scrollTo({left:(n.itemWidth+n.gap)*m,behavior:"smooth"})}),De(()=>{n.position&&i.value.scrollTo({left:(n.itemWidth+n.gap)*n.position,behavior:"instant"}),u.observe(i.value)}),gr(()=>{u.unobserve(i.value)}),(m,v)=>(K(),ot("div",Ic,[tt("button",{disabled:!p.value,tabindex:"-1",class:"arrow left",onClick:v[0]||(v[0]=w=>C(-1))},"  ",8,Ec),tt("button",{disabled:!h.value,tabindex:"-1",class:"arrow right",onClick:v[1]||(v[1]=w=>C(1))},"  ",8,zc),tt("div",{ref_key:"wrapper",ref:i,class:"wrapper",onScroll:d,style:{scrollPaddingInlineStart:"0px"}},[gi(m.$slots,"default",{},void 0,!0)],544)]))}},Oc=qt(Dc,[["__scopeId","data-v-04825c7b"]]),Rc={class:"icon",width:"21",height:"21",viewBox:"0 0 21 21",xmlns:"http://www.w3.org/2000/svg"};function Bc(t,e){return K(),ot("svg",Rc,e[0]||(e[0]=[tt("path",{d:"M10.5,21 C16.2989899,21 21,16.2989899 21,10.5 C21,4.70101013 16.2989899,0 10.5,0 C4.70101013,0 0,4.70101013 0,10.5 C0,16.2989899 4.70101013,21 10.5,21 Z M10.5,14 C12.4329966,14 14,12.4329966 14,10.5 C14,8.56700338 12.4329966,7 10.5,7 C8.56700338,7 7,8.56700338 7,10.5 C7,12.4329966 8.56700338,14 10.5,14 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const Fc={name:"base-IconPlaying",render:Bc},Hc={__name:"IconPlaying",setup(t){return(e,n)=>(K(),Tt(J(Fc)))}},qc=qt(Hc,[["__scopeId","data-v-aea62c91"]]),Vc=["src"],Gc={key:1,class:"image-placeholder"},Zc={class:"icon"},Uc={__name:"GraphNodeGraph",props:{node:Object,id:String,position:Object},setup(t,{expose:e}){const n=t,r=ln(),i=Pe(),o=Oe(),a=lt(null),s=lt(null),f=Q(()=>r.localize(n.node.label)),l=Q(()=>r.getMediaUrl(n.node.image)),u=Q(()=>({"--graph-accent":`var(--${n.node.color})`})),p=Q(()=>i.graphId===n.id&&i.playing),h=Q(()=>i.next===n.id),d=Q(()=>{if(!h.value)return;const m=i.duration-i.time;if(!(m>5))return{"--autoplay":`${100-m*20}%`}});De(()=>{C()}),Xt(()=>o.lang,()=>ke(()=>C()));function C(m){Ui(s,n.id,n.position,null,m),console.log()}return e({el:s}),(m,v)=>(K(),ot("div",{class:"node-graph",ref_key:"el",ref:s,style:ne({...u.value,...d.value})},[l.value?(K(),ot("img",{key:0,src:l.value,draggable:"false"},null,8,Vc)):(K(),ot("div",Gc)),tt("div",Zc,[ct(yi,{name:"fade",mode:"out-in"},{default:yt(()=>[p.value?(K(),Tt(qc,{key:1})):(K(),Tt(J(ma),{key:0}))]),_:1})]),tt("div",{class:"text",ref_key:"textElement",ref:a},[tt("span",null,[tt("span",null,In(f.value),1)])],512)],4))}},Yi=qt(Uc,[["__scopeId","data-v-487f4295"]]),Yc={key:0},Wc={key:2,class:"description"},Xc={key:3,class:"urls"},Kc=["href"],Qc={__name:"GraphNodeEntity",props:{node:Object,id:String,occurances:Array,position:Object},setup(t,{expose:e}){const n=ze(),r=t,i=ie(),o=Oe(),a=ln(),s=lt(null),f=lt(null),l=lt(null),u=lt(null),p=lt(!1),h=lt(null),d=lt(null),C=lt(0),m=Q(()=>{var E;return(E=i.data.nodes[r.node.class])==null?void 0:E.label}),v=Q(()=>n.params.id===r.id),w=Q(()=>i.storyId!=null&&n.params.type!=="graph"&&i.data.edges.find(E=>E.nodes.includes(r.id)&&E.nodes.includes(n.params.id)&&E.graph===i.storyId)==null),k=Q(()=>{if(v.value)return a.localize(r.node.description,!0)}),S=Q(()=>{if(!(!v.value||r.node.url==null))return r.node.url.map(E=>({full:E,domain:new URL(E).hostname.replace(/^www\./,"")}))});De(()=>{A()}),Xt(v,E=>{E&&(p.value=!0,C.value=Math.max(r.occurances.findIndex(D=>D.id===i.storyId),0));const R=(fi(s.value.querySelector(".label"))-250)/2;h.value={margin:`0 ${-R}px 0 ${R}px`};const I=(fi(s.value.querySelector(".class"))-250)/2;d.value={margin:`0 ${-I}px 0 ${I}px`},ke(()=>{A(E?0:1),E||(p.value=!0,h.value=null,d.value=null)})}),Xt(()=>o.lang,()=>ke(()=>A())),Xt(()=>i.storyIdForce,E=>{if(E!=null&&v.value){const R=r.occurances.findIndex(I=>I.id===E);C.value=null,i.storyIdForce=null,ke(()=>C.value=R)}}),e({el:s});function A(E){const R=Ui(s,r.id,r.position,null,E);u.value=`${R.height}px`}function P(E){E.propertyName==="margin-left"&&(p.value=!1,h.value=null,d.value=null)}function V(E){i.storyId=r.occurances[E].id}function X(){if(n.name==="graph"&&n.params.type!=="graph"&&!v.value){const E=n.params.id,R=i.data.edges.filter(I=>I.nodes.includes(E)&&I.nodes.includes(r.id)&&I.graph!=null);if(R.length){if(R.find(I=>I.graph===i.storyId))return;i.storyIdForce=R[0].graph}}}return(E,R)=>{const I=Vo("RouterLink");return K(),ot("div",{class:Qt(["entity",{detail:v.value,secondary:w.value}]),ref_key:"el",ref:s,style:ne({width:l.value,height:u.value}),onMouseover:X},[tt("span",{class:Qt(["label",{"animate-text-align":p.value}]),style:ne(h.value),onTransitionend:P},[ct(En,{text:t.node.label},null,8,["text"])],38),m.value?(K(),ot("br",Yc)):Ft("",!0),m.value?(K(),ot("span",{key:1,class:Qt(["class",{"animate-text-align":p.value}]),style:ne(d.value)},[ct(En,{text:m.value},null,8,["text"])],6)):Ft("",!0),k.value?(K(),ot("div",Wc,In(k.value),1)):Ft("",!0),S.value&&!J(o).exhibition?(K(),ot("div",Xc,[(K(!0),ot(rn,null,zn(S.value,(D,U)=>(K(),ot("span",{key:U},[tt("a",{href:D.full},In(D.domain),9,Kc),R[2]||(R[2]=Go(" "))]))),128))])):Ft("",!0),ct(yi,{name:"stories"},{default:yt(()=>[v.value?(K(),Tt(Oc,{key:0,position:C.value,ref_key:"slider",ref:f,class:"occurances",onWheel:R[1]||(R[1]=Nt(()=>{},["stop"])),"no-arrows":p.value,onSelectItem:V},{default:yt(()=>[(K(!0),ot(rn,null,zn(t.occurances,D=>(K(),Tt(I,{class:"occurance",onClick:R[0]||(R[0]=Nt(()=>{},["stop"])),key:D.id,to:{name:"graph",params:{type:"graph",id:D.id}}},{default:yt(()=>[ct(Yi,{id:D.id,node:D,class:"compact"},null,8,["id","node"])]),_:2},1032,["to"]))),128))]),_:1},8,["position","no-arrows"])):Ft("",!0)]),_:1})],38)}}},jc=qt(Qc,[["__scopeId","data-v-2151c9a1"]]),Jc={data(){return{count:0}},props:{node:Object},computed:{label(){return this.helperStore.localize(this.node.label??this.node.text)},...Zo(ln)}},tf={class:"entity",ref:"el"},ef={class:"text measure-width"};function nf(t,e,n,r,i,o){return K(),ot("div",tf,[tt("span",ef,In(o.label),1)],512)}const rf=qt(Jc,[["render",nf],["__scopeId","data-v-b64e33c2"]]),of={class:"image"},af=["srcset"],sf={__name:"GraphNodeImage",props:{node:Object},setup(t,{expose:e}){const n=t,r=ln(),i=lt(null),o=Q(()=>r.getMediaUrl(n.node.file));return e({el:i}),(a,s)=>(K(),ot("div",of,[tt("img",{ref_key:"el",ref:i,srcset:`${o.value} 2x`,draggable:"false"},null,8,af)]))}},lf=qt(sf,[["__scopeId","data-v-7cbb6b98"]]),uf={__name:"GraphNodeNote",props:{node:Object,occurances:Array},setup(t,{expose:e}){const n=t,r=ln(),i=lt(null),o=lt(null);Q(()=>r.localize(n.node.text));const a=Q(()=>{if(!(n.occurances.length!==1||n.occurances[0].color==null))return{"--graph-accent":`var(--${n.occurances[0].color})`}});return De(()=>{o.value=Tc(i)}),e({el:i}),(s,f)=>(K(),ot("div",{class:"note",ref_key:"el",ref:i,style:ne({...a.value,width:o.value})},null,4))}},cf=qt(uf,[["__scopeId","data-v-4fff4b26"]]),hi={default:rf,entity:jc,graph:Yi,image:lf,note:cf};function ff(t){return hi[t]??hi.default}var hf=4,df=.001,pf=1e-7,gf=10,tn=11,An=1/(tn-1),yf=typeof Float32Array=="function";function Wi(t,e){return 1-3*e+3*t}function Xi(t,e){return 3*e-6*t}function Ki(t){return 3*t}function Vn(t,e,n){return((Wi(e,n)*t+Xi(e,n))*t+Ki(e))*t}function Qi(t,e,n){return 3*Wi(e,n)*t*t+2*Xi(e,n)*t+Ki(e)}function vf(t,e,n,r,i){var o,a,s=0;do a=e+(n-e)/2,o=Vn(a,r,i)-t,o>0?n=a:e=a;while(Math.abs(o)>pf&&++s<gf);return a}function mf(t,e,n,r){for(var i=0;i<hf;++i){var o=Qi(e,n,r);if(o===0)return e;var a=Vn(e,n,r)-t;e-=a/o}return e}function _f(t){return t}var xf=function(e,n,r,i){if(!(0<=e&&e<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===n&&r===i)return _f;for(var o=yf?new Float32Array(tn):new Array(tn),a=0;a<tn;++a)o[a]=Vn(a*An,e,r);function s(f){for(var l=0,u=1,p=tn-1;u!==p&&o[u]<=f;++u)l+=An;--u;var h=(f-o[u])/(o[u+1]-o[u]),d=l+h*An,C=Qi(d,e,r);return C>=df?mf(f,d,e,r):C===0?d:vf(f,l,l+An,e,r)}return function(l){return l===0?0:l===1?1:Vn(s(l),n,i)}};const wf=vi(xf);var Gn={exports:{}};Gn.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",i=1,o=2,a=9007199254740991,s="[object Arguments]",f="[object Array]",l="[object AsyncFunction]",u="[object Boolean]",p="[object Date]",h="[object Error]",d="[object Function]",C="[object GeneratorFunction]",m="[object Map]",v="[object Number]",w="[object Null]",k="[object Object]",S="[object Promise]",A="[object Proxy]",P="[object RegExp]",V="[object Set]",X="[object String]",E="[object Symbol]",R="[object Undefined]",I="[object WeakMap]",D="[object ArrayBuffer]",U="[object DataView]",B="[object Float32Array]",g="[object Float64Array]",z="[object Int8Array]",b="[object Int16Array]",x="[object Int32Array]",M="[object Uint8Array]",_="[object Uint8ClampedArray]",L="[object Uint16Array]",N="[object Uint32Array]",T=/[\\^$.*+?()[\]{}|]/g,q=/^\[object .+?Constructor\]$/,G=/^(?:0|[1-9]\d*)$/,F={};F[B]=F[g]=F[z]=F[b]=F[x]=F[M]=F[_]=F[L]=F[N]=!0,F[s]=F[f]=F[D]=F[u]=F[U]=F[p]=F[h]=F[d]=F[m]=F[v]=F[k]=F[P]=F[V]=F[X]=F[I]=!1;var H=typeof Qe=="object"&&Qe&&Qe.Object===Object&&Qe,O=typeof self=="object"&&self&&self.Object===Object&&self,Z=H||O||Function("return this")(),j=e&&!e.nodeType&&e,ft=j&&!0&&t&&!t.nodeType&&t,rt=ft&&ft.exports===j,at=rt&&H.process,nt=function(){try{return at&&at.binding&&at.binding("util")}catch{}}(),st=nt&&nt.isTypedArray;function W(c,y){for(var $=-1,Y=c==null?0:c.length,ht=0,it=[];++$<Y;){var vt=c[$];y(vt,$,c)&&(it[ht++]=vt)}return it}function ut(c,y){for(var $=-1,Y=y.length,ht=c.length;++$<Y;)c[ht+$]=y[$];return c}function et(c,y){for(var $=-1,Y=c==null?0:c.length;++$<Y;)if(y(c[$],$,c))return!0;return!1}function Et(c,y){for(var $=-1,Y=Array(c);++$<c;)Y[$]=y($);return Y}function zt(c){return function(y){return c(y)}}function mt(c,y){return c.has(y)}function Mt(c,y){return c==null?void 0:c[y]}function St(c){var y=-1,$=Array(c.size);return c.forEach(function(Y,ht){$[++y]=[ht,Y]}),$}function pt(c,y){return function($){return c(y($))}}function dt(c){var y=-1,$=Array(c.size);return c.forEach(function(Y){$[++y]=Y}),$}var Ct=Array.prototype,Jt=Function.prototype,Pt=Object.prototype,_t=Z["__core-js_shared__"],Be=Jt.toString,Vt=Pt.hasOwnProperty,fn=function(){var c=/[^.]+$/.exec(_t&&_t.keys&&_t.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Fe=Pt.toString,hn=RegExp("^"+Be.call(Vt).replace(T,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wt=rt?Z.Buffer:void 0,He=Z.Symbol,qe=Z.Uint8Array,Ve=Pt.propertyIsEnumerable,dn=Ct.splice,te=He?He.toStringTag:void 0,pn=Object.getOwnPropertySymbols,Kn=wt?wt.isBuffer:void 0,Qn=pt(Object.keys,Object),Ge=Se(Z,"DataView"),ve=Se(Z,"Map"),xt=Se(Z,"Promise"),Dt=Se(Z,"Set"),Gt=Se(Z,"WeakMap"),Rt=Se(Object,"create"),$t=xe(Ge),fe=xe(ve),gn=xe(xt),Ze=xe(Dt),Ue=xe(Gt),Tr=He?He.prototype:void 0,jn=Tr?Tr.valueOf:void 0;function me(c){var y=-1,$=c==null?0:c.length;for(this.clear();++y<$;){var Y=c[y];this.set(Y[0],Y[1])}}function Ji(){this.__data__=Rt?Rt(null):{},this.size=0}function to(c){var y=this.has(c)&&delete this.__data__[c];return this.size-=y?1:0,y}function eo(c){var y=this.__data__;if(Rt){var $=y[c];return $===r?void 0:$}return Vt.call(y,c)?y[c]:void 0}function no(c){var y=this.__data__;return Rt?y[c]!==void 0:Vt.call(y,c)}function ro(c,y){var $=this.__data__;return this.size+=this.has(c)?0:1,$[c]=Rt&&y===void 0?r:y,this}me.prototype.clear=Ji,me.prototype.delete=to,me.prototype.get=eo,me.prototype.has=no,me.prototype.set=ro;function ae(c){var y=-1,$=c==null?0:c.length;for(this.clear();++y<$;){var Y=c[y];this.set(Y[0],Y[1])}}function io(){this.__data__=[],this.size=0}function oo(c){var y=this.__data__,$=vn(y,c);if($<0)return!1;var Y=y.length-1;return $==Y?y.pop():dn.call(y,$,1),--this.size,!0}function ao(c){var y=this.__data__,$=vn(y,c);return $<0?void 0:y[$][1]}function so(c){return vn(this.__data__,c)>-1}function lo(c,y){var $=this.__data__,Y=vn($,c);return Y<0?(++this.size,$.push([c,y])):$[Y][1]=y,this}ae.prototype.clear=io,ae.prototype.delete=oo,ae.prototype.get=ao,ae.prototype.has=so,ae.prototype.set=lo;function _e(c){var y=-1,$=c==null?0:c.length;for(this.clear();++y<$;){var Y=c[y];this.set(Y[0],Y[1])}}function uo(){this.size=0,this.__data__={hash:new me,map:new(ve||ae),string:new me}}function co(c){var y=mn(this,c).delete(c);return this.size-=y?1:0,y}function fo(c){return mn(this,c).get(c)}function ho(c){return mn(this,c).has(c)}function po(c,y){var $=mn(this,c),Y=$.size;return $.set(c,y),this.size+=$.size==Y?0:1,this}_e.prototype.clear=uo,_e.prototype.delete=co,_e.prototype.get=fo,_e.prototype.has=ho,_e.prototype.set=po;function yn(c){var y=-1,$=c==null?0:c.length;for(this.__data__=new _e;++y<$;)this.add(c[y])}function go(c){return this.__data__.set(c,r),this}function yo(c){return this.__data__.has(c)}yn.prototype.add=yn.prototype.push=go,yn.prototype.has=yo;function he(c){var y=this.__data__=new ae(c);this.size=y.size}function vo(){this.__data__=new ae,this.size=0}function mo(c){var y=this.__data__,$=y.delete(c);return this.size=y.size,$}function _o(c){return this.__data__.get(c)}function xo(c){return this.__data__.has(c)}function wo(c,y){var $=this.__data__;if($ instanceof ae){var Y=$.__data__;if(!ve||Y.length<n-1)return Y.push([c,y]),this.size=++$.size,this;$=this.__data__=new _e(Y)}return $.set(c,y),this.size=$.size,this}he.prototype.clear=vo,he.prototype.delete=mo,he.prototype.get=_o,he.prototype.has=xo,he.prototype.set=wo;function bo(c,y){var $=_n(c),Y=!$&&Oo(c),ht=!$&&!Y&&Jn(c),it=!$&&!Y&&!ht&&Fr(c),vt=$||Y||ht||it,bt=vt?Et(c.length,String):[],Lt=bt.length;for(var gt in c)Vt.call(c,gt)&&!(vt&&(gt=="length"||ht&&(gt=="offset"||gt=="parent")||it&&(gt=="buffer"||gt=="byteLength"||gt=="byteOffset")||Io(gt,Lt)))&&bt.push(gt);return bt}function vn(c,y){for(var $=c.length;$--;)if(Dr(c[$][0],y))return $;return-1}function Co(c,y,$){var Y=y(c);return _n(c)?Y:ut(Y,$(c))}function Ye(c){return c==null?c===void 0?R:w:te&&te in Object(c)?ko(c):Do(c)}function Ir(c){return We(c)&&Ye(c)==s}function Er(c,y,$,Y,ht){return c===y?!0:c==null||y==null||!We(c)&&!We(y)?c!==c&&y!==y:Lo(c,y,$,Y,Er,ht)}function Lo(c,y,$,Y,ht,it){var vt=_n(c),bt=_n(y),Lt=vt?f:de(c),gt=bt?f:de(y);Lt=Lt==s?k:Lt,gt=gt==s?k:gt;var Bt=Lt==k,Yt=gt==k,At=Lt==gt;if(At&&Jn(c)){if(!Jn(y))return!1;vt=!0,Bt=!1}if(At&&!Bt)return it||(it=new he),vt||Fr(c)?zr(c,y,$,Y,ht,it):$o(c,y,Lt,$,Y,ht,it);if(!($&i)){var Zt=Bt&&Vt.call(c,"__wrapped__"),Ut=Yt&&Vt.call(y,"__wrapped__");if(Zt||Ut){var pe=Zt?c.value():c,se=Ut?y.value():y;return it||(it=new he),ht(pe,se,$,Y,it)}}return At?(it||(it=new he),No(c,y,$,Y,ht,it)):!1}function Mo(c){if(!Br(c)||zo(c))return!1;var y=Or(c)?hn:q;return y.test(xe(c))}function Ao(c){return We(c)&&Rr(c.length)&&!!F[Ye(c)]}function So(c){if(!Po(c))return Qn(c);var y=[];for(var $ in Object(c))Vt.call(c,$)&&$!="constructor"&&y.push($);return y}function zr(c,y,$,Y,ht,it){var vt=$&i,bt=c.length,Lt=y.length;if(bt!=Lt&&!(vt&&Lt>bt))return!1;var gt=it.get(c);if(gt&&it.get(y))return gt==y;var Bt=-1,Yt=!0,At=$&o?new yn:void 0;for(it.set(c,y),it.set(y,c);++Bt<bt;){var Zt=c[Bt],Ut=y[Bt];if(Y)var pe=vt?Y(Ut,Zt,Bt,y,c,it):Y(Zt,Ut,Bt,c,y,it);if(pe!==void 0){if(pe)continue;Yt=!1;break}if(At){if(!et(y,function(se,we){if(!mt(At,we)&&(Zt===se||ht(Zt,se,$,Y,it)))return At.push(we)})){Yt=!1;break}}else if(!(Zt===Ut||ht(Zt,Ut,$,Y,it))){Yt=!1;break}}return it.delete(c),it.delete(y),Yt}function $o(c,y,$,Y,ht,it,vt){switch($){case U:if(c.byteLength!=y.byteLength||c.byteOffset!=y.byteOffset)return!1;c=c.buffer,y=y.buffer;case D:return!(c.byteLength!=y.byteLength||!it(new qe(c),new qe(y)));case u:case p:case v:return Dr(+c,+y);case h:return c.name==y.name&&c.message==y.message;case P:case X:return c==y+"";case m:var bt=St;case V:var Lt=Y&i;if(bt||(bt=dt),c.size!=y.size&&!Lt)return!1;var gt=vt.get(c);if(gt)return gt==y;Y|=o,vt.set(c,y);var Bt=zr(bt(c),bt(y),Y,ht,it,vt);return vt.delete(c),Bt;case E:if(jn)return jn.call(c)==jn.call(y)}return!1}function No(c,y,$,Y,ht,it){var vt=$&i,bt=Pr(c),Lt=bt.length,gt=Pr(y),Bt=gt.length;if(Lt!=Bt&&!vt)return!1;for(var Yt=Lt;Yt--;){var At=bt[Yt];if(!(vt?At in y:Vt.call(y,At)))return!1}var Zt=it.get(c);if(Zt&&it.get(y))return Zt==y;var Ut=!0;it.set(c,y),it.set(y,c);for(var pe=vt;++Yt<Lt;){At=bt[Yt];var se=c[At],we=y[At];if(Y)var Hr=vt?Y(we,se,At,y,c,it):Y(se,we,At,c,y,it);if(!(Hr===void 0?se===we||ht(se,we,$,Y,it):Hr)){Ut=!1;break}pe||(pe=At=="constructor")}if(Ut&&!pe){var xn=c.constructor,wn=y.constructor;xn!=wn&&"constructor"in c&&"constructor"in y&&!(typeof xn=="function"&&xn instanceof xn&&typeof wn=="function"&&wn instanceof wn)&&(Ut=!1)}return it.delete(c),it.delete(y),Ut}function Pr(c){return Co(c,Fo,To)}function mn(c,y){var $=c.__data__;return Eo(y)?$[typeof y=="string"?"string":"hash"]:$.map}function Se(c,y){var $=Mt(c,y);return Mo($)?$:void 0}function ko(c){var y=Vt.call(c,te),$=c[te];try{c[te]=void 0;var Y=!0}catch{}var ht=Fe.call(c);return Y&&(y?c[te]=$:delete c[te]),ht}var To=pn?function(c){return c==null?[]:(c=Object(c),W(pn(c),function(y){return Ve.call(c,y)}))}:Ho,de=Ye;(Ge&&de(new Ge(new ArrayBuffer(1)))!=U||ve&&de(new ve)!=m||xt&&de(xt.resolve())!=S||Dt&&de(new Dt)!=V||Gt&&de(new Gt)!=I)&&(de=function(c){var y=Ye(c),$=y==k?c.constructor:void 0,Y=$?xe($):"";if(Y)switch(Y){case $t:return U;case fe:return m;case gn:return S;case Ze:return V;case Ue:return I}return y});function Io(c,y){return y=y??a,!!y&&(typeof c=="number"||G.test(c))&&c>-1&&c%1==0&&c<y}function Eo(c){var y=typeof c;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?c!=="__proto__":c===null}function zo(c){return!!fn&&fn in c}function Po(c){var y=c&&c.constructor,$=typeof y=="function"&&y.prototype||Pt;return c===$}function Do(c){return Fe.call(c)}function xe(c){if(c!=null){try{return Be.call(c)}catch{}try{return c+""}catch{}}return""}function Dr(c,y){return c===y||c!==c&&y!==y}var Oo=Ir(function(){return arguments}())?Ir:function(c){return We(c)&&Vt.call(c,"callee")&&!Ve.call(c,"callee")},_n=Array.isArray;function Ro(c){return c!=null&&Rr(c.length)&&!Or(c)}var Jn=Kn||qo;function Bo(c,y){return Er(c,y)}function Or(c){if(!Br(c))return!1;var y=Ye(c);return y==d||y==C||y==l||y==A}function Rr(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=a}function Br(c){var y=typeof c;return c!=null&&(y=="object"||y=="function")}function We(c){return c!=null&&typeof c=="object"}var Fr=st?zt(st):Ao;function Fo(c){return Ro(c)?bo(c):So(c)}function Ho(){return[]}function qo(){return!1}t.exports=Bo})(Gn,Gn.exports);var bf=Gn.exports;const Cf=vi(bf),nn=+getComputedStyle(document.documentElement).getPropertyValue("--transition").replace(/(.+)ms/,(t,e)=>e).replace(/(.+)s/,(t,e)=>e*1e3),dr=+getComputedStyle(document.documentElement).getPropertyValue("--spacing").replace(/px$/,""),Lf={__name:"BaseInterpolate",props:{props:Object,duration:{type:Number,default:nn},delay:{type:Number,default:0}},setup(t){const e=t,n=lt(e.props);let r=null;const i=wf(.25,.1,.25,1);let o=Bn(null,e.props);Xt(()=>e.props,(s,f)=>{Cf(s,f)||(o=Bn(n.value,e.props),r=null,requestAnimationFrame(a))},{deep:!1});function a(s){if(e.duration===0)return n.value={...e.props};r===null&&(r=s);const f=Math.max(Math.min((s-r-e.delay)/e.duration,1),0);n.value={...o(i(f))},f<1&&requestAnimationFrame(a)}return(s,f)=>gi(s.$slots,"default",Uo(Yo(n.value)))}},Mf={class:"node-wrapper"},Af={__name:"GraphNode",props:{id:String,view:String,position:Object,graph:[String,Boolean]},setup(t){const e=t,n=mi();ze();const r=ie(),i=Re(),o=kr(),a=yr(),s=Pe(),f=Oe(),l=Zn(),u=_i(),p=kc(),h=vr(),d=lt(null),C=Q(()=>r.data.nodes[e.id]),m=Q(()=>({transform:`translate(${e.position.x+i.offset.x}px, ${e.position.y+i.offset.y}px) translate(-50%, -50%)`})),v=Q(()=>ff(C.value.type)),w=Q(()=>d.value.el??d.value.$el),k=Q(()=>r.graphs.filter(D=>Object.prototype.hasOwnProperty.call(D.allocations??{},e.id))),S=Q(()=>C.value.inheritDisplay?o.inheritStateFromNeighbor(e.id):o.states[e.id]),A=Q(()=>{var D,U,B,g;return(g=(B=(U=(D=r.data.nodes)==null?void 0:D[e.graph])==null?void 0:U.allocations)==null?void 0:B[e.id])==null?void 0:g.locked}),P=new ResizeObserver(D=>{for(const U of D)U.contentRect});function V(D){!f.edit||D.metaKey?n.push({name:"graph",params:{type:C.value.type,id:e.id}}):p.connecting?p.close(e.id):h.mode==="add-edge"?p.open(e.id,"",e.graph):h.mode==="display-blur"?h.setDisplay(e.id,"hide",e.graph):h.mode==="display-default"?h.setDisplay(e.id,"default",e.graph):h.mode==="display-highlight"?h.setDisplay(e.id,"highlight",e.graph):h.mode==="display-unset"&&h.setDisplay(e.id,null,e.graph)}function X(){f.edit&&u.open(e.id,"node")}function E(D){if(!f.edit||e.view!=="diagram"||D.button!==0||A.value)return;D.stopPropagation();const U={x:D.x,y:D.y},B={x:r.data.nodes[e.graph].allocations[e.id].x,y:r.data.nodes[e.graph].allocations[e.id].y},g=new AbortController;window.addEventListener("mousemove",b=>{const x={x:(b.x-U.x)/i.transform.k,y:(b.y-U.y)/i.transform.k},M=b.shiftKey?.5:20,_=Math.round((B.x+x.x)/M)*M,L=Math.round((B.y+x.y)/M)*M;r.data.nodes[e.graph].allocations[e.id].x=_,r.data.nodes[e.graph].allocations[e.id].y=L},{signal:g.signal}),window.addEventListener("mouseup",()=>{z()},{once:!0,signal:g.signal}),window.addEventListener("keydown",b=>{b.key==="Escape"&&z()},{signal:g.signal});function z(){g.abort()}}function R(D,U){return D?[U]:[]}function I(D){f.edit&&(D.preventDefault(),D.stopPropagation(),l.open(mr,[...R(e.view==="diagram",{label:"delete",action:()=>{r.deleteNode(e.id,e.graph)}}),{label:"edit",action:()=>{u.open(e.id,"node")}},...R(e.view==="diagram",{label:"",action:()=>{e.view==="diagram"&&p.open(e.id,"",e.graph)}}),...R(e.view==="diagram",{label:A.value?"unlock":"lock",action:()=>{r.data.nodes[e.graph].allocations[e.id].locked=!A.value}}),{label:"log",action:()=>{console.log(e.id,r.data.nodes[e.graph].allocations[e.id])}}],{x:D.x,y:D.y}))}return Xt(()=>[e.position.y,e.position.x],()=>{i.nodes[e.id]={...i.nodes[e.id],x:e.position.x,y:e.position.y}}),De(()=>{P.observe(w.value)}),gr(()=>{w.value!=null&&P.unobserve(w.value),delete i.nodes[e.id]}),(D,U)=>{var B,g;return K(),ot("div",Mf,[tt("div",{style:ne(m.value)},[(K(),Tt(Wo(v.value),{ref_key:"componentRef",ref:d,id:t.id,class:Qt(["node",[S.value,t.view,`mode-${J(h).mode}`,{"user-active":!J(a).inactivityShort||!J(s).playing,edit:J(f).edit,locked:A.value,exact:(g=(B=J(o).exactMarker)==null?void 0:B.states)==null?void 0:g.hasOwnProperty(t.id)}]]),"no-style":m.value,node:C.value,occurances:k.value,position:t.position,onClick:V,onDblclick:Nt(X,["stop"]),onMousedown:E,onContextmenu:I},null,40,["id","class","no-style","node","occurances","position"]))],4)])}}},Sf=qt(Af,[["__scopeId","data-v-3ae91c1f"]]);function di(t,e,n,r,i,o,a,s,f){const l=i+a,u=o+s,p=i+f,h=o+f,d=i+a-f,C=o+s-f,m=[[i,C,i,h,i,o],[p,o,d,o,l,o],[l,h,l,C,l,u],[d,u,p,u,i,u]],v=[[p,h,Math.PI,Math.PI*1.5],[d,h,Math.PI*1.5,Math.PI*2],[d,C,0,Math.PI*.5],[p,C,Math.PI*.5,Math.PI]];let w=[];return m.forEach((k,S)=>{const[A,P,V,X]=k,[E,R,I,D]=v[S];Tf(E,R,f,t,e,n,r).filter(B=>{const g=Nf(kf(E,R,B[0],B[1]));return g>I&&g<D}).forEach(B=>w.push({point:B,anchor:S*2+1}));const U=$f(t,e,n,r,A,P,V,X);U&&w.push({point:U,anchor:S*2})}),w}function $f(t,e,n,r,i,o,a,s){const f=(s-o)*(n-t)-(a-i)*(r-e),l=(a-i)*(e-o)-(s-o)*(t-i),u=(n-t)*(e-o)-(r-e)*(t-i);if(f===0)return void 0;const p=l/f,h=u/f;if(p>=0&&p<=1&&h>=0&&h<=1)return[t+p*(n-t),e+p*(r-e)]}function Nf(t){return t-Math.PI*2*Math.floor(t/(Math.PI*2))}function kf(t,e,n,r){return Math.atan2(r-e,n-t)}function Tf(t,e,n,r,i,o,a){var s,f,l,u,p,h,d,C,m=[o-r,a-i],v=[r-t,i-e];return s=m[0]*v[0]+m[1]*v[1],f=2*(m[0]*m[0]+m[1]*m[1]),s*=-2,l=Math.sqrt(s*s-2*f*(v[0]*v[0]+v[1]*v[1]-n*n)),isNaN(l)?[]:(u=(s-l)/f,p=(s+l)/f,d=[],C=[],h=[],u<=1&&u>=0&&(d[0]=r+m[0]*u,d[1]=i+m[1]*u,h[0]=d),p<=1&&p>=0&&(C[0]=r+m[0]*p,C[1]=i+m[1]*p,h[h.length]=C),h)}var ji={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.pathDataLength=n()})(Qe,function(){var e={};const{PI:n,sin:r,cos:i,acos:o,abs:a,sqrt:s,log:f,tan:l}=Math,u={wa12:[[.24914704581340288,.12523340851146894],[.23349253653835458,.3678314989981802],[.20316742672306584,.5873179542866175],[.16007832854334633,.7699026741943047],[.10693932599531818,.9041172563704748],[.04717533638650846,.9815606342467192]],wa24:[[.1279381953467522,.0640568928626056],[.1258374563468283,.1911188674736163],[.1216704729278034,.3150426796961634],[.1155056680537256,.4337935076260451],[.1074442701159656,.5454214713888396],[.0976186521041139,.6480936519369755],[.0861901615319533,.7401241915785544],[.0733464814110803,.820001985973903],[.0592985849154368,.8864155270044011],[.0442774388174198,.9382745520027328],[.0285313886289337,.9747285559713095],[.0123412297999872,.9951872199970213]]};function p(S,A=.5){const P=(R,I,D)=>({x:(I.x-R.x)*D+R.x,y:(I.y-R.y)*D+R.y}),V=(R,I,D,U,B)=>{let g=1-B;return{x:g**3*R.x+3*g**2*B*I.x+3*g*B**2*D.x+B**3*U.x,y:g**3*R.y+3*g**2*B*I.y+3*g*B**2*D.y+B**3*U.y}},X=(R,I,D,U)=>{let B=1-U;return{x:B*B*R.x+2*B*U*I.x+U**2*D.x,y:B*B*R.y+2*B*U*I.y+U**2*D.y}};let E;return S.length===4?E=V(S[0],S[1],S[2],S[3],A):S.length===3?E=X(S[0],S[1],S[2],A):E=P(S[0],S[1],A),E}function h(S,A){this.totalLength=S||0,this.segments=A||[]}h.prototype.getPointAtLength=function(S=0){let{segments:A,totalLength:P}=this,V=!1,X={x:0,y:0},E=0;if(S===0)return A[0].points[0];if(+S.toFixed(3)==+P.toFixed(3)){let{points:R}=A[A.length-1];return X=R[R.length-1],X}for(let R=0;R<A.length&&!V;R++){let I=A[R],{type:D,lengths:U,points:B,total:g}=I,z=U[U.length-1],b=1/(U.length-1);if(z>S){V=!0;let x=!1,M;switch(D){case"L":M=z-S,E=1-1/g*M,X=p(B,E);break;case"A":M=z-S,E=1-1/g*M;let{cx:_,cy:L,deltaAngle:N}=I.points[1],T=-N*E,q=Math.cos(T),G=Math.sin(T);p0=I.points[0],X={x:q*(p0.x-_)+G*(p0.y-L)+_,y:q*(p0.y-L)-G*(p0.x-_)+L};break;case"C":case"Q":let F=v([B[0],B[1]])+v([B[1],B[2]]),H=D==="C"?v([B[2],B[3]]):0,O=v([B[0],B[B.length-1]]);if(F+H===O)M=z-S,E=1-1/g*M,X=E<=1?p([B[0],B[2]],E):B[B.length-1];else for(let Z=0;Z<U.length&&!x;Z++){let j=U[Z],ft=Z>0?U[Z-1]:U[Z];if(j>S){let rt=b*Z,at=j-ft,nt=j-S,st=1/at*nt;E=rt-b*st,x=!0,X=p(B,E)}}break}X.index=I.index,X.t=E}}return X};function d(S,A="medium",P=!1){const V=x=>{let M=0;for(let _=0;_<x.length;_++){let L=x[_].x,N=x[_===x.length-1?0:_+1].y,T=x[_===x.length-1?0:_+1].x,q=x[_].y;M+=L*N*.5-T*q*.5}return Math.abs(M)<.1};let X=A==="high"?4:A==="medium"?2:1,E=A==="high",R=A==="medium"?24:12,I=[12,24,36,48,60,64,72,96],D=A==="low"?10:12,U=A==="low"?16:A==="medium"?24:36,B=Array.isArray(S)?S:w(S,{arcAccuracy:X}),g=0,z=B[0],b={totalLength:0,segments:[]};for(let x=1;x<B.length;x++){let _=B[x-1].values,L=_.length,N={x:_[L-2],y:_[L-1]},T=B[x],{type:q,values:G}=T,F=G.length,H={x:G[F-2],y:G[F-1]},O,Z,j,ft,rt={lengths:[],points:[],index:x,total:0,type:q};switch(q){case"M":z=B[x],O=0;break;case"Z":case"z":case"L":q.toLowerCase()==="z"&&(H={x:z.values[0],y:z.values[1]},rt.type="L"),O=v([N,H]),rt.points.push(N,H);break;case"A":H={x:T.values[5],y:T.values[6]};let at=T.values[3],nt=T.values[4],st=k(N.x,N.y,T.values[0],T.values[1],T.values[2],at,nt,H.x,H.y),{cx:W,cy:ut,rx:et,ry:Et,startAngle:zt,deltaAngle:mt}=st;O=2*Math.PI*et*(1/360*Math.abs(mt*180/n)),rt.points=[N,{startAngle:zt,deltaAngle:mt,cx:W,cy:ut},H];break;case"C":case"Q":rt.lengths.push(g),Z={x:G[0],y:G[1]},j=q==="C"?{x:G[2],y:G[3]}:Z;let Mt=q==="C"?[N,Z,j,H]:[N,Z,H],St=q==="Q"?D:U,pt=V(Mt);if(pt){Mt=[N,H],O=v(Mt),rt.type="L",rt.points.push(N,H);break}else if(O=E?v(Mt,1,I[0]):v(Mt,1,R),q==="C"&&E){let dt,Ct=!1,Jt=.05,Pt=0;for(let _t=1;_t<I.length&&!Ct;_t++)lgNew=I[_t],dt=v(Mt,1,lgNew),Pt=a(dt-O),Pt<Jt||_t===I.length-1?(R=I[_t-1],Ct=!0):O=dt}if(!P&&!pt){for(let dt=1;dt<St;dt++)ft=1/St*dt,rt.lengths.push(v(Mt,ft,R)+g);rt.points=Mt}break;default:O=0;break}P||(rt.lengths.push(O+g),rt.total=O),g+=O,q!=="M"&&b.segments.push(rt),b.totalLength=g}return P?g:new h(b.totalLength,b.segments)}function C(S,A=0){let P=w(S);return m(P,A)}function m(S,A=0){return d(S,A,!0)}function v(S,A=1,P=0){const V=(I,D)=>s((D.x-I.x)*(D.x-I.x)+(D.y-I.y)*(D.y-I.y)),X=(I,D,U,B,g,z)=>{if(g===0)return 0;const b=(N,T=-1,q=1)=>{let G=[],F,H,O,Z,j,ft,rt,at;const nt=N+1>>1;O=.5*(q+T),Z=.5*(q-T);for(let st=nt-1;st>=0;st--){H=i(n*(st+.75)/(N+.5));do{at=1,rt=0;for(let W=0;W<N;W++)ft=rt,rt=at,at=((2*W+1)*H*rt-W*ft)/(W+1);j=N*(H*at-rt)/(H*H-1),F=H,H=F-at/j}while(a(H-F)>1e-14);G.push([2*Z/((1-H*H)*j*j),O+Z*H])}return G},x=(N,T,q,G,F)=>{let H=-3*T+9*q-9*G+3*F,O=N*H+6*T-12*q+6*G;return N*O-3*T+3*q};g=g>1?1:g<0?0:g;let M=g/2;u[z]||(u[z]=b(z));const _=u[z];let L=0;for(let N=0,T=_.length;N<T;N++){let[q,G]=[_[N][0],_[N][1]],F=M*G,H=F+M,O=-F+M,Z=x(O,I.x,D.x,U.x,B.x),j=x(O,I.y,D.y,U.y,B.y),ft=Z*Z+j*j,rt=x(H,I.x,D.x,U.x,B.x),at=x(H,I.y,D.y,U.y,B.y),nt=rt*rt+at*at;L+=q*s(ft)+q*s(nt)}return M*L},E=(I,D,U,B,g=!1)=>{if(B===0)return 0;if(g){let Z=V(I,D)+V(D,U),j=V(I,U);if(Z===j)return j}let z,b,x,M,_,L,N,T,q;T=D.x*2,q=D.y*2,M=I.x-T+U.x,N=I.y-q+U.y,_=T-2*I.x,L=q-2*I.y,z=4*(M*M+N*N),b=4*(M*_+N*L),x=_*_+L*L;const G=b/(2*z),F=x/z,H=B+G,O=F-G**2;return s(z)/2*(H*s(H**2+O)-G*s(G**2+O)+O*f((H+s(H**2+O))/(G+s(G**2+O))))};let R;return S.length===4?R=X(S[0],S[1],S[2],S[3],A,P):S.length===3?R=E(S[0],S[1],S[2],A):R=V(S[0],S[1]),R}function w(S,A={}){S=S.replace(/[\n\r\t|,]/g," ").trim().replace(/(\d)-/g,"$1 -").replace(/(\.)(?=(\d+\.\d+)+)(\d+)/g,"$1$3 ");let P=[],V=/([mlcqazvhst])([^mlcqazvhst]*)/gi,X=S.match(V),E={m:2,a:7,c:6,h:1,l:2,q:4,s:4,t:2,v:1,z:0};A={toAbsolute:!0,toLonghands:!0,arcToCubic:!1,arcAccuracy:4,...A};let{toAbsolute:R,toLonghands:I,arcToCubic:D,arcAccuracy:U}=A,B=/[a]/gi.test(S),g=I?/[vhst]/gi.test(S):!1,z=R?/[lcqamts]/g.test(S.substring(1,S.length-1)):!1,b,x,M,_,L;for(let T=0;T<X.length;T++){let q=X[T],G=q.substring(0,1),F=G.toLowerCase(),H=G.toUpperCase(),O=G===F,Z=E[F],j=q.substring(1,q.length).trim().split(" ").filter(Boolean);if(F==="a"&&j.length!=E.a){let nt=0,st=[];for(let W=0;W<j.length;W++){let ut=j[W];if(nt>=Z&&(nt=0),(nt===3||nt===4)&&ut.length>1){let et=nt===3?ut.substring(0,1):"",Et=nt===3?ut.substring(1,2):ut.substring(0,1),zt=nt===3?ut.substring(2):ut.substring(1),mt=[et,Et,zt].filter(Boolean);st.push(mt),nt+=mt.length}else st.push(ut),nt++}j=st.flat().filter(Boolean)}j=j.map(Number);let ft=j.length>Z,rt=ft?j.slice(0,Z):j,at=[{type:G,values:rt}];if(ft){let nt=F==="m"?O?"l":"L":G;for(let st=Z;st<j.length;st+=Z){let W=j.slice(st,st+Z);at.push({type:nt,values:W})}}if(!z&&!g&&!B)at.forEach(nt=>{P.push(nt)});else{T===0&&(b=j[0],x=j[1],M=b,_=x,L={x:j[0],y:j[1]});let nt=at[0].type;H=nt.toUpperCase(),O=!!(nt.toLowerCase()===nt&&P.length);for(let st=0;st<at.length;st++){let W=at[st],ut=W.type,et=W.values,Et=et.length,mt=(at[st-1]?at[st-1]:T>0&&P[P.length-1]?P[P.length-1]:at[st]).values,Mt=mt.length;if(O=at.length>1?ut.toLowerCase()===ut&&P.length:O,O)switch(W.type=at.length>1?ut.toUpperCase():H,F){case"a":W.values=[et[0],et[1],et[2],et[3],et[4],et[5]+b,et[6]+x];break;case"h":case"v":W.values=ut==="h"?[et[0]+b]:[et[0]+x];break;case"m":case"l":case"t":ut==="m"&&(L={x:et[0]+b,y:et[1]+x}),W.values=[et[0]+b,et[1]+x];break;case"c":W.values=[et[0]+b,et[1]+x,et[2]+b,et[3]+x,et[4]+b,et[5]+x];break;case"q":case"s":W.values=[et[0]+b,et[1]+x,et[2]+b,et[3]+x];break;case"z":case"Z":M=L.x,_=L.y;break}else b=0,x=0;if(g){let pt,dt,Ct,Jt,Pt,_t;W.type==="H"||W.type==="V"?(W.values=W.type==="H"?[W.values[0],_]:[M,W.values[0]],W.type="L"):(W.type==="T"||W.type==="S")&&([pt,dt]=[mt[0],mt[1]],[Pt,_t]=Mt>2?[mt[2],mt[3]]:[mt[0],mt[1]],Ct=W.type==="T"?M*2-pt:M*2-Pt,Jt=W.type==="T"?_*2-dt:_*2-_t,W.values=[Ct,Jt,W.values].flat(),W.type=W.type==="T"?"Q":"C")}let St=!1;B&&W.type==="A"?(p0={x:M,y:_},F==="a"&&(St=W.values[0]!==W.values[1],St||D?N(p0,W.values,U).forEach(dt=>{P.push(dt)}):P.push(W))):P.push(W),M=Et>1?et[Et-2]+b:F==="h"?et[0]+b:M,_=Et>1?et[Et-1]+x:F==="v"?et[0]+x:_,b=M,x=_}}}return P[0].type="M",P;function N(T,q,G=1){const F=n*2;let[H,O,Z,j,ft,rt,at]=q;if(H===0||O===0)return[];let nt=Z?Z*F/360:0,st=nt?r(nt):0,W=nt?i(nt):1,ut=W*(T.x-rt)/2+st*(T.y-at)/2,et=-st*(T.x-rt)/2+W*(T.y-at)/2;if(ut===0&&et===0)return[];H=a(H),O=a(O);let Et=ut*ut/(H*H)+et*et/(O*O);if(Et>1){let xt=s(Et);H*=xt,O*=xt}let zt=H*H,mt=H===O?zt:O*O,Mt=ut*ut,St=et*et,pt=zt*mt-zt*St-mt*Mt;pt<=0?pt=0:(pt/=zt*St+mt*Mt,pt=s(pt)*(j===ft?-1:1));let dt=pt?pt*H/O*et:0,Ct=pt?pt*-O/H*ut:0,Jt=W*dt-st*Ct+(T.x+rt)/2,Pt=st*dt+W*Ct+(T.y+at)/2,_t=(ut-dt)/H,Be=(et-Ct)/O,Vt=(-ut-dt)/H,fn=(-et-Ct)/O;const Fe=(xt,Dt,Gt,Rt)=>{let $t=+(xt*Gt+Dt*Rt).toFixed(9);return $t===1||$t===-1?$t===1?0:n:($t=$t>1?1:$t<-1?-1:$t,(xt*Rt-Dt*Gt<0?-1:1)*o($t))};let hn=Fe(1,0,_t,Be),wt=Fe(_t,Be,Vt,fn);ft===0&&wt>0?wt-=n*2:ft===1&&wt<0&&(wt+=n*2);let qe=+(a(wt)/(F/4)).toFixed(0)*G;wt/=qe;let Ve=[];const dn=1.5707963267948966,te=.551785;let pn=wt===dn?te:wt===-dn?-te:4/3*l(wt/4),Kn=wt?i(wt):1,Qn=wt?r(wt):0,Ge="C";const ve=(xt,Dt,Gt,Rt,$t)=>{let fe=xt!=Dt?i(xt):Rt,gn=xt!=Dt?r(xt):$t,Ze=i(xt+Dt),Ue=r(xt+Dt);return[{x:fe-gn*Gt,y:gn+fe*Gt},{x:Ze+Ue*Gt,y:Ue-Ze*Gt},{x:Ze,y:Ue}]};for(let xt=0;xt<qe;xt++){let Dt={type:Ge,values:[]};ve(hn,wt,pn,Kn,Qn).forEach(Rt=>{let $t=Rt.x*H,fe=Rt.y*O;Dt.values.push(W*$t-st*fe+Jt,st*$t+W*fe+Pt)}),Ve.push(Dt),hn+=wt}return Ve}}function k(S,A,P,V,X,E,R,I,D){const U=(St,pt,dt,Ct)=>{let Jt=St*dt+pt*Ct,Pt=Math.sqrt((St*St+pt*pt)*(dt*dt+Ct*Ct)),_t=Math.acos(Jt/Pt);return St*Ct-pt*dt<0&&(_t=-_t),_t};let B=+X*Math.PI/180,g,z,b,x,M,L=Math.PI*2;if(P<0&&(P=-P),V<0&&(V=-V),P==0||V==0)throw Error("rx and ry can not be 0");let N=Math.sin(B),T=Math.cos(B),q=(S-I)/2,G=(A-D)/2,F=(S+I)/2,H=(A+D)/2,O=T*q+N*G,Z=T*G-N*q,j=O*O/(P*P)+Z*Z/(V*V);j>1&&(P=P*Math.sqrt(j),V=V*Math.sqrt(j));let ft=P*V,rt=P*Z,at=V*O,nt=rt*rt+at*at;nt||console.log("start point can not be same as end point");let st=Math.sqrt(Math.abs((ft*ft-nt)/nt));E==R&&(st=-st);let W=st*rt/V,ut=-st*at/P;g=T*W-N*ut+F,z=N*W+T*ut+H;let et=(O-W)/P,Et=(O+W)/P,zt=(Z-ut)/V,mt=(Z+ut)/V;return b=U(1,0,et,zt),x=U(et,zt,-Et,-mt),x>L?x-=L:x<0&&(x+=L),(R==!1||R==0)&&(x-=L),M=b+x,M>L?M-=L:M<0&&(M+=L),{cx:g,cy:z,rx:P,ry:V,startAngle:b,deltaAngle:x,endAngle:M,clockwise:R==!0||R==1}}return e.getPathLengthLookup=d,e.getPathLengthFromD=C,e.getPathDataLength=m,e.getLength=v,e.parsePathDataNormalized=w,e.svgArcToCenterParam=k,e})})(ji);var rr=ji.exports;const If=["id"],Ef=["id"],zf=["d"],Pf=["d","marker-end","marker-start"],Df=["x","y"],Of=["x","y"],Rf={__name:"GraphEdge",props:{edge:Object,view:String},setup(t){const e=Re(),n=kr(),r=yr(),i=Pe(),o=ie(),a=Oe(),s=_i(),f=Zn(),l=ze(),u=t,p=Q(()=>l.params.type!=="graph"),h=Q(()=>o.data.nodes[u.edge.nodes[0]].type==="graph"&&o.data.nodes[u.edge.nodes[1]].type==="graph"),d=Q(()=>e.nodes[u.edge.nodes[0]]),C=Q(()=>e.nodes[u.edge.nodes[1]]),m=Q(()=>p.value&&l.params.id===u.edge.nodes[0]),v=Q(()=>p.value&&l.params.id===u.edge.nodes[1]),w=Q(()=>u.edge.graph!==o.storyId||p.value&&!u.edge.nodes.includes(l.params.id)),k=Q(()=>d.value==null||C.value==null||p.value&&!u.edge.nodes.includes(l.params.id)),S=Q(()=>{var M;const x=(M=o.data.nodes[u.edge.graph])==null?void 0:M.color;return{"--graph-accent":x?`var(--${x})`:null}}),A=Q(()=>n.inheritStateFromNodes(u.edge.nodes)),P=Q(()=>{if(d.value==null&&C.value==null)return;const x=d.value??b(C.value),M=C.value??b(d.value),_=dr,L=dr,N=x.width?x.width+_+_*m.value:0,T=x.height?x.height+_+_*m.value*2:0,q=M.width?M.width+_+_*v.value:0,G=M.height?M.height+_+_*v.value*2:0,F=di(x.x,x.y,M.x,M.y,x.x-N/2,x.y-T/2,N,T,Math.min(L,T/2-.1))[0],H=di(x.x,x.y,M.x,M.y,M.x-q/2,M.y-G/2,q,G,Math.min(L,G/2-.1))[0];if(F==null||H==null)return;const O={x:F.point[0]+e.offset.x,y:F.point[1]+e.offset.y},Z={x:H.point[0]+e.offset.x,y:H.point[1]+e.offset.y};if(C.value==null){let rt=rr.getPathLengthLookup(`M${O.x},${O.y} L${Z.x},${Z.y}`);const at=rt.getPointAtLength(6),nt=rt.getPointAtLength(3);return[O,nt,nt,at]}if(d.value==null){let rt=rr.getPathLengthLookup(`M${Z.x},${Z.y} L${O.x},${O.y}`);const at=rt.getPointAtLength(6),nt=rt.getPointAtLength(3);return[at,nt,nt,Z]}const j={x:(O.x+Z.x)/2,y:(O.y+Z.y)/2};if(p.value)return[O,j,j,Z];const ft=[{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}];return[O,{x:O.x+ft[F.anchor].x*100,y:O.y+ft[F.anchor].y*100},{x:Z.x+ft[H.anchor].x*100,y:Z.y+ft[H.anchor].y*100},Z]}),V=Q(()=>{if(P.value!=null)return`M${P.value.map((x,M)=>`${M===1?"C":""}${x.x},${x.y}`).join(" ")}`}),X=Q(()=>{if(V.value==null)return[];let x=rr.getPathLengthLookup(V.value),M=x.totalLength;return x.getPointAtLength(M/2)}),E=Q(()=>`${u.edge.nodes.join("-")}-${u.edge.graph}`),R=Q(()=>`url('#marker-${E.value}')`),I=Q(()=>`url('#marker-${E.value}-alt')`),D=Q(()=>(u.edge.arrow===""||u.edge.arrow==="")&&R.value),U=Q(()=>(u.edge.arrow===""||u.edge.arrow==="")&&I.value);function B(x){if(!x.metaKey)return;x.stopPropagation(),x.preventDefault();const M=[null,"","",""],_=Math.max(M.indexOf(u.edge.arrow),0);o.data.edges.find(L=>L.id===u.edge.id).arrow=M[(_+1)%M.length]}function g(x){!a.edit||x.metaKey||s.open(u.edge.id,"edge")}function z(x){a.edit&&(x.preventDefault(),x.stopPropagation(),f.open(mr,[{label:"delete",action:()=>{o.data.edges=o.data.edges.filter(M=>M.id!==u.edge.id)}},{label:"edit",action:()=>{s.open(u.edge.id,"edge")}}],{x:x.x,y:x.y}))}function b(x,M=500){const _=Math.random()*Math.PI*2;return{x:Math.cos(_)*M+x.x,y:Math.sin(_)*M+x.y}}return(x,M)=>P.value!=null&&!(h.value&&w.value)?(K(),ot("g",{key:0,class:Qt(["edge",[A.value,t.view,{"user-active":!J(r).inactivityShort||!J(i).playing,secondary:w.value,tertiary:k.value}]]),style:ne(S.value)},[tt("defs",null,[tt("marker",{id:`marker-${E.value}`,markerWidth:"10",markerHeight:"20",refX:"10",refY:"10",orient:"auto"},M[0]||(M[0]=[tt("path",{d:"M2,6.5 L10,10 L2,13.5"},null,-1)]),8,If),tt("marker",{id:`marker-${E.value}-alt`,markerWidth:"10",markerHeight:"20",refX:"00",refY:"10",orient:"auto"},M[1]||(M[1]=[tt("path",{d:"M8,6.5 L0,10 L8,13.5"},null,-1)]),8,Ef)]),ct(Lf,{props:{d:V.value,...X.value},delay:0,duration:J(a).edit?0:J(nn)},{default:yt(_=>[J(a).edit?(K(),ot("path",{key:0,class:"edit",d:_.d,onDblclick:Nt(g,["stop"]),onContextmenu:z,onClick:B},null,40,zf)):Ft("",!0),tt("path",{d:_.d,"marker-end":D.value,"marker-start":U.value,class:Qt({dashed:t.edge.classRelationship})},null,10,Pf),k.value?Ft("",!0):(K(),ot(rn,{key:1},[tt("text",{class:Qt(["shadow",{edit:J(a).edit}]),x:_.x,y:_.y,onDblclick:Nt(g,["stop"]),onContextmenu:z,onClick:B},[ct(En,{text:t.edge.label},null,8,["text"])],42,Df),tt("text",{x:_.x,y:_.y},[ct(En,{text:t.edge.label},null,8,["text"])],8,Of)],64))]),_:1},8,["props","duration"])],6)):Ft("",!0)}},Bf=qt(Rf,[["__scopeId","data-v-18055a55"]]),Sn={__name:"ContextMenuSearch",props:{context:{type:Object,default:()=>({nodeType:"entity"})}},setup(t){const e=ie(),n=Zn(),r=Re();function i(o){e.data.nodes[e.nodeId].allocations==null&&(e.data.nodes[e.nodeId].allocations={}),e.data.nodes[e.nodeId].allocations[o]={x:(n.offset.x-r.transform.x)/r.transform.k,y:(n.offset.y-r.transform.y)/r.transform.k}}return(o,a)=>(K(),Tt(Xo,{onSelectItem:i,context:t.context},null,8,["context"]))}},Ff=["d"],Hf={__name:"TheGraph",setup(t){const e=ze(),n=mi(),r=ie();Ko();const i=kr(),o=yr(),a=Pe(),s=Re(),f=Oe(),l=Zn(),u=vr(),p=lt([]),h=lt(null),d=lt(null),C=lt(null),m=lt(null),v=Q(()=>e.params.id),w=lt(r.data.nodes[v.value]),k=Q(()=>e.params.type==="graph"?"diagram":"network"),S=Q(()=>`translate(${s.transform.x}px, ${s.transform.y}px) scale(${s.transform.k})`),A=Q(()=>{if(p.value==null)return;if(i.bounds!=null)return{x1:i.bounds.x1+s.offset.x,y1:i.bounds.y1+s.offset.y,x2:i.bounds.x2+s.offset.x,y2:i.bounds.y2+s.offset.y};const _=Object.values(p.value),L=_.map(({x:G})=>G),N=_.map(({y:G})=>G),T=200,q=100;return{x1:Math.min(...L)-T+s.offset.x,y1:Math.min(...N)-q+s.offset.y,x2:Math.max(...L)+T+s.offset.x,y2:Math.max(...N)+q+s.offset.y}}),P=Q(()=>{const _=r.data.edges.filter(L=>r.data.nodes[L.nodes[0]]!=null&&r.data.nodes[L.nodes[1]]!=null);if(k.value==="network"){const L=r.data.nodes[v.value].class;L!=null&&_.push({id:`class-${[v.value,L].join("-")}`,nodes:[v.value,L],arrow:"",classRelationship:!0}),r.nodes.filter(N=>N.class===v.value).forEach(N=>{_.push({id:`class-${[N.id,v.value].join("-")}`,nodes:[N.id,v.value],arrow:"",classRelationship:!0})})}return _}),V=Q(()=>Object.keys(p.value??{}).sort()),X=Q(()=>{if(w.value.color!=null)return{"--graph-accent":`var(--${w.value.color})`}}),E=Q(()=>{var q;if((((q=i.exactMarker)==null?void 0:q.bounds)==null&&m.value)==null)return;const{x1:_,y1:L,x2:N,y2:T}=m.value||i.exactMarker.bounds;return`M${_+s.offset.x},${L+s.offset.y} L${N+s.offset.x},${L+s.offset.y} L${N+s.offset.x},${T+s.offset.y} L${_+s.offset.x},${T+s.offset.y} Z`});Xt([v,()=>r.data],([_],[L])=>{w.value=r.data.nodes[_],R(nn,L)}),Xt(A,()=>{o.inactivityShort&&D(A.value,nn)}),Xt(()=>o.inactivityShort,()=>{a.playing&&D(A.value,nn)}),Xt(()=>o.inactivityLong,()=>{a.playing&&e.name==="graph"&&e.params.type!=="graph"&&a.graphId!=null&&n.push({name:"graph",params:{type:"graph",id:a.graphId}})}),De(()=>{d.value=ge(h.value),C.value=Ku().scaleExtent([.1,1]).on("zoom",_=>{s.transform=_.transform}).filter(_=>{if(u.mode!=="display-frame")return ke(()=>o.registerActivity()),_.button===0&&!l.show}),d.value.call(C.value),R(0),U.observe(h.value)}),gr(()=>{h.value!=null&&U.unobserve(h.value)});function R(_,L){if(w.value.type==="graph"){if(p.value=w.value.allocations,L!=null){const N=r.data.nodes[L].type==="graph"?I(r.data.nodes[L].allocations):{x:0,y:0},T=r.data.nodes[L].type==="graph"||p.value[L]==null?I(p.value):p.value[L];s.offset.x=s.offset.x+N.x-T.x,s.offset.y=s.offset.y+N.y-T.y}D(A.value,_)}else p.value=Nc(v.value),D(A.value,_,s.offset)}function I(_){const L=Object.values(_),N=L.map(({x:O})=>O),T=L.map(({y:O})=>O),q=Math.min(...N),G=Math.max(...N),F=Math.min(...T),H=Math.max(...T);return{x:(q+G)/2,y:(F+H)/2}}function D(_,L=0,N){if(_==null)return;const T={x:_.x2-_.x1,y:_.y2-_.y1},q=h.value.getBoundingClientRect(),G=q.width/T.x,F=(q.height-dr*2.7)/T.y,H=Math.min(G,F),O=_.x1+T.x/2,Z=_.y1+T.y/2;d.value.transition().duration(L).call(C.value.transform,Sr.translate(q.width/2,q.height/2).scale(H).translate(-O,-Z))}const U=new ResizeObserver(_=>{for(const L of _)L.contentRect&&D(A.value,0)});function B(_){!f.edit||k.value!=="diagram"||(_.preventDefault(),l.open(mr,[{label:"add",action:L=>{L.stopPropagation(),l.open(Sn)}},{label:"log",action:()=>{console.log(s.transform,l.offset)}}],{x:_.x,y:_.y}))}function g(_){if(!(!f.edit||k.value!=="diagram"))switch(["add-entity","add-story","add-image"].includes(u.mode)&&_.stopPropagation(),u.mode){case"add-entity":l.open(Sn,{nodeType:"entity"},{x:_.x,y:_.y}),u.resetMode();break;case"add-story":l.open(Sn,{nodeType:"graph"},{x:_.x,y:_.y}),u.resetMode();break;case"add-image":l.open(Sn,{nodeType:"image"},{x:_.x,y:_.y}),u.resetMode();break}}function z(_){if(u.mode==="display-frame"){_.preventDefault(),_.stopPropagation();const L=M(_);m.value={x1:L.x-s.offset.x,y1:L.y-s.offset.y,x2:L.x-s.offset.x,y2:L.y-s.offset.y};const N=new AbortController,T=function(){console.log("reset"),N.abort(),m.value=null};window.addEventListener("keydown",q=>{q.key==="Escape"&&T()},{signal:N.signal}),window.addEventListener("mousemove",q=>{const{x:G,y:F}=M(q);m.value.x2=G-s.offset.x,m.value.y2=F-s.offset.y},{signal:N.signal}),window.addEventListener("mouseup",()=>{u.setBounds(m.value,v.value),T(),u.resetMode()},{signal:N.signal})}}function b(_){if(_.preventDefault(),!f.edit||k.value!=="diagram")return;const L=Gr(_.dataTransfer.getData("text/uri-list")),N=r.nodes.find(q=>q.file===Gr(L));if(N!=null)return x(N.id,_.x,_.y);if(/(.png|.jpe?g|.gif|.webp)$/i.test(L)){const q=crypto.randomUUID(),G={type:"image",file:L,label:{universal:L.replace(/[^:]*:\/?\/?/,"").replace(/\.[^.]+$/,"")}};r.data.nodes[q]=G,x(q,_.x,_.y)}}function x(_,L,N){r.data.nodes[r.nodeId].allocations[_]=M({x:L,y:N})}function M(_){return{x:(_.x-s.transform.x)/s.transform.k,y:(_.y-s.transform.y)/s.transform.k}}return(_,L)=>(K(),ot("main",{class:Qt(["graph",[`mode-${J(u).mode}`,{initializing:J(e).meta.initializeView}]]),ref_key:"zoomElement",ref:h,style:ne(X.value),onContextmenu:B,onClick:g,onMousedown:z,onDrop:b,onDragover:L[0]||(L[0]=Nt(()=>{},["prevent"])),onDragenter:L[1]||(L[1]=Nt(()=>{},["prevent"]))},[tt("div",{class:"nodes",style:ne({transform:S.value})},[ct(Vr,{name:"nodes"},{default:yt(()=>[(K(!0),ot(rn,null,zn(V.value,N=>(K(),Tt(Sf,{key:N,id:N,position:p.value[N],view:k.value,graph:k.value==="diagram"&&v.value},null,8,["id","position","view","graph"]))),128))]),_:1})],4),(K(),ot("svg",null,[tt("g",{style:ne({transform:S.value})},[ct(Vr,{name:"edges"},{default:yt(()=>[(K(!0),ot(rn,null,zn(P.value,N=>(K(),Tt(Bf,{key:N.id,edge:N,view:k.value},null,8,["edge","view"]))),128))]),_:1}),J(f).edit&&E.value?(K(),ot("path",{key:0,d:E.value,class:"display-bounds"},null,8,Ff)):Ft("",!0)],4)]))],38))}},qf=qt(Hf,[["__scopeId","data-v-fa397abc"]]),Vf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Gf(t,e){return K(),ot("svg",Vf,e[0]||(e[0]=[tt("path",{d:"M18.3994816,13.8517704 L28.7074921,22.4660712 C29.1312774,22.8202243 29.1877255,23.450868 28.8335723,23.8746534 C28.6860759,24.0511499 28.4822444,24.1714042 28.2564291,24.2151501 L25.5073341,24.7477155 C24.9651298,24.8527535 24.6107365,25.377447 24.7157744,25.9196512 C24.7313245,25.9999207 24.7566603,26.0779801 24.7912143,26.1520815 L26.5743353,29.9759967 C26.8077409,30.4765367 26.5911857,31.0715171 26.0906457,31.3049227 L25.184338,31.727541 C24.683798,31.9609466 24.0888175,31.7443914 23.8554119,31.2438515 L22.072291,27.4199363 C21.8388853,26.9193963 21.2439049,26.7028411 20.7433649,26.9362467 C20.6692636,26.9708008 20.5996796,27.0143123 20.5361713,27.0658068 L18.3611183,28.8294093 C17.9321324,29.1772448 17.3023942,29.1114594 16.9545587,28.6824734 C16.8096934,28.5038109 16.7308474,28.2806704 16.7313064,28.0506573 L16.7582326,14.6170974 C16.7593395,14.0648137 17.2079512,13.6179967 17.7602349,13.6191016 C17.9939596,13.6195721 18.220137,13.7018939 18.3994816,13.8517704 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const Zf={name:"base-CursorDefault",render:Gf},Uf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Yf(t,e){return K(),ot("svg",Uf,e[0]||(e[0]=[tt("path",{d:"M32,15 C33.1045695,15 34,15.8954305 34,17 L34,28 C34,29.1045695 33.1045695,30 32,30 L13,30 C11.8954305,30 11,29.1045695 11,28 L11,17 C11,15.8954305 11.8954305,15 13,15 L32,15 Z M32,16 L13,16 C12.4477153,16 12,16.4477153 12,17 L12,28 C12,28.5522847 12.4477153,29 13,29 L32,29 C32.5522847,29 33,28.5522847 33,28 L33,17 C33,16.4477153 32.5522847,16 32,16 Z M23,25 C23.5522847,25 24,25.4477153 24,26 L24,27 C24,27.5522847 23.5522847,28 23,28 L14,28 C13.4477153,28 13,27.5522847 13,27 L13,26 C13,25.4477153 13.4477153,25 14,25 L23,25 Z M31,17 C31.5522847,17 32,17.4477153 32,18 L32,23 C32,23.5522847 31.5522847,24 31,24 L14,24 C13.4477153,24 13,23.5522847 13,23 L13,18 C13,17.4477153 13.4477153,17 14,17 L31,17 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const Wf={name:"base-AddEntity",render:Yf},Xf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Kf(t,e){return K(),ot("svg",Xf,e[0]||(e[0]=[tt("path",{d:"M32,15 C33.1045695,15 34,15.8954305 34,17 L34,28 C34,29.1045695 33.1045695,30 32,30 L13,30 C11.8954305,30 11,29.1045695 11,28 L11,17 C11,15.8954305 11.8954305,15 13,15 L32,15 Z M32,16 L13,16 C12.4477153,16 12,16.4477153 12,17 L12,28 C12,28.5522847 12.4477153,29 13,29 L32,29 C32.5522847,29 33,28.5522847 33,28 L33,17 C33,16.4477153 32.5522847,16 32,16 Z M20.1483417,19.765467 C20.4377927,19.2951091 21.0537395,19.1484551 21.5240974,19.4379061 L25.1160552,21.6483417 C25.2493757,21.730385 25.3615728,21.8425821 25.4436161,21.9759026 C25.7330671,22.4462605 25.5864131,23.0622073 25.1160552,23.3516583 L21.5240974,25.5620939 C21.3664897,25.6590832 21.1850598,25.7104356 21,25.7104356 C20.4477153,25.7104356 20,25.2627203 20,24.7104356 L20,20.2895644 C20,20.1045046 20.0513523,19.9230747 20.1483417,19.765467 Z",fill:"currentColor"},null,-1)]))}const Qf={name:"base-AddStory",render:Kf},jf={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function Jf(t,e){return K(),ot("svg",jf,e[0]||(e[0]=[tt("path",{d:"M32,15 C33.1045695,15 34,15.8954305 34,17 L34,28 C34,29.1045695 33.1045695,30 32,30 L13,30 C11.8954305,30 11,29.1045695 11,28 L11,17 C11,15.8954305 11.8954305,15 13,15 L32,15 Z M32,16 L13,16 C12.4477153,16 12,16.4477153 12,17 L12,28 C12,28.5522847 12.4477153,29 13,29 L32,29 C32.5522847,29 33,28.5522847 33,28 L33,17 C33,16.4477153 32.5522847,16 32,16 Z M26,22 C27.8346354,21.3884549 29.6692708,21.6183815 31.5040033,22.6896136 C31.8106661,22.8685631 31.9994458,23.1967019 32,23.5517578 L32,27 C32,27.5522847 31.5522847,28 31,28 L14,28 C13.4477153,28 13,27.5522847 13,27 L13,25.9687057 L13.0105961,25.8251331 C13.0818756,25.3451379 13.503213,24.9842004 14,25 L14.4403514,25.0105801 C20.8078896,25.11322 23.2067448,22.9310851 26,22 Z M16.75,18.5 C17.7164983,18.5 18.5,19.2835017 18.5,20.25 C18.5,21.2164983 17.7164983,22 16.75,22 C15.7835017,22 15,21.2164983 15,20.25 C15,19.2835017 15.7835017,18.5 16.75,18.5 Z",fill:"currentColor"},null,-1)]))}const th={name:"base-AddImage",render:Jf},eh={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function nh(t,e){return K(),ot("svg",eh,e[0]||(e[0]=[tt("path",{d:"M31.0395445,14.6621019 C31.0865261,14.8343676 31.0865261,15.0160709 31.0395445,15.1883367 L29.2261258,21.8375386 C29.0808101,22.3703629 28.531069,22.6845007 27.9982446,22.539185 C27.8303497,22.4933955 27.6773109,22.4045836 27.5542552,22.281528 L25.844,20.5709684 L15.7071068,30.7071068 C15.3165825,31.0976311 14.6834175,31.0976311 14.2928932,30.7071068 C13.9023689,30.3165825 13.9023689,29.6834175 14.2928932,29.2928932 L24.429,19.1559684 L22.718472,17.4457448 C22.3279477,17.0552205 22.3279477,16.4220555 22.718472,16.0315312 C22.8415277,15.9084756 22.9945665,15.8196637 23.1624614,15.7738742 L29.8116633,13.9604555 C30.3444877,13.8151397 30.8942288,14.1292775 31.0395445,14.6621019 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const rh={name:"base-AddLink",render:nh},ih={class:"icon",width:"45",height:"3",viewBox:"0 0 45 3",xmlns:"http://www.w3.org/2000/svg"};function oh(t,e){return K(),ot("svg",ih,e[0]||(e[0]=[tt("path",{d:"M36.5,1 C36.7761424,1 37,1.22385763 37,1.5 C37,1.77614237 36.7761424,2 36.5,2 L8.5,2 C8.22385763,2 8,1.77614237 8,1.5 C8,1.22385763 8.22385763,1 8.5,1 L36.5,1 Z",fill:"currentColor",opacity:".25"},null,-1)]))}const pi={name:"base-SeperatorHorizontal",render:oh},ah={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"},sh=["id"],lh=["filter"];function uh(t,e){return K(),ot("svg",ah,[tt("defs",null,[tt("filter",{x:"-34.9%",y:"-34.9%",width:"169.8%",height:"169.8%",filterUnits:"objectBoundingBox",id:t.idMap.a},e[0]||(e[0]=[tt("feGaussianBlur",{stdDeviation:"2",in:"SourceGraphic"},null,-1)]),8,sh)]),tt("path",{d:"M22.7071068,15.7071068 L29.2928932,22.2928932 C29.6834175,22.6834175 29.6834175,23.3165825 29.2928932,23.7071068 L22.7071068,30.2928932 C22.3165825,30.6834175 21.6834175,30.6834175 21.2928932,30.2928932 L14.7071068,23.7071068 C14.3165825,23.3165825 14.3165825,22.6834175 14.7071068,22.2928932 L21.2928932,15.7071068 C21.6834175,15.3165825 22.3165825,15.3165825 22.7071068,15.7071068 Z",fill:"currentColor",filter:"url(#"+t.idMap.a+")","fill-rule":"evenodd",opacity:".832"},null,8,lh)])}const ch={name:"base-DisplayBlur",render:uh,data(){return{idMap:{a:"uicons-"+Math.random().toString(36).substr(2,10)}}}},fh={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function hh(t,e){return K(),ot("svg",fh,e[0]||(e[0]=[tt("path",{d:"M17.1464466,27.1464466 L17.8535534,27.8535534 L15.3535534,30.3535534 L14.6464466,29.6464466 L17.1464466,27.1464466 Z M27.8535534,27.1464466 L30.3535534,29.6464466 L29.6464466,30.3535534 L27.1464466,27.8535534 L27.8535534,27.1464466 Z M23.2071068,15.2071068 L29.7928932,21.7928932 C30.1834175,22.1834175 30.1834175,22.8165825 29.7928932,23.2071068 L23.2071068,29.7928932 C22.8165825,30.1834175 22.1834175,30.1834175 21.7928932,29.7928932 L15.2071068,23.2071068 C14.8165825,22.8165825 14.8165825,22.1834175 15.2071068,21.7928932 L21.7928932,15.2071068 C22.1834175,14.8165825 22.8165825,14.8165825 23.2071068,15.2071068 Z M29.6464466,14.6464466 L30.3535534,15.3535534 L27.8535534,17.8535534 L27.1464466,17.1464466 L29.6464466,14.6464466 Z M15.3535534,14.6464466 L17.8535534,17.1464466 L17.1464466,17.8535534 L14.6464466,15.3535534 L15.3535534,14.6464466 Z M20.7868105,14.1744381 L19.8208847,14.4332571 L18.9058212,11.0181936 L19.871747,10.7593745 L20.7868105,14.1744381 Z M26.0941788,33.9818064 L25.128253,34.2406255 L24.2131895,30.8255619 L25.1791153,30.5667429 L26.0941788,33.9818064 Z M25.1791153,14.4332571 L24.2131895,14.1744381 L25.128253,10.7593745 L26.0941788,11.0181936 L25.1791153,14.4332571 Z M19.871747,34.2406255 L18.9058212,33.9818064 L19.8208847,30.5667429 L20.7868105,30.8255619 L19.871747,34.2406255 Z M30.8255619,20.7868105 L30.5667429,19.8208847 L33.9818064,18.9058212 L34.2406255,19.871747 L30.8255619,20.7868105 Z M11.0181936,26.0941788 L10.7593745,25.128253 L14.1744381,24.2131895 L14.4332571,25.1791153 L11.0181936,26.0941788 Z M30.5667429,25.1791153 L30.8255619,24.2131895 L34.2406255,25.128253 L33.9818064,26.0941788 L30.5667429,25.1791153 Z M10.7593745,19.871747 L11.0181936,18.9058212 L14.4332571,19.8208847 L14.1744381,20.7868105 L10.7593745,19.871747 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const dh={name:"base-DisplayHighlight",render:hh},ph={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function gh(t,e){return K(),ot("svg",ph,e[0]||(e[0]=[tt("path",{d:"M30.2071068,14.7928932 C30.5976311,15.1834175 30.5976311,15.8165825 30.2071068,16.2071068 L16.2071068,30.2071068 C15.8165825,30.5976311 15.1834175,30.5976311 14.7928932,30.2071068 C14.4023689,29.8165825 14.4023689,29.1834175 14.7928932,28.7928932 L28.7928932,14.7928932 C29.1834175,14.4023689 29.8165825,14.4023689 30.2071068,14.7928932 Z M27.9142136,19.9142136 L29.7928932,21.7928932 C30.1834175,22.1834175 30.1834175,22.8165825 29.7928932,23.2071068 L23.2071068,29.7928932 C22.8165825,30.1834175 22.1834175,30.1834175 21.7928932,29.7928932 L19.9142136,27.9142136 L27.9142136,19.9142136 Z M23.2071068,15.2071068 L25.0862136,17.0862136 L17.0862136,25.0862136 L15.2071068,23.2071068 C14.8165825,22.8165825 14.8165825,22.1834175 15.2071068,21.7928932 L21.7928932,15.2071068 C22.1834175,14.8165825 22.8165825,14.8165825 23.2071068,15.2071068 Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const yh={name:"base-DisplayUnset",render:gh},vh={class:"icon",width:"45",height:"45",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"};function mh(t,e){return K(),ot("svg",vh,e[0]||(e[0]=[tt("path",{d:"M15,30 L30,30 L30,29 L15,29 L15,30 Z M23,15 L23,25.292 L26.6464466,21.6464466 L27.3535534,22.3535534 L22.5,27.2071068 L17.6464466,22.3535534 L18.3535534,21.6464466 L22,25.292 L22,15 L23,15 Z",fill:"currentColor"},null,-1)]))}const _h={name:"base-Export",render:mh},xh={class:"toolbar"},wh={__name:"TheToolbar",setup(t){const e=vr(),n=ie();return(r,i)=>(K(),ot("section",xh,[ct(Qo,{modelValue:J(e).mode,"onUpdate:modelValue":i[0]||(i[0]=o=>J(e).mode=o),options:[{value:"default",slot:"default",tooltip:"Select"},{value:"add-entity",slot:"add-entity",tooltip:"add entity"},{value:"add-story",slot:"add-story",tooltip:"add story"},{value:"add-image",slot:"add-image",tooltip:"add image"},{value:"add-edge",slot:"add-edge",tooltip:"add edge"},{disabled:!0,slot:"seperator"},{value:"display-blur",slot:"display-blur",tooltip:"blur"},{value:"display-default",slot:"display-default",tooltip:"default"},{value:"display-highlight",slot:"display-highlight",tooltip:"highlight"},{value:"display-unset",slot:"display-unset",tooltip:"unset"},{value:"display-frame",slot:"display-frame",tooltip:"frame"},{disabled:!0,slot:"seperator2"},{value:"download",slot:"download",tooltip:"download data",action:J(n).exportProject}]},{default:yt(()=>[ct(J(Zf))]),"add-entity":yt(()=>[ct(J(Wf))]),"add-story":yt(()=>[ct(J(Qf))]),"add-image":yt(()=>[ct(J(th))]),"add-edge":yt(()=>[ct(J(rh))]),seperator:yt(()=>[ct(J(pi))]),"display-blur":yt(()=>[ct(J(ch))]),"display-default":yt(()=>[ct(J(Jo))]),"display-highlight":yt(()=>[ct(J(dh))]),"display-unset":yt(()=>[ct(J(yh))]),"display-frame":yt(()=>[ct(J(ta))]),seperator2:yt(()=>[ct(J(pi))]),download:yt(()=>[ct(J(_h))]),_:1},8,["modelValue","options"])]))}},bh=qt(wh,[["__scopeId","data-v-f9fd2ea6"]]),Ch={class:"interface-layer fullscreen"},Lh={__name:"GraphView",setup(t){const e=Pe(),n=Oe();ze();const r=Q(()=>!e.showVideo||!n.pictureInPicture||n.pictureInPictureVideo);return(i,o)=>(K(),ot("div",{class:Qt(["graph-view",{"split-screen":J(e).showVideo&&!J(n).pictureInPicture,"pip-graph":J(e).showVideo&&J(n).pictureInPicture&&!J(n).pictureInPictureVideo}])},[J(e).showVideo?(K(),Tt(ra,{key:0,class:Qt(["video",{fullscreen:!r.value}]),onWheel:o[0]||(o[0]=Nt(()=>{},["prevent"]))},null,8,["class"])):Ft("",!0),ct(qf,{class:Qt(["graph",{fullscreen:r.value}]),onWheel:o[1]||(o[1]=Nt(()=>{},["prevent"]))},null,8,["class"]),tt("div",{class:"toggle-pip",onClick:o[2]||(o[2]=a=>J(n).pictureInPictureVideo=!J(n).pictureInPictureVideo)}),tt("div",Ch,[ct(oa,{onWheel:o[3]||(o[3]=Nt(()=>{},["prevent"]))}),ct(ga),ct(ea,{onWheel:o[4]||(o[4]=Nt(()=>{},["prevent"]))}),J(n).edit?(K(),Tt(bh,{key:0,onWheel:o[5]||(o[5]=Nt(()=>{},["prevent"]))})):Ft("",!0),ct(na,{class:"no-events",onWheel:o[6]||(o[6]=Nt(()=>{},["prevent"]))})])],2))}},Nh=qt(Lh,[["__scopeId","data-v-f571974d"]]);export{Nh as default};
